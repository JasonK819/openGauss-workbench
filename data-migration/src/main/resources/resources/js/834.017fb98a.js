"use strict";(self["webpackChunkweb_ui"]=self["webpackChunkweb_ui"]||[]).push([[834],{2649:function(e,t,a){a.d(t,{C3:function(){return r},GA:function(){return i},Pj:function(){return u},_A:function(){return n},cg:function(){return o},dw:function(){return d},mX:function(){return c},mY:function(){return s},zN:function(){return p}});var l=a(196);function n(e){return l.ZP.get(`/plugins/data-migration/migration/${e}`)}function s(e){return l.ZP.get(`/plugins/data-migration/migration/refreshStatus/${e}`)}function i(e,t){return l.ZP.get(`/plugins/data-migration/migration/subTasks/${e}`,{params:t})}function u(e){return l.ZP.post(`/plugins/data-migration/migration/subTask/finish/${e}`)}function o(e){return l.ZP.post(`/plugins/data-migration/migration/subTask/start/reverse/${e}`)}function c(e){return l.ZP.post(`/plugins/data-migration/migration/subTask/stop/incremental/${e}`)}function r(e){return l.ZP.get(`/plugins/data-migration/migration/subTaskInfo/${e}`)}function d(e,t){return l.ZP.get(`/plugins/data-migration/migration/subTask/log/download/${e}`,{params:t})}function p(e){return l.ZP.get(`/plugins/data-migration/migration/editInfo/${e}`)}},6618:function(e,t,a){a.d(t,{BL:function(){return s},Lh:function(){return o},_5:function(){return u},pb:function(){return n},sT:function(){return i}});var l=a(196);function n(e){return l.ZP.get("/plugins/data-migration/migration/list",{params:e})}function s(e){return l.ZP.post(`/plugins/data-migration/migration/start/${e}`)}function i(e){return l.ZP.post(`/plugins/data-migration/migration/finish/${e}`)}function u(e){return l.ZP["delete"](`/plugins/data-migration/migration/${e}`)}function o(){return l.ZP.get("/plugins/data-migration/migration/list/createUsers")}},3744:function(e,t){t.Z=(e,t)=>{const a=e.__vccOpts||e;for(const[l,n]of t)a[l]=n;return a}},7834:function(e,t,a){a.r(t),a.d(t,{default:function(){return be}});var l=a(821),n=a(5784),s=a(2649),i=a(7484),u=a.n(i);const o=e=>((0,l.dD)("data-v-3591ec7b"),e=e(),(0,l.Cn)(),e),c={class:"title-con"},r={class:"tab-con"},d={class:"task-status"},p={class:"task-detail-con"},m={class:"task-desc-con"},v={key:0,class:"progress-con"},g=o((()=>(0,l._)("span",{class:"progress-info"},"进度",-1))),w={key:1,class:"table-con"},k=o((()=>(0,l._)("span",null,"迁移状态",-1))),f={style:{"margin-left":"5px",cursor:"pointer"}},_={class:"filter-con"},b=o((()=>(0,l._)("span",null,"仅显示错误数据：",-1))),y=o((()=>(0,l._)("span",null,"迁移校验",-1))),W={style:{"margin-left":"5px",cursor:"pointer"}},x={class:"filter-con"},z=o((()=>(0,l._)("span",null,"仅显示错误数据：",-1))),h={key:2,class:"record-con"},D=o((()=>(0,l._)("div",{class:"record-title"},"在线迁移过程记录",-1))),T={class:"record-list"},C={class:"record-item-hd"},j={class:"hd-info"},I={class:"hd-time"},S={class:"record-item-con"},P={class:"record-item-info"},U={class:"info"},q={class:"time"},H={key:0,class:"table-con"},$=o((()=>(0,l._)("span",null,"迁移状态",-1))),Z={style:{"margin-left":"5px",cursor:"pointer"}},N={class:"filter-con"},V=o((()=>(0,l._)("span",null,"仅显示错误数据：",-1))),O=o((()=>(0,l._)("span",null,"迁移校验",-1))),R={style:{"margin-left":"5px",cursor:"pointer"}},M={class:"filter-con"},F=o((()=>(0,l._)("span",null,"仅显示错误数据：",-1))),B={key:1,class:"list-con"},J={class:"list-item-con"},L={class:"list-title"},Y={class:"list-title-l"},A={class:"list-title-r"},G={class:"list-info-em"},K={class:"list-info-em"},X={class:"list-info"},E={key:3,class:"log-con"},Q={class:"log-detail-info"};var ee={__name:"SubTaskDetail",props:{open:Boolean,taskInfo:Object,subTaskId:[String,Number],tab:[String,Number]},emits:["update:open"],setup(e,{emit:t}){const a=e,n=(0,l.iH)(!1),i=(0,l.iH)(1),o=(0,l.iH)(!1),ee=(0,l.iH)(!1),te=(0,l.iH)({}),ae=(0,l.iH)([]),le=(0,l.iH)({}),ne=e=>{const t={0:"未启动",1:"全量迁移开始",2:"全量迁移进行中",3:"全量迁移完成",4:"全量校验开始",5:"全量校验中",6:"全量检验完成",7:"增量迁移开始",8:"增量迁移进行中",9:"增量迁移已停止",10:"反向迁移开始",11:"反向迁移进行中",12:"反向迁移已停止",100:"迁移完成",500:"迁移失败",1e3:"等待资源中"};return t[e]},se=e=>{const t={1:"启动迁移",2:"停止增量",3:"启动反向",100:"结束迁移"};return t[e]};(0,l.YP)(n,(e=>{t("update:open",e)})),(0,l.YP)((()=>a.open),(e=>{e&&(i.value=a.tab,o.value=!1,ee.value=!1,le.value={},ue.value=[],re.value=[],de.value=!1,pe.value=!1,ge()),n.value=e}));const ie=e=>{i.value=e},ue=(0,l.iH)([]),oe=(0,l.iH)([]),ce=(0,l.iH)({}),re=(0,l.iH)([]),de=(0,l.iH)(!1),pe=(0,l.iH)(!1),me=e=>{const t=JSON.parse(JSON.stringify(oe.value))||[];1===e&&de.value||2===e&&pe.value?ue.value=t.map((e=>({...e,children:e.children.filter((e=>6===e.status))}))):(de.value=!1,pe.value=!1,ue.value=t)},ve=e=>{(0,s.dw)(te.value.id,{filePath:e}).then((t=>{if(console.log(t),t){const a=new Blob([t],{type:"text/plain"}),l=document.createElement("a"),n=window.URL||window.webkitURL,s=n.createObjectURL(a);l.href=s,l.download=e.substring(e.lastIndexOf("/")+1),document.body.appendChild(l),l.click(),document.body.removeChild(l),window.URL.revokeObjectURL(s)}}))},ge=()=>{(0,s.C3)(a.subTaskId).then((e=>{te.value=e.data.task;const t=te.value.finishTime?u()(te.value.finishTime).diff(u()(te.value.execTime),"seconds"):u()().diff(u()(te.value.execTime),"seconds"),l=parseInt(t/3600),n=parseInt((t-3600*l)/60);ae.value=[{label:"属于任务：",value:a.taskInfo.taskName},{label:"创建时间：",value:te.value.createTime},{label:"源库名：",value:te.value.sourceDb},{label:"目的库名：",value:te.value.targetDb},{label:"执行开始时间：",value:te.value.execTime},{label:"已执行：",value:`${l?l+"小时":""} ${n?n+"分钟":""}`}];const s=e.data.fullProcess?.execResultDetail?JSON.parse(e.data.fullProcess?.execResultDetail):null;if(s){const e=["table","view","function","trigger","procedure"].map((e=>{const t={table:"表",view:"视图",function:"函数",trigger:"触发器",procedure:"存储过程"};return{key:e,name:t[e],status:"",msg:"",children:s[e].map((e=>({key:Math.random(),...e})))}}));oe.value=JSON.parse(JSON.stringify(e)),ue.value=e}2===te.value.migrationModelId&&(ce.value=e.data.statusRecords);const i=e.data.incrementalProcess?.execResultDetail?JSON.parse(e.data.incrementalProcess?.execResultDetail):null;i&&(le.value={createTime:e.data.incrementalProcess.createTime,...i}),re.value=e.data.logs.map((e=>{const t=e.substring(e.lastIndexOf("/")+1);return{name:t,url:e}}))}))};return(0,l.bv)((()=>{n.value=a.open})),(t,s)=>{const u=(0,l.up)("a-descriptions"),oe=(0,l.up)("a-progress"),ge=(0,l.up)("a-table-column"),we=(0,l.up)("icon-filter"),ke=(0,l.up)("a-switch"),fe=(0,l.up)("a-popover"),_e=(0,l.up)("icon-check-circle-fill"),be=(0,l.up)("icon-close-circle-fill"),ye=(0,l.up)("a-table"),We=(0,l.up)("icon-info-circle"),xe=(0,l.up)("a-card"),ze=(0,l.up)("a-step"),he=(0,l.up)("a-steps"),De=(0,l.up)("icon-download"),Te=(0,l.up)("a-button"),Ce=(0,l.up)("a-list-item"),je=(0,l.up)("a-list"),Ie=(0,l.up)("a-drawer");return(0,l.wg)(),(0,l.j4)(Ie,{visible:n.value,"onUpdate:visible":s[12]||(s[12]=e=>n.value=e),width:"50%",footer:!1},{title:(0,l.w5)((()=>[(0,l._)("div",c,[(0,l._)("div",r,[(0,l._)("span",{class:(0,l.C_)(["tab-item",1===i.value&&"tab-item-active"]),onClick:s[0]||(s[0]=e=>ie(1))},"子任务详情（ID："+(0,l.zw)(a.subTaskId)+"，"+(0,l.zw)(1===te.value.migrationModelId?"离线模式":"在线模式")+"）",3),(0,l._)("span",{class:(0,l.C_)(["tab-item",2===i.value&&"tab-item-active"]),onClick:s[1]||(s[1]=e=>ie(2))},"日志",2)]),(0,l._)("span",d,[(0,l.Uk)(" 状态： "),(0,l._)("b",null,(0,l.zw)(ne(te.value.execStatus)),1)])])])),default:(0,l.w5)((()=>[(0,l._)("div",p,[(0,l._)("div",m,[(0,l.Wm)(u,{data:ae.value,layout:"inline-horizontal",column:2,"table-layout":"fixed",bordered:""},null,8,["data"])]),1===i.value&&1===te.value.migrationModelId?((0,l.wg)(),(0,l.iD)("div",v,[g,(0,l.Wm)(oe,{size:"large",percent:100===te.value.execStatus?1:te.value.migrationProcess||0},null,8,["percent"])])):(0,l.kq)("",!0),1===i.value&&1===te.value.migrationModelId?((0,l.wg)(),(0,l.iD)("div",w,[(0,l.Wm)(ye,{data:ue.value,bordered:!1,stripe:"",pagination:!1,"default-expanded-keys":["table"]},{columns:(0,l.w5)((()=>[(0,l.Wm)(ge,{title:`源库：${te.value.sourceDb}`,"data-index":"name"},null,8,["title"]),(0,l.Wm)(ge,{title:`目的库：${te.value.targetDb}`,"data-index":"name"},null,8,["title"]),(0,l.Wm)(ge,{"data-index":"status",align:"center"},{title:(0,l.w5)((()=>[k,(0,l.Wm)(fe,{"content-class":"pop-con"},{content:(0,l.w5)((()=>[(0,l._)("div",_,[b,(0,l.Wm)(ke,{modelValue:de.value,"onUpdate:modelValue":s[2]||(s[2]=e=>de.value=e),size:"small",onChange:s[3]||(s[3]=e=>me(1))},null,8,["modelValue"])])])),default:(0,l.w5)((()=>[(0,l._)("span",f,[(0,l.Wm)(we)])])),_:1})])),cell:(0,l.w5)((({record:e})=>[1===e.status||2===e.status?((0,l.wg)(),(0,l.j4)(oe,{key:0,percent:e.percent},null,8,["percent"])):(0,l.kq)("",!0),3===e.status||4===e.status||5===e.status?((0,l.wg)(),(0,l.j4)(_e,{key:1,size:"16",style:{color:"#00B429"}})):(0,l.kq)("",!0),(0,l.Wm)(fe,{title:"错误详情",position:"tr"},{content:(0,l.w5)((()=>[(0,l._)("p",null,(0,l.zw)(e.msg),1)])),default:(0,l.w5)((()=>[6===e.status?((0,l.wg)(),(0,l.j4)(be,{key:0,size:"16",style:{color:"#FF7D01"}})):(0,l.kq)("",!0)])),_:2},1024)])),_:1}),(0,l.Wm)(ge,{"data-index":"status",align:"center"},{title:(0,l.w5)((()=>[y,(0,l.Wm)(fe,{"content-class":"pop-con"},{content:(0,l.w5)((()=>[(0,l._)("div",x,[z,(0,l.Wm)(ke,{modelValue:pe.value,"onUpdate:modelValue":s[4]||(s[4]=e=>pe.value=e),size:"small",onChange:s[5]||(s[5]=e=>me(2))},null,8,["modelValue"])])])),default:(0,l.w5)((()=>[(0,l._)("span",W,[(0,l.Wm)(we)])])),_:1})])),cell:(0,l.w5)((({record:e})=>[4===e.status?((0,l.wg)(),(0,l.j4)(oe,{key:0,percent:e.percent},null,8,["percent"])):(0,l.kq)("",!0),5===e.status?((0,l.wg)(),(0,l.j4)(_e,{key:1,size:"16",style:{color:"#00B429"}})):(0,l.kq)("",!0),(0,l.Wm)(fe,{title:"错误详情",position:"tr"},{content:(0,l.w5)((()=>[(0,l._)("p",null,(0,l.zw)(e.msg),1)])),default:(0,l.w5)((()=>[6===e.status?((0,l.wg)(),(0,l.j4)(be,{key:0,size:"16",style:{color:"#FF7D01"}})):(0,l.kq)("",!0)])),_:2},1024)])),_:1})])),_:1},8,["data"])])):(0,l.kq)("",!0),1===i.value&&2===te.value.migrationModelId?((0,l.wg)(),(0,l.iD)("div",h,[D,(0,l._)("div",T,[(0,l.Wm)(he,{"default-current":Object.keys(ce.value).length+1,type:"dot",direction:"vertical"},{default:(0,l.w5)((()=>[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(ce.value,((t,a)=>((0,l.wg)(),(0,l.j4)(ze,{key:a},{default:(0,l.w5)((()=>[(0,l._)("div",C,[(0,l._)("span",j,(0,l.zw)(se(a)),1),(0,l._)("span",I,"by "+(0,l.zw)(e.taskInfo.createUser)+", "+(0,l.zw)(te.value.execTime),1)]),(0,l.Wm)(xe,{hoverable:""},{default:(0,l.w5)((()=>[(0,l._)("div",S,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(t,(e=>((0,l.wg)(),(0,l.iD)("div",{key:e.id,class:"record-item"},[(0,l._)("div",P,[(0,l._)("span",U,[(0,l.Uk)((0,l.zw)(ne(e.statusId))+" ",1),2===e.statusId?((0,l.wg)(),(0,l.iD)("i",{key:0,onClick:s[6]||(s[6]=e=>o.value=!o.value)},(0,l.zw)(o.value?"收起":"查看"),1)):(0,l.kq)("",!0),8===e.statusId?((0,l.wg)(),(0,l.iD)("i",{key:1,onClick:s[7]||(s[7]=e=>ee.value=!ee.value)},(0,l.zw)(ee.value?"收起":"查看"),1)):(0,l.kq)("",!0)]),(0,l._)("span",q,(0,l.zw)(e.createTime),1)]),2===e.statusId&&o.value?((0,l.wg)(),(0,l.iD)("div",H,[(0,l.Wm)(ye,{data:ue.value,bordered:!1,stripe:"",pagination:!1,"default-expanded-keys":["table"]},{columns:(0,l.w5)((()=>[(0,l.Wm)(ge,{title:`源库：${te.value.sourceDb}`,"data-index":"name"},null,8,["title"]),(0,l.Wm)(ge,{title:`目的库：${te.value.targetDb}`,"data-index":"name"},null,8,["title"]),(0,l.Wm)(ge,{"data-index":"status",align:"center"},{title:(0,l.w5)((()=>[$,(0,l.Wm)(fe,{"content-class":"pop-con"},{content:(0,l.w5)((()=>[(0,l._)("div",N,[V,(0,l.Wm)(ke,{modelValue:de.value,"onUpdate:modelValue":s[8]||(s[8]=e=>de.value=e),size:"small",onChange:s[9]||(s[9]=e=>me(1))},null,8,["modelValue"])])])),default:(0,l.w5)((()=>[(0,l._)("span",Z,[(0,l.Wm)(we)])])),_:1})])),cell:(0,l.w5)((({record:e})=>[1===e.status||2===e.status?((0,l.wg)(),(0,l.j4)(oe,{key:0,percent:e.percent},null,8,["percent"])):(0,l.kq)("",!0),3===e.status||4===e.status||5===e.status?((0,l.wg)(),(0,l.j4)(_e,{key:1,size:"16",style:{color:"#00B429"}})):(0,l.kq)("",!0),(0,l.Wm)(fe,{title:"错误详情",position:"tr"},{content:(0,l.w5)((()=>[(0,l._)("p",null,(0,l.zw)(e.msg),1)])),default:(0,l.w5)((()=>[6===e.status?((0,l.wg)(),(0,l.j4)(be,{key:0,size:"16",style:{color:"#FF7D01"}})):(0,l.kq)("",!0)])),_:2},1024)])),_:1}),(0,l.Wm)(ge,{"data-index":"status",align:"center"},{title:(0,l.w5)((()=>[O,(0,l.Wm)(fe,{"content-class":"pop-con"},{content:(0,l.w5)((()=>[(0,l._)("div",M,[F,(0,l.Wm)(ke,{modelValue:pe.value,"onUpdate:modelValue":s[10]||(s[10]=e=>pe.value=e),size:"small",onChange:s[11]||(s[11]=e=>me(2))},null,8,["modelValue"])])])),default:(0,l.w5)((()=>[(0,l._)("span",R,[(0,l.Wm)(we)])])),_:1})])),cell:(0,l.w5)((({record:e})=>[4===e.status?((0,l.wg)(),(0,l.j4)(oe,{key:0,percent:e.percent},null,8,["percent"])):(0,l.kq)("",!0),5===e.status?((0,l.wg)(),(0,l.j4)(_e,{key:1,size:"16",style:{color:"#00B429"}})):(0,l.kq)("",!0),(0,l.Wm)(fe,{title:"错误详情",position:"tr"},{content:(0,l.w5)((()=>[(0,l._)("p",null,(0,l.zw)(e.msg),1)])),default:(0,l.w5)((()=>[6===e.status?((0,l.wg)(),(0,l.j4)(be,{key:0,size:"16",style:{color:"#FF7D01"}})):(0,l.kq)("",!0)])),_:2},1024)])),_:1})])),_:1},8,["data"])])):(0,l.kq)("",!0),8===e.statusId&&ee.value?((0,l.wg)(),(0,l.iD)("div",B,[(0,l._)("div",J,[(0,l._)("div",L,[(0,l._)("div",Y,[(0,l.Wm)(We,{size:"15"}),(0,l._)("span",null,"累计增量迁移对象数："+(0,l.zw)(le.value.count)+" 条",1)]),(0,l._)("div",A,[(0,l._)("span",null,(0,l.zw)(le.value.createTime),1)])]),(0,l._)("div",G,[(0,l._)("span",null,"增量抽取速度："+(0,l.zw)(le.value.sourceSpeed||0)+" 条/s",1)]),(0,l._)("div",K,[(0,l._)("span",null,"增量写入速度："+(0,l.zw)(le.value.sinkspeed||0)+" 条/s",1)]),(0,l._)("div",X,[(0,l._)("span",null,"剩余待写入数据："+(0,l.zw)(le.value.rest)+" 条",1)])])])):(0,l.kq)("",!0)])))),128))])])),_:2},1024)])),_:2},1024)))),128))])),_:1},8,["default-current"])])])):(0,l.kq)("",!0),2===i.value?((0,l.wg)(),(0,l.iD)("div",E,[(0,l.Wm)(je,null,{default:(0,l.w5)((()=>[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(re.value,(e=>((0,l.wg)(),(0,l.j4)(Ce,{key:e.url},{actions:(0,l.w5)((()=>[(0,l.Wm)(Te,{type:"text",size:"mini",onClick:t=>ve(e.url)},{icon:(0,l.w5)((()=>[(0,l.Wm)(De)])),default:(0,l.w5)((()=>[(0,l.Uk)(" 下载日志 ")])),_:2},1032,["onClick"])])),default:(0,l.w5)((()=>[(0,l._)("div",Q,(0,l.zw)(e.name),1)])),_:2},1024)))),128))])),_:1})])):(0,l.kq)("",!0)])])),_:1},8,["visible"])}}},te=a(3744);const ae=(0,te.Z)(ee,[["__scopeId","data-v-3591ec7b"]]);var le=ae,ne=a(6618);const se=e=>((0,l.dD)("data-v-1139d8c6"),e=e(),(0,l.Cn)(),e),ie={class:"detail-container"},ue={class:"title-con"},oe={class:"title-left"},ce={class:"title"},re={class:"task-status-con"},de=se((()=>(0,l._)("span",{class:"task-status-title"},"任务状态：",-1))),pe={class:"task-status"},me={class:"title-right"},ve={class:"desc-con"},ge={class:"progress-con"},we=se((()=>(0,l._)("span",{class:"progress-info"},"总进度",-1))),ke={class:"table-con"};var fe={__name:"index",setup(e){const t=(0,l.iH)({}),a=(0,l.iH)([]);let i=null,u=null;const o=(0,l.qj)({pageNum:1,pageSize:10}),c=(0,l.qj)({total:0,current:1,pageSize:10}),r=(0,l.iH)([]),d=e=>{const t={0:"未启动",1:"迁移中",2:"已完成"};return t[e]},p=e=>{const t={0:"未启动",1:"全量迁移开始",2:"全量迁移进行中",3:"全量迁移完成",4:"全量校验开始",5:"全量校验中",6:"全量检验完成",7:"增量迁移开始",8:"增量迁移进行中",9:"增量迁移已停止",10:"反向迁移开始",11:"反向迁移进行中",12:"反向迁移已停止",100:"迁移完成",500:"迁移失败",1e3:"等待资源中"};return t[e]},m=e=>{o.pageNum=e,c.current=e,z()},v=(0,l.iH)(!1),g=(0,l.iH)(),w=(0,l.iH)(1),k=e=>{v.value=!0,g.value=e.id,w.value=1},f=e=>{v.value=!0,g.value=e.id,w.value=2},_=async()=>{await(0,ne.sT)(t.value.id),n.Z.success("Stop success"),h(),z()},b=e=>{(0,s.Pj)(e.id).then((()=>{n.Z.success("Stop success"),x(),z()}))},y=e=>{(0,s.mX)(e.id).then((()=>{n.Z.success("Stop success"),x(),z()}))},W=e=>{"3.0"!==e.targetDbVersion.substring(0,3)?(0,s.cg)(e.id).then((()=>{n.Z.success("Start success"),x(),z()})):n.Z.error(`${e.targetDbVersion} version of openGauss does not support reverse migration`)},x=()=>{const e=window.$wujie?.props.data.id;(0,s.mY)(e).then((e=>{console.log(e)}))},z=()=>{u&&clearTimeout(u);const e=window.$wujie?.props.data.id;(0,s.GA)(e,{...o}).then((e=>{r.value=e.rows,c.total=e.total,2!==t.value.execStatus&&(u=setTimeout((()=>{z()}),5e3))})).catch((()=>{u&&clearTimeout(u),u=null}))},h=()=>{i&&clearTimeout(i);const e=window.$wujie?.props.data.id;(0,s._A)(e).then((e=>{t.value=e.data.task;const l=e.data.task,n=e.data.counts,s=e.data.hosts;a.value=[{label:"创建人：",value:l.createUser},{label:"子任务数量：",value:n["1"]+n["2"]},{label:"分配执行机器：",value:`${s.length}台（${s.map((e=>e.hostName))}）`},{label:"创建时间：",value:l.createTime},{label:"子任务数量（离线模式）：",value:n["1"],span:2},{label:"执行时间：",value:l.execTime},{label:"子任务数量（在线模式）：",value:n["2"],span:2}],2!==t.value.execStatus&&(i=setTimeout((()=>{h()}),5e3))})).catch((()=>{i&&clearTimeout(i),i=null}))};return(0,l.bv)((()=>{h(),z(),setTimeout((()=>{x()}),3e3)})),(0,l.Jd)((()=>{i&&clearTimeout(i),u&&clearTimeout(u)})),(e,n)=>{const s=(0,l.up)("a-button"),i=(0,l.up)("a-divider"),u=(0,l.up)("a-descriptions"),o=(0,l.up)("a-progress"),z=(0,l.up)("icon-refresh"),h=(0,l.up)("a-table-column"),D=(0,l.up)("icon-eye"),T=(0,l.up)("icon-pause"),C=(0,l.up)("icon-play-arrow"),j=(0,l.up)("icon-stop"),I=(0,l.up)("icon-file"),S=(0,l.up)("a-table");return(0,l.wg)(),(0,l.iD)("div",ie,[(0,l._)("div",ue,[(0,l._)("div",oe,[(0,l._)("div",ce,"数据迁移任务详情（"+(0,l.zw)(t.value.taskName)+"）",1),(0,l._)("div",re,[de,(0,l._)("span",pe,(0,l.zw)(d(t.value.execStatus)),1)])]),(0,l._)("div",me,[1===t.value.execStatus?((0,l.wg)(),(0,l.j4)(s,{key:0,type:"primary",onClick:_},{default:(0,l.w5)((()=>[(0,l.Uk)("停止")])),_:1})):(0,l.kq)("",!0)])]),(0,l.Wm)(i),(0,l._)("div",ve,[(0,l.Wm)(u,{data:a.value,layout:"inline-horizontal","table-layout":"fixed",bordered:""},null,8,["data"])]),(0,l._)("div",ge,[we,(0,l.Wm)(o,{size:"large",percent:2===t.value.execStatus?1:t.value.execProgress||0},null,8,["percent"]),(0,l.Wm)(s,{type:"text",onClick:x},{icon:(0,l.w5)((()=>[(0,l.Wm)(z)])),default:(0,l.w5)((()=>[(0,l.Uk)("刷新")])),_:1})]),(0,l._)("div",ke,[(0,l.Wm)(S,{data:r.value,bordered:!1,stripe:"",pagination:c,onPageChange:m},{columns:(0,l.w5)((()=>[(0,l.Wm)(h,{title:"子任务ID","data-index":"id"}),(0,l.Wm)(h,{title:"源库名","data-index":"sourceDb"}),(0,l.Wm)(h,{title:"目的库名","data-index":"targetDb"}),(0,l.Wm)(h,{title:"迁移过程模式"},{cell:(0,l.w5)((({record:e})=>[(0,l.Uk)((0,l.zw)(1===e.migrationModelId?"离线模式":"在线模式"),1)])),_:1}),(0,l.Wm)(h,{title:"执行机器"},{cell:(0,l.w5)((({record:e})=>[(0,l.Uk)((0,l.zw)(e.runHost)+"（"+(0,l.zw)(e.runHostname)+"） ",1)])),_:1}),(0,l.Wm)(h,{title:"当前状态"},{cell:(0,l.w5)((({record:e})=>[(0,l.Uk)((0,l.zw)(p(e.execStatus)),1)])),_:1}),(0,l.Wm)(h,{title:"操作",align:"center",width:340,fixed:"right"},{cell:(0,l.w5)((({record:e})=>[(0,l.Wm)(s,{size:"mini",type:"text",onClick:t=>k(e)},{icon:(0,l.w5)((()=>[(0,l.Wm)(D)])),default:(0,l.w5)((()=>[(0,l.Uk)("详情")])),_:2},1032,["onClick"]),2===e.migrationModelId&&8===e.execStatus?((0,l.wg)(),(0,l.j4)(s,{key:0,size:"mini",type:"text",onClick:t=>y(e)},{icon:(0,l.w5)((()=>[(0,l.Wm)(T)])),default:(0,l.w5)((()=>[(0,l.Uk)("停止增量")])),_:2},1032,["onClick"])):(0,l.kq)("",!0),2!==e.migrationModelId||3!==e.execStatus&&9!==e.execStatus?(0,l.kq)("",!0):((0,l.wg)(),(0,l.j4)(s,{key:1,size:"mini",type:"text",onClick:t=>W(e)},{icon:(0,l.w5)((()=>[(0,l.Wm)(C)])),default:(0,l.w5)((()=>[(0,l.Uk)("启动反向")])),_:2},1032,["onClick"])),100!==e.execStatus?((0,l.wg)(),(0,l.j4)(s,{key:2,size:"mini",type:"text",onClick:t=>b(e)},{icon:(0,l.w5)((()=>[(0,l.Wm)(j)])),default:(0,l.w5)((()=>[(0,l.Uk)("结束迁移")])),_:2},1032,["onClick"])):(0,l.kq)("",!0),(0,l.Wm)(s,{size:"mini",type:"text",onClick:t=>f(e)},{icon:(0,l.w5)((()=>[(0,l.Wm)(I)])),default:(0,l.w5)((()=>[(0,l.Uk)("日志")])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data","pagination"])]),(0,l.Wm)(le,{open:v.value,"onUpdate:open":n[0]||(n[0]=e=>v.value=e),"task-info":t.value,"sub-task-id":g.value,tab:w.value},null,8,["open","task-info","sub-task-id","tab"])])}}};const _e=(0,te.Z)(fe,[["__scopeId","data-v-1139d8c6"]]);var be=_e}}]);
//# sourceMappingURL=834.017fb98a.js.map