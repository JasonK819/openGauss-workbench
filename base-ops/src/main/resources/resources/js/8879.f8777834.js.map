{"version":3,"file":"js/8879.f8777834.js","mappings":"4LAGA,MAAMA,EAAeC,KAAMC,EAAAA,EAAAA,aAAa,mBAAmBD,EAAEA,KAAIE,EAAAA,EAAAA,cAAcF,GACzEG,EAAa,CAAEC,MAAO,iBACtBC,EAAa,CACjBC,IAAK,EACLF,MAAO,0BAEHG,EAA2BR,GAAa,KAAmBS,EAAAA,EAAAA,oBAAoB,MAAO,CAAEJ,MAAO,SAAW,QAAS,KACnHK,EAAa,CAAEL,MAAO,YACtBM,GAA0BC,EAAAA,EAAAA,iBAAiB,UAC3CC,GAA0BD,EAAAA,EAAAA,iBAAiB,UAC3CE,EAAa,CACjBP,IAAK,EACLF,MAAO,YAEHU,EAAa,CAAEV,MAAO,oBACtBW,EAAa,CAAEX,MAAO,mBACtBY,EAAc,CAAEZ,MAAO,yBACvBa,EAAc,CAAEb,MAAO,iBACvBc,EAA4BnB,GAAa,KAAmBS,EAAAA,EAAAA,oBAAoB,MAAO,CAC3FW,GAAI,QACJf,MAAO,SACN,MAAO,KAOV,IAAKgB,GAAL,SAAKA,GACHA,EAAAA,EAAAA,cAAaC,QAAQ,IAAE,aACvBD,EAAAA,EAAAA,UAASC,OAAO,IAAE,SAClBD,EAAAA,EAAAA,QAAOC,OAAO,IAAE,MACjB,EAJD,CAAKD,IAAAA,EAAa,KAMlB,OAA4BE,EAAAA,EAAAA,iBAAiB,CAC3CC,MAAMC,GAER,MAAMC,GAAYC,EAAAA,EAAAA,KAAYN,EAAcO,YAEtCC,GAAcC,EAAAA,EAAAA,QAAY,WAE1BC,GAAOC,EAAAA,EAAAA,UAAmB,CAC9BC,OAAQ,EACRC,gBAAiB,KAGnBC,EAAAA,EAAAA,YAAU,KACRN,EAAYO,gBAAe,GAC3BP,EAAYQ,gBAAe,GAC3B,MAAMC,EAAOC,IACbC,EAASF,GACTG,GAAc,IAGhB,MAAMC,GAAmBf,EAAAA,EAAAA,KAAS,MAE5Bc,EAAe,KACnBC,EAAiBC,MAAQC,aAAY,KACnCb,EAAKG,iBAAmBZ,OAAOS,EAAKG,iBAAmB,IAAKW,QAAQ,GAC/B,IAAjCvB,OAAOS,EAAKG,mBACdR,EAAUiB,MAAQtB,EAAcyB,OAChCC,cAAcL,EAAiBC,O,GAEhC,IAAI,EAIHJ,EAAa,IACV,IAAIS,EAAAA,SAAS,CAClBC,SAAU,GACVC,KAAM,GACNC,KAAM,IACNC,aAAa,EACbC,YAAY,EACZC,cAAc,EACdC,YAAa,YACbC,MAAO,CACLC,WAAY,WAKZjB,EAAW,CAACF,EAAgBoB,KAChCpB,EAAKqB,KAAKC,SAASC,eAAe,UAClCvB,EAAKwB,QACLxB,EAAKyB,QACLzB,EAAK0B,MAAM,kBAAwB,EAI/BC,EAAS,KACbC,OAAOC,QAAQC,MAAMC,QAAQC,KAAK,CAChCC,KAAM,aACN,EAIJ,MAAO,CAACC,EAAUC,KAChB,MAAMC,GAAsBC,EAAAA,EAAAA,kBAAkB,YACxCC,GAAsBD,EAAAA,EAAAA,kBAAkB,YACxCE,GAAwBF,EAAAA,EAAAA,kBAAkB,cAEhD,OAAQG,EAAAA,EAAAA,cAAcC,EAAAA,EAAAA,oBAAoB,MAAO3E,EAAY,CAC1DsB,EAAUiB,QAAUtB,EAAcyB,SAC9BgC,EAAAA,EAAAA,cAAcC,EAAAA,EAAAA,oBAAoB,MAAOzE,EAAY,EACpD0E,EAAAA,EAAAA,aAAaN,EAAqB,CAChC,aAAc,sBACdrE,MAAO,iBAETG,GACAC,EAAAA,EAAAA,oBAAoB,MAAOC,EAAY,EACrCsE,EAAAA,EAAAA,aAAaJ,EAAqB,CAChCK,KAAM,UACN5E,MAAO,KACP6E,QAASjB,GACR,CACDkB,SAASC,EAAAA,EAAAA,UAAS,IAAM,CACtBzE,KAEF0E,EAAG,KAELL,EAAAA,EAAAA,aAAaJ,EAAqB,CAChCK,KAAM,UACNC,QAAST,EAAO,KAAOA,EAAO,GAAMa,GAAiBd,EAAKe,QAAQC,KAAK,CAAEjB,KAAM,eAC9E,CACDY,SAASC,EAAAA,EAAAA,UAAS,IAAM,CACtBvE,KAEFwE,EAAG,WAIRP,EAAAA,EAAAA,cAAcC,EAAAA,EAAAA,oBAAoB,MAAOjE,EAAY,EACpDL,EAAAA,EAAAA,oBAAoB,MAAOM,EAAY,EACrCN,EAAAA,EAAAA,oBAAoB,MAAOO,GAAYyE,EAAAA,EAAAA,iBAAiBjB,EAAKkB,GAAG,qCAAsC,IACtGjF,EAAAA,EAAAA,oBAAoB,MAAOQ,EAAa,EACtCR,EAAAA,EAAAA,oBAAoB,MAAOS,EAAa,EACtC8D,EAAAA,EAAAA,aAAaH,EAAuB,CAClCc,MAA8B,KAAvBC,EAAAA,EAAAA,OAAO7D,GAAME,MAAc,QAAU,MAC5C,eAAgB,GAChB4D,SAASD,EAAAA,EAAAA,OAAO7D,GAAMG,iBACrB,KAAM,EAAG,CAAC,QAAS,kBAI5Bf,MAEN,CAEJ,I,WClJA,MAAM2E,GAA2B,OAAgB,EAAQ,CAAC,CAAC,YAAY,qBAEvE,O","sources":["webpack://web-ui/./src/views/ops/install/components/openLookeng/ExeInstall.vue?fbbc","webpack://web-ui/./src/views/ops/install/components/openLookeng/ExeInstall.vue"],"sourcesContent":["import { defineComponent as _defineComponent } from 'vue'\nimport { resolveComponent as _resolveComponent, createVNode as _createVNode, createElementVNode as _createElementVNode, createTextVNode as _createTextVNode, withCtx as _withCtx, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, toDisplayString as _toDisplayString, unref as _unref, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-cf99b15c\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { class: \"exe-install-c\" }\nconst _hoisted_2 = {\n  key: 0,\n  class: \"flex-col full-w full-h\"\n}\nconst _hoisted_3 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"mb-lg\" }, \"安装成功\", -1))\nconst _hoisted_4 = { class: \"flex-row\" }\nconst _hoisted_5 = /*#__PURE__*/_createTextVNode(\" 返回首页 \")\nconst _hoisted_6 = /*#__PURE__*/_createTextVNode(\" 集群运维 \")\nconst _hoisted_7 = {\n  key: 1,\n  class: \"flex-col\"\n}\nconst _hoisted_8 = { class: \"install-doing mb\" }\nconst _hoisted_9 = { class: \"ft-m ft-b mb-lg\" }\nconst _hoisted_10 = { class: \"flex-col-start full-w\" }\nconst _hoisted_11 = { class: \"progress-c mb\" }\nconst _hoisted_12 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", {\n  id: \"xterm\",\n  class: \"xterm\"\n}, null, -1))\n\nimport { KeyValue } from '@/types/global';\nimport { ref, reactive, onMounted, inject } from 'vue';\nimport 'xterm/css/xterm.css'\nimport { Terminal } from 'xterm'\n\nenum exeResultEnum {\n  UN_INSTALL = Number(-1),\n  SUCESS = Number(1),\n  FAIL = Number(0)\n}\n\nexport default /*#__PURE__*/_defineComponent({\n  setup(__props) {\n\nconst exeResult = ref<number>(exeResultEnum.UN_INSTALL)\n\nconst loadingFunc = inject<any>('loading')\n\nconst data = reactive<KeyValue>({\n  state: -1, // -1 un install  0 installing  1 success  2 fail\n  installProgress: 0,\n})\n\nonMounted(() => {\n  loadingFunc.setBackBtnShow(false)\n  loadingFunc.setNextBtnShow(false)\n  const term = getTermObj()\n  initTerm(term)\n  autoProgress()\n})\n\nconst progressInterval = ref<any>(null)\n\nconst autoProgress = () => {\n  progressInterval.value = setInterval(() => {\n    data.installProgress = (Number(data.installProgress) + 0.1).toFixed(2)\n    if (Number(data.installProgress) === 1) {\n      exeResult.value = exeResultEnum.SUCESS\n      clearInterval(progressInterval.value)\n    }\n  }, 600)\n}\n\n\nconst getTermObj = (): Terminal => {\n  return new Terminal({\n    fontSize: 14,\n    rows: 28,\n    cols: 100,\n    cursorBlink: true,\n    convertEol: true,\n    disableStdin: false,\n    cursorStyle: 'underline',\n    theme: {\n      background: 'black'\n    }\n  })\n}\n\nconst initTerm = (term: Terminal, ws?: WebSocket | undefined) => {\n  term.open(document.getElementById('xterm') as HTMLElement)\n  term.clear()\n  term.focus()\n  term.write('\\r\\n\\x1b[33m$\\x1b[0m ')\n}\n\n\nconst goHome = () => {\n  window.$wujie?.props.methods.jump({\n    name: 'Dashboard'\n  })\n}\n\n\nreturn (_ctx: any,_cache: any) => {\n  const _component_svg_icon = _resolveComponent(\"svg-icon\")!\n  const _component_a_button = _resolveComponent(\"a-button\")!\n  const _component_a_progress = _resolveComponent(\"a-progress\")!\n\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    (exeResult.value === exeResultEnum.SUCESS)\n      ? (_openBlock(), _createElementBlock(\"div\", _hoisted_2, [\n          _createVNode(_component_svg_icon, {\n            \"icon-class\": \"ops-install-success\",\n            class: \"icon-size mb\"\n          }),\n          _hoisted_3,\n          _createElementVNode(\"div\", _hoisted_4, [\n            _createVNode(_component_a_button, {\n              type: \"outline\",\n              class: \"mr\",\n              onClick: goHome\n            }, {\n              default: _withCtx(() => [\n                _hoisted_5\n              ]),\n              _: 1\n            }),\n            _createVNode(_component_a_button, {\n              type: \"primary\",\n              onClick: _cache[0] || (_cache[0] = ($event: any) => (_ctx.$router.push({ name: 'DailyOps' })))\n            }, {\n              default: _withCtx(() => [\n                _hoisted_6\n              ]),\n              _: 1\n            })\n          ])\n        ]))\n      : (_openBlock(), _createElementBlock(\"div\", _hoisted_7, [\n          _createElementVNode(\"div\", _hoisted_8, [\n            _createElementVNode(\"div\", _hoisted_9, _toDisplayString(_ctx.$t('simpleInstall.index.5mpn813guxc0')), 1),\n            _createElementVNode(\"div\", _hoisted_10, [\n              _createElementVNode(\"div\", _hoisted_11, [\n                _createVNode(_component_a_progress, {\n                  color: _unref(data).state === 1 ? 'green' : 'red',\n                  \"stroke-width\": 12,\n                  percent: _unref(data).installProgress\n                }, null, 8, [\"color\", \"percent\"])\n              ])\n            ])\n          ]),\n          _hoisted_12\n        ]))\n  ]))\n}\n}\n\n})","import script from \"./ExeInstall.vue?vue&type=script&lang=ts&setup=true\"\nexport * from \"./ExeInstall.vue?vue&type=script&lang=ts&setup=true\"\n\nimport \"./ExeInstall.vue?vue&type=style&index=0&id=cf99b15c&lang=less&scoped=true\"\n\nimport exportComponent from \"/Users/xielibo/ideawork/huawei/base-ops/web-ui/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-cf99b15c\"]])\n\nexport default __exports__"],"names":["_withScopeId","n","_pushScopeId","_popScopeId","_hoisted_1","class","_hoisted_2","key","_hoisted_3","_createElementVNode","_hoisted_4","_hoisted_5","_createTextVNode","_hoisted_6","_hoisted_7","_hoisted_8","_hoisted_9","_hoisted_10","_hoisted_11","_hoisted_12","id","exeResultEnum","Number","_defineComponent","setup","__props","exeResult","ref","UN_INSTALL","loadingFunc","inject","data","reactive","state","installProgress","onMounted","setBackBtnShow","setNextBtnShow","term","getTermObj","initTerm","autoProgress","progressInterval","value","setInterval","toFixed","SUCESS","clearInterval","Terminal","fontSize","rows","cols","cursorBlink","convertEol","disableStdin","cursorStyle","theme","background","ws","open","document","getElementById","clear","focus","write","goHome","window","$wujie","props","methods","jump","name","_ctx","_cache","_component_svg_icon","_resolveComponent","_component_a_button","_component_a_progress","_openBlock","_createElementBlock","_createVNode","type","onClick","default","_withCtx","_","$event","$router","push","_toDisplayString","$t","color","_unref","percent","__exports__"],"sourceRoot":""}