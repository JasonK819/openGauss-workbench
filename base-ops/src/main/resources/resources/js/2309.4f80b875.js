(self["webpackChunkweb_ui"]=self["webpackChunkweb_ui"]||[]).push([[2309],{33781:function(e,t,o){"use strict";o.d(t,{Z:function(){return i}});var n=o(47327);class r{constructor(){(0,n.Z)(this,"heartTimeOut",void 0),(0,n.Z)(this,"ServerHeartTimeOut",void 0),(0,n.Z)(this,"timeout",5e3)}reset(){clearTimeout(this.heartTimeOut),clearTimeout(this.ServerHeartTimeOut)}start(e){this.heartTimeOut=setTimeout((t=>{e(t),this.ServerHeartTimeOut=setTimeout((t=>{e(t),this.reset(),this.start(e)}),this.timeout)}),this.timeout)}}class i extends r{constructor(e){super(),(0,n.Z)(this,"ws",void 0),(0,n.Z)(this,"reconnectTimer",0),(0,n.Z)(this,"reconnectCount",10),(0,n.Z)(this,"options",{url:null,heartTime:5e3,heartMsg:"ping",isReconnect:!0,isRestory:!1,reconnectTime:5e3,reconnectCount:5,openCb:e=>{console.log("connect success callback::::",e)},closeCb:e=>{console.log("close callback::::",e)},messageCb:e=>{console.log("message callback::::",e)},errorCb:e=>{console.log("error callback::::",e)}}),Object.assign(this.options,e),this.create()}create(){if(!("WebSocket"in window))throw new Error("The current browser does not support it and cannot be used");if(!this.options.url)throw new Error("The address does not exist, and the channel cannot be established");let e;console.log("get locaion host: ",window.location.host),e=`ws://${window.location.host}/ws/base-ops/${this.options.url}`,this.ws=new WebSocket(e),this.onopen(this.options.openCb),this.onclose(this.options.closeCb),this.onmessage(this.options.messageCb)}onopen(e){this.ws.onopen=t=>{"function"===typeof e?e(t):"function"===typeof this.options.openCb&&this.options.openCb(t)}}onclose(e){this.ws.onclose=t=>{"function"===typeof e?e(t):"function"===typeof this.options.closeCb&&this.options.closeCb(t)}}onerror(e){this.ws.onerror=t=>{"function"===typeof e?e(t):"function"===typeof this.options.errorCb&&this.options.errorCb(t)}}onmessage(e){this.ws.onmessage=t=>{const o=t.data;"function"===typeof e&&e(o)}}send(e){console.log("doNothing",e)}destroy(){super.reset(),clearTimeout(this.reconnectTimer),this.options.isRestory=!0,this.ws.close()}}},17702:function(e,t,o){"use strict";o.r(t),o.d(t,{default:function(){return C}});o(57658);var n=o(70821),r=o(39518),i=o(40225),s=o(57330);const a=e=>((0,n.pushScopeId)("data-v-3392051b"),e=e(),(0,n.popScopeId)(),e),c={class:"exe-install-c"},l={key:0,class:"flex-col full-w full-h"},u={class:"mb-xlg"},p={class:"install-connect-c flex-col mb-lg"},d={class:"ft-b mb"},m={class:"mb"},f=a((()=>(0,n.createElementVNode)("span",{class:"content"},"gaussdb",-1))),h={class:"content"},g={class:"flex-row"},b={key:1,class:"flex-col full-w full-h ft-lg"},y={class:"flex-row"};var v;(function(e){e[e["UN_INSTALL"]=Number(-1)]="UN_INSTALL",e[e["SUCESS"]=Number(1)]="SUCESS",e[e["FAIL"]=Number(0)]="FAIL"})(v||(v={}));var _=(0,n.defineComponent)({setup(e,{expose:t}){const{t:o}=(0,s.QT)(),a=(0,i.BH)(),_=(0,n.ref)(v.UN_INSTALL),w=(0,n.ref)(!1),S=(0,n.ref)(""),C=(0,n.inject)("loading");(0,n.onMounted)((()=>{C.setNextBtnShow(!1),x()}));const x=()=>{w.value=!0;const e=Object.assign({},a.getInstallConfig);e.minimalistInstallConfig=a.getMiniConfig,e.liteInstallConfig=a.getLiteConfig,e.enterpriseInstallConfig=a.getEnterpriseConfig,C.toLoading(),(0,r.tA)(e).then((e=>{200===Number(e.code)?(C.setBackBtnShow(!1),C.setNextBtnShow(!1),_.value=v.SUCESS):(w.value=!1,C.cancelLoading(),_.value=v.FAIL,S.value=e.msg)})).catch((e=>{w.value=!1,C.cancelLoading(),_.value=v.FAIL,console.log(o("components.ExeImport.5mpmzg3ztak0"),e),S.value=e.toString()})).finally((()=>{C.cancelLoading(),w.value=!1}))},k=async()=>!0;return t({beforeConfirm:k}),(e,t)=>{const o=(0,n.resolveComponent)("svg-icon"),r=(0,n.resolveComponent)("a-button"),i=(0,n.resolveComponent)("icon-close-circle-fill"),s=(0,n.resolveComponent)("a-spin");return(0,n.openBlock)(),(0,n.createElementBlock)("div",c,[_.value===v.SUCESS?((0,n.openBlock)(),(0,n.createElementBlock)("div",l,[(0,n.createVNode)(o,{"icon-class":"ops-install-success",class:"icon-size mb"}),(0,n.createElementVNode)("div",u,(0,n.toDisplayString)(e.$t("components.ExeImport.5mpmzg3zqu80")),1),(0,n.createElementVNode)("div",p,[(0,n.createElementVNode)("div",d,(0,n.toDisplayString)(e.$t("components.ExeImport.5mpmzg3zrrw0")),1),(0,n.createElementVNode)("div",m,[(0,n.createTextVNode)((0,n.toDisplayString)(e.$t("components.ExeImport.5mpmzg3zs0o0"))+": ",1),f]),(0,n.createElementVNode)("div",null,[(0,n.createTextVNode)((0,n.toDisplayString)(e.$t("components.ExeImport.5mpmzg3zs6w0"))+": ",1),(0,n.createElementVNode)("span",h,(0,n.toDisplayString)((0,n.unref)(a).getMiniConfig.databasePassword),1)])]),(0,n.createElementVNode)("div",g,[(0,n.createVNode)(r,{type:"outline",class:"mr",onClick:t[0]||(t[0]=t=>e.$router.push({name:"Dashboard"}))},{default:(0,n.withCtx)((()=>[(0,n.createTextVNode)((0,n.toDisplayString)(e.$t("components.ExeImport.5mpmzg3zseo0")),1)])),_:1}),(0,n.createVNode)(r,{type:"primary",onClick:t[1]||(t[1]=t=>e.$router.push({name:"DailyOps"}))},{default:(0,n.withCtx)((()=>[(0,n.createTextVNode)((0,n.toDisplayString)(e.$t("components.ExeImport.5mpmzg3zskw0")),1)])),_:1})])])):(0,n.createCommentVNode)("",!0),_.value===v.FAIL?((0,n.openBlock)(),(0,n.createElementBlock)("div",b,[(0,n.createElementVNode)("div",y,[(0,n.createVNode)(i,{class:"mr",style:{color:"red",width:"24px",height:"24px"}}),(0,n.createTextVNode)(" "+(0,n.toDisplayString)(e.$t("components.ExeImport.5mpmzg3zsu80"))+" "+(0,n.toDisplayString)(S.value),1)])])):(0,n.createCommentVNode)("",!0),w.value?((0,n.openBlock)(),(0,n.createBlock)(s,{key:2,class:"flex-col full-w full-h",loading:w.value,tip:e.$t("components.ExeImport.5mpmzg3zt0g0")},null,8,["loading","tip"])):(0,n.createCommentVNode)("",!0)])}}}),w=o(83744);const S=(0,w.Z)(_,[["__scopeId","data-v-3392051b"]]);var C=S},3334:function(e){!function(t,o){e.exports=o()}(window,(function(){return function(e){var t={};function o(n){if(t[n])return t[n].exports;var r=t[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,o),r.l=!0,r.exports}return o.m=e,o.c=t,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)o.d(n,r,function(t){return e[t]}.bind(null,r));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=0)}([function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AttachAddon=void 0;var n=function(){function e(e,t){this._disposables=[],this._socket=e,this._socket.binaryType="arraybuffer",this._bidirectional=!t||!1!==t.bidirectional}return e.prototype.activate=function(e){var t=this;this._disposables.push(r(this._socket,"message",(function(t){var o=t.data;e.write("string"==typeof o?o:new Uint8Array(o))}))),this._bidirectional&&(this._disposables.push(e.onData((function(e){return t._sendData(e)}))),this._disposables.push(e.onBinary((function(e){return t._sendBinary(e)})))),this._disposables.push(r(this._socket,"close",(function(){return t.dispose()}))),this._disposables.push(r(this._socket,"error",(function(){return t.dispose()})))},e.prototype.dispose=function(){this._disposables.forEach((function(e){return e.dispose()}))},e.prototype._sendData=function(e){1===this._socket.readyState&&this._socket.send(e)},e.prototype._sendBinary=function(e){if(1===this._socket.readyState){for(var t=new Uint8Array(e.length),o=0;o<e.length;++o)t[o]=255&e.charCodeAt(o);this._socket.send(t)}},e}();function r(e,t,o){return e.addEventListener(t,o),{dispose:function(){o&&e.removeEventListener(t,o)}}}t.AttachAddon=n}])}))},12617:function(e){!function(t,o){e.exports=o()}(self,(function(){return(()=>{"use strict";var e={775:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.FitAddon=void 0;var o=function(){function e(){}return e.prototype.activate=function(e){this._terminal=e},e.prototype.dispose=function(){},e.prototype.fit=function(){var e=this.proposeDimensions();if(e&&this._terminal){var t=this._terminal._core;this._terminal.rows===e.rows&&this._terminal.cols===e.cols||(t._renderService.clear(),this._terminal.resize(e.cols,e.rows))}},e.prototype.proposeDimensions=function(){if(this._terminal&&this._terminal.element&&this._terminal.element.parentElement){var e=this._terminal._core;if(0!==e._renderService.dimensions.actualCellWidth&&0!==e._renderService.dimensions.actualCellHeight){var t=window.getComputedStyle(this._terminal.element.parentElement),o=parseInt(t.getPropertyValue("height")),n=Math.max(0,parseInt(t.getPropertyValue("width"))),r=window.getComputedStyle(this._terminal.element),i=o-(parseInt(r.getPropertyValue("padding-top"))+parseInt(r.getPropertyValue("padding-bottom"))),s=n-(parseInt(r.getPropertyValue("padding-right"))+parseInt(r.getPropertyValue("padding-left")))-e.viewport.scrollBarWidth;return{cols:Math.max(2,Math.floor(s/e._renderService.dimensions.actualCellWidth)),rows:Math.max(1,Math.floor(i/e._renderService.dimensions.actualCellHeight))}}}},e}();t.FitAddon=o}},t={};return function o(n){if(t[n])return t[n].exports;var r=t[n]={exports:{}};return e[n](r,r.exports,o),r.exports}(775)})()}))},47327:function(e,t,o){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function r(e,t){if("object"!==n(e)||null===e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var r=o.call(e,t||"default");if("object"!==n(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function i(e){var t=r(e,"string");return"symbol"===n(t)?t:String(t)}function s(e,t,o){return t=i(t),t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}o.d(t,{Z:function(){return s}})}}]);
//# sourceMappingURL=2309.4f80b875.js.map