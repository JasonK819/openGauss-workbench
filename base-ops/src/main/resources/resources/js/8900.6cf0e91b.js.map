{"version":3,"file":"js/8900.6cf0e91b.js","mappings":"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","sources":["webpack://web-ui/./src/api/ops/index.ts","webpack://web-ui/./node_modules/vue-loader/dist/exportHelper.js","webpack://web-ui/./src/views/ops/install/components/OfflineInstall.vue?85a0","webpack://web-ui/./src/views/ops/install/components/OfflineInstall.vue"],"sourcesContent":["import axios from 'axios'\nimport { KeyValue } from '@/types/global'\nimport { downloadPackage, SSHBody } from '@/types/ops/install'\n// import { hostData, hostUserData } from '@/types/resource/host'\n\n// get Key\nexport const getEntryKey = () => {\n  return axios.get('encryption/getKey')\n}\n\nexport const download = (data: downloadPackage) => {\n  return axios.post(`opsCluster/download`, data ? data : {})\n}\n\nexport const getEnvMonitorData = (hostId: string) => {\n  return axios.get(`opsCluster/env/${hostId}`)\n}\n\nexport const installOpenGauss = (data: KeyValue) => {\n  return axios.post('opsCluster/install', data)\n}\n\nexport const importOpenGauss = (data: KeyValue) => {\n  return axios.post('opsCluster/import', data)\n}\n\nexport const quickInstall = (data: KeyValue) => {\n  return axios.post('opsCluster/quickInstall', data)\n}\n\n// one check\nexport const clusterCheck = (data: KeyValue) => {\n  return axios.get('opsCluster/check', {\n    params: data\n  })\n}\n\nexport const uninstallOpenGauss = (data: KeyValue) => {\n  return axios.post('opsCluster/uninstall', data)\n}\n\nexport const hasName = (data: KeyValue) => {\n  return axios.get('opsCluster/hasName', {\n    params: data\n  })\n}\n\nexport const clusterList = () => {\n  return axios.get('opsCluster/listCluster')\n}\n\nexport const getSummary = () => {\n  return axios.get('opsCluster/summary')\n}\n\nexport const openSSH = (data: SSHBody) => {\n  return axios.post('opsCluster/ssh', data)\n}\n\nexport const clusterMonitor = (data: KeyValue) => {\n  return axios.get('opsCluster/monitor', {\n    params: data\n  })\n}\n\nexport const start = (data: KeyValue) => {\n  return axios.post('opsCluster/start', data)\n}\n\nexport const stop = (data: KeyValue) => {\n  return axios.post('opsCluster/stop', data)\n}\n\nexport const restart = (data: KeyValue) => {\n  return axios.post('opsCluster/restart', data)\n}\n\nexport const getHostByClusterId = (data: KeyValue) => {\n  return axios.get('opsCluster/listHost', {\n    params: data\n  })\n}\n\n// host interface\nexport const listInstallPackage = (path?: string) => {\n  return axios.get(path ? `opsCluster/listInstallPackage?path=${path}` : 'opsCluster/listInstallPackage')\n}\n\n// page\nexport const hostPage = (query: any) => {\n  return axios.get('host/page', {\n    params: query\n  })\n}\n\nexport const hostListAll = () => {\n  return axios.get('host/listAll')\n}\n\nexport const addHost = (data: KeyValue) => {\n  return axios.post('host', data)\n}\n\nexport const editHost = (hostId: string, data: KeyValue) => {\n  return axios.put(`host/${hostId}`, data)\n}\n\nexport const hostPing = (data: KeyValue) => {\n  return axios.post('host/ping', data)\n}\n\nexport const hostPingById = (hostId: string) => {\n  return axios.get(`host/ping/${hostId}`)\n}\n\nexport const delHost = (hostId: string) => {\n  return axios.delete(`host/${hostId}`)\n}\n\nexport const hostUserPage = (hostId: string) => {\n  return axios.get(`hostUser/page/${hostId}`)\n}\n\nexport const hostUserListAll = (hostId: string) => {\n  return axios.get(`hostUser/listAll/${hostId}`)\n}\n\nexport const hostUserListWithoutRoot = (hostId: string) => {\n  return axios.get(`hostUser/listAllWithoutRoot/${hostId}`)\n}\n\nexport const addHostUser = (data: KeyValue) => {\n  return axios.post('hostUser', data)\n}\n\nexport const editHostUser = (hostUserId: string, data: KeyValue) => {\n  return axios.put(`hostUser/${hostUserId}`, data)\n}\n\nexport const delHostUser = (hostUserId: string) => {\n  return axios.delete(`hostUser/${hostUserId}`)\n}\n\nexport const azListAll = () => {\n  return axios.get('az/listAll')\n}\n\nexport const addAz = (data: KeyValue) => {\n  return axios.post('az', data)\n}\n\nexport const editAz = (azId: string, data: KeyValue) => {\n  return axios.put(`az/${azId}`, data)\n}\n\n// page\nexport const azPage = (query: any) => {\n  return axios.get('az/page', {\n    params: query\n  })\n}\n\nexport const delAz = (azId: string) => {\n  return axios.delete(`az/${azId}`)\n}\n\nexport const logPath = (data: KeyValue) => {\n  return axios.get('opsCluster/logPath', {\n    params: data\n  })\n}\n\nexport const getLs = (data: KeyValue) => {\n  return axios.get('opsCluster/ls', {\n    params: data\n  })\n}\n\nexport const slowSql = (data: KeyValue) => {\n  return axios.get('opsCluster/slowSql', {\n    params: data\n  })\n}\n\nexport const auditLog = (data: KeyValue) => {\n  return axios.get('opsCluster/auditLog', {\n    params: data\n  })\n}\n\nexport const downloadFile = (data: KeyValue) => {\n  return axios.get('opsCluster/download', {\n    params: data\n  })\n}\n\n// WDR\nexport const wdrList = (data: KeyValue) => {\n  return axios.get('wdr/list', {\n    params: data\n  })\n}\nexport const wdrGenerate = (data: KeyValue) => {\n  return axios.post('wdr/generate', data)\n}\n\nexport const wdrDelete = (id: string) => {\n  return axios.delete('wdr/del/' + id)\n}\n\nexport const createSnapshot = (data: KeyValue) => {\n  return axios.get('wdr/createSnapshot', {\n    params: data\n  })\n}\n\nexport const downloadWdrFile = (data: KeyValue) => {\n  return axios.get('wdr/downloadWdr', {\n    params: data\n  })\n}\n\nexport const listSnapshot = (data: KeyValue) => {\n  return axios.get('wdr/listSnapshot', {\n    params: data\n  })\n}\n\n// backup\nexport const clusterBackup = (data: KeyValue) => {\n  return axios.post('backup/backup', data)\n}\n// backup page\nexport const backupPage = (data: KeyValue) => {\n  return axios.get('backup/page', {\n    params: data\n  })\n}\n// backup recover\nexport const clusterRecover = (id: string, data: KeyValue) => {\n  return axios.post('backup/recover/' + id, data)\n}\n// backup delete\nexport const backupDel = (id: string) => {\n  return axios.delete('backup/del/' + id)\n}\n\n// package manage \nexport const packageListAll = (data: KeyValue) => {\n  return axios.get('installPackageManager/list', {\n    params: data\n  })\n}\n\nexport const packagePage = (data: KeyValue) => {\n  return axios.get('installPackageManager/page', {\n    params: data\n  })\n}\n\nexport const packageDetailById = (id: string) => {\n  return axios.get('installPackageManager/detail/' + id)\n}\n\nexport const packageDel = (id: string) => {\n  return axios.delete('installPackageManager/' + id)\n}\n\nexport const addPackage = (data: KeyValue) => {\n  return axios.post('installPackageManager/save', data)\n}\n\nexport const editPackage = (azId: string, data: KeyValue) => {\n  return axios.put(`installPackageManager/update/${azId}`, data)\n}","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n// runtime helper for setting properties on components\n// in a tree-shakable way\nexports.default = (sfc, props) => {\n    const target = sfc.__vccOpts || sfc;\n    for (const [key, val] of props) {\n        target[key] = val;\n    }\n    return target;\n};\n","import { defineComponent as _defineComponent } from 'vue'\nimport { toDisplayString as _toDisplayString, unref as _unref, createElementVNode as _createElementVNode, createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, normalizeClass as _normalizeClass, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-378fa843\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { class: \"panel-c\" }\nconst _hoisted_2 = { class: \"panel-header\" }\nconst _hoisted_3 = { class: \"mb ft-xlg\" }\nconst _hoisted_4 = { class: \"mb\" }\nconst _hoisted_5 = { class: \"panel-body\" }\nconst _hoisted_6 = { class: \"flex-col\" }\nconst _hoisted_7 = [\"onClick\"]\nconst _hoisted_8 = { class: \"ft-main\" }\n\nimport { computed, nextTick, onMounted, reactive, ref } from 'vue'\nimport { listInstallPackage } from '@/api/ops'\nimport { KeyValue } from '@/types/global'\nimport { useOpsStore } from '@/store'\nimport { FormInstance } from '@arco-design/web-vue/es/form'\nimport { Message } from '@arco-design/web-vue'\nimport { OpenGaussVersionEnum } from '@/types/ops/install'\nimport { useI18n } from 'vue-i18n'\n\nexport default /*#__PURE__*/_defineComponent({\n  setup(__props) {\n\nconst { t } = useI18n()\nconst installStore = useOpsStore()\n\nconst data = reactive<KeyValue>({\n  path: '',\n  currentVersion: '',\n  fileName: '',\n  files: []\n})\n\nconst pathData = reactive({\n  show: false,\n  title: t('components.OfflineInstall.5mpn1nwazgw0'),\n  form: {\n    path: ''\n  },\n  rules: {\n    path: [{ required: true, 'validate-trigger': 'blur', message: t('components.OfflineInstall.5mpn1nwazks0') }]\n  }\n})\n\nonMounted(() => {\n  if (storeData.value && storeData.value.openGaussVersion) {\n    if (storeData.value.openGaussVersion === OpenGaussVersionEnum.MINIMAL_LIST) {\n      data.currentVersion = t('components.OfflineInstall.5mpn1nwazok0')\n    } else if (storeData.value.openGaussVersion === OpenGaussVersionEnum.LITE) {\n      data.currentVersion = t('components.OfflineInstall.5mpn1nwazs80')\n    } else {\n      data.currentVersion = t('components.OfflineInstall.5mpn1nwazvg0')\n    }\n  }\n  if (storeData.value && storeData.value.packagePath) {\n    data.path = storeData.value.packagePath\n    getAllPackage(data.path)\n  } else {\n    getAllPackage()\n  }\n})\n\nconst getAllPackage = (path?: string) => new Promise(resolve => {\n  listInstallPackage(path).then((res: KeyValue) => {\n    if (Number(res.code) === 200) {\n      data.files = []\n      data.path = res.data.path\n      if (!data.path.endsWith('/')) {\n        data.path += '/'\n      }\n      data.files = res.data.files\n      if (storeData.value && storeData.value.packageName) {\n        data.fileName = storeData.value.packageName\n      } else {\n        if (data.files.length) {\n          data.fileName = res.data.files[0].name\n          setPathToStore()\n        }\n      }\n      resolve(true)\n    } else resolve(false)\n  })\n\n})\nconst choosePackge = (row: KeyValue) => {\n  data.fileName = row.name\n  setPathToStore()\n}\n\nconst formRef = ref<null | FormInstance>(null)\nconst showChangePath = () => {\n  pathData.form.path = ''\n  nextTick(() => {\n    formRef.value?.clearValidate()\n    formRef.value?.resetFields()\n  })\n  pathData.show = true\n  pathData.title = t('components.OfflineInstall.5mpn1nwazgw0')\n}\n\nconst dialogSubmit = () => {\n  formRef.value?.validate().then(result => {\n    if (!result) {\n      listInstallPackage(pathData.form.path).then((res: KeyValue) => {\n        if (Number(res.code) === 200) {\n          if (res.data.files.length) {\n            data.files = []\n            data.files = res.data.files\n            data.path = res.data.path\n            if (!data.path.endsWith('/')) {\n              data.path += '/'\n            }\n            if (res.data.files.length) {\n              data.fileName = res.data.files[0].name\n              setPathToStore()\n            }\n            pathData.show = false\n          } else {\n            Message.warning('No files in the directory were detected')\n          }\n        } else {\n          Message.error(`Failed to obtain the installation package in the directory: ${res.msg}`)\n        }\n      })\n    }\n  })\n\n}\n\nconst setPathToStore = () => {\n  if (data.fileName && data.path) {\n    installStore.setInstallContext({\n      packagePath: data.path,\n      packageName: data.fileName,\n      installPackagePath: data.path + data.fileName\n    })\n  }\n}\n\nconst dialogClose = () => {\n  pathData.show = false\n}\n\nconst storeData = computed(() => installStore.getInstallConfig)\n\n\nreturn (_ctx: any,_cache: any) => {\n  const _component_a_link = _resolveComponent(\"a-link\")!\n  const _component_svg_icon = _resolveComponent(\"svg-icon\")!\n  const _component_a_input = _resolveComponent(\"a-input\")!\n  const _component_a_form_item = _resolveComponent(\"a-form-item\")!\n  const _component_a_form = _resolveComponent(\"a-form\")!\n  const _component_a_modal = _resolveComponent(\"a-modal\")!\n\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _createElementVNode(\"div\", _hoisted_2, [\n      _createElementVNode(\"div\", _hoisted_3, _toDisplayString(_ctx.$t('components.OfflineInstall.5mpn1nway8c0')) + \" \" + _toDisplayString(_unref(data).currentVersion) + \" \" + _toDisplayString(_ctx.$t('components.OfflineInstall.5mpn1nwaywo0')), 1),\n      _createElementVNode(\"div\", _hoisted_4, _toDisplayString(_ctx.$t('components.OfflineInstall.5mpn1nwaz280')) + \" \" + _toDisplayString((_unref(data).path && _unref(data).fileName) ? _unref(data).path + _unref(data).fileName :\n            'no choose'), 1),\n      _createVNode(_component_a_link, { onClick: showChangePath }, {\n        default: _withCtx(() => [\n          _createTextVNode(_toDisplayString(_ctx.$t('components.OfflineInstall.5mpn1nwaz600')), 1)\n        ]),\n        _: 1\n      })\n    ]),\n    _createElementVNode(\"div\", _hoisted_5, [\n      _createElementVNode(\"div\", _hoisted_6, [\n        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_unref(data).files, (item, index) => {\n          return (_openBlock(), _createElementBlock(\"div\", { key: index }, [\n            _createElementVNode(\"div\", {\n              class: _normalizeClass('install-package-card mb ' + (_unref(data).fileName === item.name ? 'center-item-active' : '')),\n              onClick: ($event: any) => (choosePackge(item))\n            }, [\n              _createVNode(_component_svg_icon, {\n                \"icon-class\": \"ops-offline-install\",\n                class: \"icon-size-s mr\"\n              }),\n              _createElementVNode(\"div\", _hoisted_8, _toDisplayString(item.name), 1)\n            ], 10, _hoisted_7)\n          ]))\n        }), 128))\n      ])\n    ]),\n    _createVNode(_component_a_modal, {\n      \"mask-closable\": false,\n      visible: _unref(pathData).show,\n      title: _unref(pathData).title,\n      \"modal-style\": { width: '450px' },\n      onOk: dialogSubmit,\n      onCancel: dialogClose\n    }, {\n      default: _withCtx(() => [\n        _createVNode(_component_a_form, {\n          model: _unref(pathData).form,\n          ref: (_value, _refs) => {\n            _refs['formRef'] = _value\n            formRef.value = _value\n          },\n          \"auto-label-width\": \"\",\n          rules: _unref(pathData).rules\n        }, {\n          default: _withCtx(() => [\n            _createVNode(_component_a_form_item, {\n              field: \"path\",\n              label: _ctx.$t('components.OfflineInstall.5mpn1nwaz980'),\n              \"validate-trigger\": \"blur\",\n              rules: [{ required: true, message: _ctx.$t('components.OfflineInstall.5mpn1nwazks0') }]\n            }, {\n              default: _withCtx(() => [\n                _createVNode(_component_a_input, {\n                  modelValue: _unref(pathData).form.path,\n                  \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event: any) => (_unref(pathData).form.path = $event)),\n                  placeholder: _ctx.$t('components.OfflineInstall.5mpn1nwazd40')\n                }, null, 8, [\"modelValue\", \"placeholder\"])\n              ]),\n              _: 1\n            }, 8, [\"label\", \"rules\"])\n          ]),\n          _: 1\n        }, 8, [\"model\", \"rules\"])\n      ]),\n      _: 1\n    }, 8, [\"visible\", \"title\"])\n  ]))\n}\n}\n\n})","import script from \"./OfflineInstall.vue?vue&type=script&lang=ts&setup=true\"\nexport * from \"./OfflineInstall.vue?vue&type=script&lang=ts&setup=true\"\n\nimport \"./OfflineInstall.vue?vue&type=style&index=0&id=378fa843&lang=less&scoped=true\"\n\nimport exportComponent from \"/Users/xielibo/ideawork/huawei/base-ops/web-ui/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-378fa843\"]])\n\nexport default __exports__"],"names":["getEntryKey","axios","download","data","getEnvMonitorData","hostId","installOpenGauss","importOpenGauss","quickInstall","clusterCheck","params","uninstallOpenGauss","hasName","clusterList","openSSH","clusterMonitor","start","stop","restart","getHostByClusterId","listInstallPackage","path","hostListAll","hostUserListWithoutRoot","azListAll","logPath","getLs","slowSql","auditLog","downloadFile","wdrList","wdrGenerate","wdrDelete","id","createSnapshot","downloadWdrFile","listSnapshot","clusterBackup","backupPage","clusterRecover","backupDel","packagePage","packageDel","addPackage","editPackage","azId","exports","sfc","props","target","__vccOpts","key","val","_hoisted_1","class","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","_hoisted_6","_hoisted_7","_hoisted_8","_defineComponent","setup","__props","t","useI18n","installStore","useOpsStore","reactive","currentVersion","fileName","files","pathData","show","title","form","rules","required","message","onMounted","storeData","value","openGaussVersion","OpenGaussVersionEnum","packagePath","getAllPackage","Promise","resolve","then","res","Number","code","endsWith","packageName","length","name","setPathToStore","choosePackge","row","formRef","ref","showChangePath","nextTick","clearValidate","resetFields","dialogSubmit","validate","result","Message","msg","setInstallContext","installPackagePath","dialogClose","computed","getInstallConfig","_ctx","_cache","_component_a_link","_resolveComponent","_component_svg_icon","_component_a_input","_component_a_form_item","_component_a_form","_component_a_modal","_openBlock","_createElementBlock","_createElementVNode","_toDisplayString","$t","_unref","_createVNode","onClick","default","_withCtx","_createTextVNode","_","_Fragment","_renderList","item","index","_normalizeClass","$event","visible","width","onOk","onCancel","model","_value","_refs","field","label","modelValue","placeholder","__exports__"],"sourceRoot":""}