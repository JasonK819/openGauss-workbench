"use strict";(self["webpackChunkweb_ui"]=self["webpackChunkweb_ui"]||[]).push([[6574,9266],{76574:function(e,t,n){n.r(t),n.d(t,{default:function(){return S}});var o=n(70821),r=(n(57658),n(64253));const s=r.Bz.create({type:"vue componnet"});r.kJ.registerVueComponent=s.register,r.kJ.unregisterVueComponent=s.unregister,r.kJ.Hook.prototype.getVueComponent=function(e){const t=this.options.getVueComponent;if("function"===typeof t){const n=r.Iw.call(t,this.graph,e);if(null!=n)return n}let n=e.getComponent();if("string"===typeof n){const e=s.get(n);if(null==e)return s.onNotFound(n);n=e}return n};class a extends r.NB{get component(){return this.getComponent()}set component(e){this.setComponent(e)}getComponent(){return this.store.get("component")}setComponent(e,t={}){return null==e?this.removeComponent(t):this.store.set("component",e,t),this}removeComponent(e={}){return this.store.remove("component",e),this}}(function(e){function t(e,t="rect"){const n=[{tagName:t,selector:"body"}];return e?n.push(r.Lu.getForeignObjectMarkup()):n.push({tagName:"g",selector:"content"}),n.push({tagName:"text",selector:"label"}),n}e.config({view:"vue-shape-view",markup:t(!0),attrs:{body:{fill:"none",stroke:"none",refWidth:"100%",refHeight:"100%"},fo:{refWidth:"100%",refHeight:"100%"},label:{fontSize:14,fill:"#333",refX:"50%",refY:"50%",textAnchor:"middle",textVerticalAnchor:"middle"}},propHooks(e){if(null==e.markup){const n=e.primer,o=e.useForeignObject;if((null!=n||null!=o)&&(e.markup=t(!1!==o,n),n)){null==e.attrs&&(e.attrs={});let t={};"circle"===n?t={refCx:"50%",refCy:"50%",refR:"50%"}:"ellipse"===n&&(t={refCx:"50%",refCy:"50%",refRx:"50%",refRy:"50%"}),"rect"!==n&&(e.attrs=r.QK.merge({},e.attrs,{body:Object.assign({refWidth:null,refHeight:null},t)}))}}return e}}),r.NB.registry.register("vue-shape",e,!0)})(a||(a={}));var i=n(86121),c=function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(o=Object.getOwnPropertySymbols(e);r<o.length;r++)t.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(e,o[r])&&(n[o[r]]=e[o[r]])}return n};class l extends r.DK{init(){super.init()}getComponentContainer(){return this.selectors.foContent}confirmUpdate(e){const t=super.confirmUpdate(e);return this.handleAction(t,l.action,(()=>{r.b2.scheduleTask((()=>{this.renderVueComponent()}))}))}renderVueComponent(){this.unmountVueComponent();const e=this.getComponentContainer(),t=this.cell,n=this.graph;if(e){const o=this.graph.hook.getVueComponent(t);if(i.$Q){const r=i.eR,s=document.createElement("div");if(s.style.width="100%",s.style.height="100%","string"===typeof o)s.innerHTML=o,this.vm=new r({el:s});else{const e=o,{template:a}=e,i=c(e,["template"]);s.innerHTML=a,this.vm=new r(Object.assign({el:s,provide(){return{getGraph:()=>n,getNode:()=>t}}},i))}e.appendChild(this.vm.$el)}else i.$B&&(this.vm=(0,i.ri)({render(){return(0,i.h)(o)},provide(){return{getGraph:()=>n,getNode:()=>t}}}),this.vm.mount(e))}}unmountVueComponent(){const e=this.getComponentContainer();return this.vm&&(i.$Q&&this.vm.$destroy(),i.$B&&this.vm.unmount(),this.vm=null),e.innerHTML="",e}unmount(){return this.unmountVueComponent(),super.unmount(),this}}(function(e){e.action="vue",e.config({bootstrap:[e.action],actions:{component:e.action}}),r.DK.registry.register("vue-shape-view",e,!0)})(l||(l={}));var p=n(97021),d=n(9266),u=n(43610),m=n(67753);const h=e=>((0,o.pushScopeId)("data-v-d4c182b6"),e=e(),(0,o.popScopeId)(),e),g={class:"search"},f={class:"search-frame"},v=["placeholder","onKeydown"],y={class:"content"},C=["onClick"],k={class:"name"},N={class:"text"},b=["onMousedown","onMouseup"],V={class:"node-title-icon"},w=h((()=>(0,o.createElementVNode)("div",{class:"active-bg"},null,-1))),E={class:"title-text"};var B=(0,o.defineComponent)({setup(e,{expose:t}){const n=(0,u.m)(),s=(e,t)=>{n.nodeEvent({event:"operate",type:e,data:t})},a=(0,o.reactive)({loading:!0,graph:null,dnd:null,nodes:[],open:!0,search:""}),i=(e,t)=>{if(a.dnd=new r.e9.q6({target:e,getDragNode:e=>e.clone(),getDropNode:e=>e.clone()}),a.graph=e,t&&t.stencil&&t.stencil.nodes){let e=JSON.parse(JSON.stringify(t.stencil.nodes));a.nodes=e,O(t),a.nodes=e.filter((e=>"hidden"!==e.groupType)),(0,o.nextTick)((()=>{a.nodes.forEach((e=>l(e)))}))}a.loading=!1},c=(0,o.computed)((()=>{let e=[{child:[]}];return a.search?a.nodes.forEach((t=>{t.child.forEach((t=>{t.data.text.includes(a.search)&&e[0].child.push(t)}))})):e=a.nodes,e})),l=e=>{e.childHeight=e.open?"0px":60*e.child.length+50+"px",e.open=!e.open},h=(e,t)=>{let n;n=a.graph?.createNode({shape:t.data.type,width:220,height:60,ports:t.ports?t.ports:{},data:t.data?t.data:{}}),a.graph&&n&&a.dnd?.start(n,e)},B=(e,t)=>{console.log(e,t)},x=()=>{console.log("search component")},O=e=>{e.stencil.nodes.forEach((e=>{e.child.forEach((e=>{e.data.rule&&"function"===typeof e.data.rule&&n.setRule(e.data.cells_type,e.data.rule),"vue-shape"===e.shape&&(n.isRegisterNodes.includes(e.data.type)||(n.isRegisterNodes.push(e.data.type),r.kJ.registerNode(e.data.type,{inherit:"vue-shape",component:{render:()=>(0,o.createVNode)(d["default"],{component:e.data.type,operate:s},null)}})))}))}))},S=()=>{a.open=!a.open};return t({init:i,toggleMenu:S}),(e,t)=>{const n=(0,o.resolveComponent)("icon-search"),r=(0,o.resolveComponent)("icon-down");return(0,o.openBlock)(),(0,o.createBlock)((0,o.unref)(p.Z),{class:"left-sidebar-container",spinning:(0,o.unref)(a).loading,wrapperClassName:(0,o.unref)(a).open?"open":"close"},{default:(0,o.withCtx)((()=>[(0,o.createElementVNode)("div",{class:(0,o.normalizeClass)(["left-sidebar",[(0,o.unref)(a).open?"open":"close"]])},[(0,o.createElementVNode)("div",g,[(0,o.createElementVNode)("div",f,[(0,o.withDirectives)((0,o.createElementVNode)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>(0,o.unref)(a).search=e),type:"text",placeholder:e.$t("modeling.left-sidebar.index.5m78udtsry80"),onKeydown:(0,o.withKeys)(x,["enter"])},null,40,v),[[o.vModelText,(0,o.unref)(a).search]]),(0,o.createElementVNode)("div",{class:"search-icon",onClick:x},[(0,o.createVNode)(n)])])]),(0,o.createElementVNode)("div",y,[((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)((0,o.unref)(c),((e,t)=>((0,o.openBlock)(),(0,o.createElementBlock)("div",{class:(0,o.normalizeClass)(["group",e.open||!e.name?"group-open":""]),key:`groupKey${t}`},[e.name?((0,o.openBlock)(),(0,o.createElementBlock)("div",{key:0,class:"group-name",onClick:t=>l(e)},[(0,o.createElementVNode)("div",k,[e.icon&&e.icon.startsWith("icon-")?((0,o.openBlock)(),(0,o.createBlock)((0,o.resolveDynamicComponent)(e.icon),{key:0})):(0,o.createCommentVNode)("",!0),(0,o.createElementVNode)("div",N,(0,o.toDisplayString)(e.name),1),(0,o.createVNode)(r,{class:"group-arrow"})])],8,C)):(0,o.createCommentVNode)("",!0),(0,o.createElementVNode)("div",{class:"nodes",style:(0,o.normalizeStyle)(e.name?{height:e.childHeight}:{height:"auto",paddingTop:0})},[((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)(e.child,((e,t)=>((0,o.openBlock)(),(0,o.createElementBlock)("div",{class:"node",key:`nodeKey${t}`},[(0,o.createElementVNode)("div",{class:"node-title",onMousedown:t=>h(t,e),onMouseup:t=>B(t,e)},[(0,o.createElementVNode)("div",V,[e.data.icon?((0,o.openBlock)(),(0,o.createBlock)(m.Z,{key:0,class:"bs-i","icon-class":e.data.icon},null,8,["icon-class"])):(0,o.createCommentVNode)("",!0),w]),(0,o.createElementVNode)("div",E,(0,o.toDisplayString)(e.data.text),1)],40,b)])))),128))],4)],2)))),128))])],2)])),_:1},8,["spinning","wrapperClassName"])}}}),x=n(83744);const O=(0,x.Z)(B,[["__scopeId","data-v-d4c182b6"]]);var S=O},9266:function(e,t,n){n.r(t),n.d(t,{default:function(){return a}});var o=n(70821),r=(0,o.defineComponent)({props:{component:{type:String,required:!0},operate:{type:null,required:!0}},setup(e){const t=e,r={TableNode:(0,o.defineAsyncComponent)((()=>n.e(5361).then(n.bind(n,65361)))),BaseNode:(0,o.defineAsyncComponent)((()=>n.e(7643).then(n.bind(n,17643))))};(0,o.provide)("node-event",t.operate);const s=(0,o.computed)((()=>r[t.component]));return(t,n)=>((0,o.openBlock)(),(0,o.createBlock)((0,o.resolveDynamicComponent)((0,o.unref)(s)),{operate:e.operate},null,8,["operate"]))}});const s=r;var a=s}}]);
//# sourceMappingURL=6574.7052047d.js.map