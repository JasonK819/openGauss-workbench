"use strict";(self["webpackChunkweb_ui"]=self["webpackChunkweb_ui"]||[]).push([[688],{39518:function(e,t,o){o.d(t,{$4:function(){return x},Ac:function(){return c},BL:function(){return k},C4:function(){return O},DF:function(){return B},GD:function(){return M},IW:function(){return L},K4:function(){return A},Kf:function(){return q},LR:function(){return l},Lf:function(){return s},Ox:function(){return D},PK:function(){return u},R1:function(){return I},Sv:function(){return P},T2:function(){return d},T4:function(){return z},TL:function(){return y},TY:function(){return _},Uw:function(){return R},We:function(){return T},YQ:function(){return C},Ye:function(){return v},ZA:function(){return W},_V:function(){return f},c0:function(){return a},gi:function(){return V},h:function(){return w},jQ:function(){return F},jV:function(){return $},nT:function(){return g},sT:function(){return N},tA:function(){return i},ur:function(){return E},w3:function(){return m},xj:function(){return p},y6:function(){return S},zs:function(){return b},zx:function(){return h}});var r=o(9669),n=o.n(r);const s=()=>n().get("encryption/getKey"),l=e=>n().post("opsCluster/download",e||{}),a=e=>n().get(`opsCluster/env/${e}`),c=e=>n().post("opsCluster/install",e),i=e=>n().post("opsCluster/import",e),u=e=>n().post("opsCluster/quickInstall",e),p=e=>n().get("opsCluster/check",{params:e}),m=e=>n().post("opsCluster/uninstall",e),d=e=>n().get("opsCluster/hasName",{params:e}),f=()=>n().get("opsCluster/listCluster"),v=e=>n().post("opsCluster/ssh",e),g=e=>n().get("opsCluster/monitor",{params:e}),k=e=>n().post("opsCluster/start",e),N=e=>n().post("opsCluster/stop",e),E=e=>n().post("opsCluster/restart",e),y=e=>n().get("opsCluster/listHost",{params:e}),w=e=>n().get(e?`opsCluster/listInstallPackage?path=${e}`:"opsCluster/listInstallPackage"),h=()=>n().get("host/listAll"),C=e=>n().get(`hostUser/listAllWithoutRoot/${e}`),x=()=>n().get("az/listAll"),B=e=>n().get("opsCluster/logPath",{params:e}),V=e=>n().get("opsCluster/ls",{params:e}),R=e=>n().get("opsCluster/slowSql",{params:e}),M=e=>n().get("opsCluster/auditLog",{params:e}),P=e=>n().get("opsCluster/download",{params:e}),S=e=>n().get("wdr/list",{params:e}),I=e=>n().post("wdr/generate",e),b=e=>n()["delete"]("wdr/del/"+e),D=e=>n().get("wdr/createSnapshot",{params:e}),A=e=>n().get("wdr/downloadWdr",{params:e}),O=e=>n().get("wdr/listSnapshot",{params:e}),L=e=>n().post("backup/backup",e),z=e=>n().get("backup/page",{params:e}),q=(e,t)=>n().post("backup/recover/"+e,t),$=e=>n()["delete"]("backup/del/"+e),T=e=>n().get("installPackageManager/page",{params:e}),_=e=>n()["delete"]("installPackageManager/"+e),W=e=>n().post("installPackageManager/save",e),F=(e,t)=>n().put(`installPackageManager/update/${e}`,t)},83744:function(e,t){t.Z=(e,t)=>{const o=e.__vccOpts||e;for(const[r,n]of t)o[r]=n;return o}},10688:function(e,t,o){o.r(t),o.d(t,{default:function(){return W}});var r=o(70821),n=o(39518),s=o(40225),l=o(98535),a=o(15784),c=o(57330);const i={class:"env-monitor-c"},u={class:"flex-col"},p={class:"flex-row-center",style:{width:"50%"}},m={class:"flex-col-start"},d={class:"flex-row"},f={class:"env-item-c flex-between full-w mb"},v={class:"flex-row"},g={class:"flex-row"},k={key:1},N={key:0},E={class:"flex-row mb"},y={class:"ft-xlg"},w={class:"hardware-env"},h={key:0,class:"flex-col"},C={style:{width:"250px"},class:"flex-row"},x={class:"mr"},B={style:{"min-width":"500px"},class:"flex-row-start"},V={class:"mr"},R={class:"flex-row mb"},M={class:"ft-xlg"},P={class:"hardware-env"},S={key:0,class:"flex-col"},I={style:{width:"250px"},class:"flex-row"},b={class:"mr"},D={style:{"min-width":"500px"},class:"flex-row-start"},A={class:"mr"},O={key:1},L={key:1},z={key:2};var q;(function(e){e["NORMAL"]="NORMAL",e["WARMING"]="WARMING",e["ERROR"]="ERROR",e["INFO"]="INFO"})(q||(q={}));var $=(0,r.defineComponent)({setup(e,{expose:t}){const{t:o}=(0,c.QT)(),$=(0,s.BH)(),T=(0,r.inject)("loading");(0,r.ref)(0);let _=(0,r.reactive)({loading:!1,isShow:!0,result:-1,errMsg:"",noPassNum:0,noPassNumHard:0,noPassNumSoft:0,hostId:"",clusterRole:"",privateIp:"",publicIp:"",hardwareEnv:{envProperties:[]},softwareEnv:{envProperties:[]}});(0,r.onMounted)((()=>{T.toLoading(),F(),_.loading=!0,(0,n.c0)(_.hostId).then((e=>{200===Number(e.code)?(_.result=200,_.hardwareEnv.envProperties=e.data.hardwareEnv.envProperties,_.softwareEnv.envProperties=e.data.softwareEnv.envProperties,G()):(_.result=500,_.errMsg=e.msg)})).catch((e=>{_.result=500,_.errMsg=e})).finally((()=>{_.loading=!1,T.cancelLoading()}))}));const W=e=>{T.toLoading(),e.loading=!0,(0,n.c0)(e.hostId).then((t=>{200===Number(t.code)?(e.result=200,e.hardwareEnv.envProperties=t.data.hardwareEnv.envProperties,e.softwareEnv.envProperties=t.data.softwareEnv.envProperties,G()):(e.result=500,e.errMsg=t.msg)})).catch((t=>{e.result=500,e.errMsg=t})).finally((()=>{e.loading=!1,T.cancelLoading()}))},F=()=>{$.getMiniConfig.nodeConfigList.forEach((e=>{_.hostId=e.hostId,_.privateIp=e.privateIp,_.publicIp=e.publicIp,_.clusterRole=e.clusterRole}))},G=()=>{_.hardwareEnv.envProperties.forEach((e=>{e.status!==q.ERROR&&e.status!==q.WARMING||(_.noPassNum=_.noPassNum+1,_.noPassNumHard=_.noPassNumHard+1)})),_.softwareEnv.envProperties.forEach((e=>{e.status!==q.ERROR&&e.status!==q.WARMING||(_.noPassNum=_.noPassNum+1,_.noPassNumSoft=_.noPassNumSoft+1)}))},H=(e,t)=>{switch(t.status){case q.ERROR:return"soft"===e?"red":"orange";case q.INFO:return"gray";case q.NORMAL:return"green";default:return"orange"}},j=e=>{switch(e){case l._.MASTER:return o("simple.EnvMonitor.5mpmqpcxmog0");case l._.SLAVE:return o("simple.EnvMonitor.5mpmqpcxmwg0");default:return o("simple.EnvMonitor.5mpmqpcxn5o0")}},K=()=>{let e=!0;return 200!==_.result&&(e=!1,a.Z.warning("If the host fails to be detected, configure the host and re-detect the host for installation")),e};return t({beforeConfirm:K}),(e,t)=>{const o=(0,r.resolveComponent)("a-badge"),n=(0,r.resolveComponent)("a-alert"),s=(0,r.resolveComponent)("a-tag"),l=(0,r.resolveComponent)("icon-refresh"),a=(0,r.resolveComponent)("a-button"),c=(0,r.resolveComponent)("icon-down"),$=(0,r.resolveComponent)("icon-up"),T=(0,r.resolveComponent)("icon-exclamation-circle-fill"),F=(0,r.resolveComponent)("icon-check-circle-fill"),G=(0,r.resolveComponent)("icon-info-circle-fill"),K=(0,r.resolveComponent)("icon-close-circle-fill"),Z=(0,r.resolveComponent)("a-spin");return(0,r.openBlock)(),(0,r.createElementBlock)("div",i,[(0,r.createElementVNode)("div",u,[(0,r.createElementVNode)("div",p,[(0,r.createVNode)(Z,{class:"full-w",loading:(0,r.unref)(_).loading,tip:e.$t("simple.EnvMonitor.5mpmqpcxjpc0")},{default:(0,r.withCtx)((()=>[(0,r.createElementVNode)("div",m,[-1!==(0,r.unref)(_).result&&(0,r.unref)(_).noPassNum>0?((0,r.openBlock)(),(0,r.createBlock)(n,{key:0,class:"mb",style:{width:"fit-content"},type:"warning"},{default:(0,r.withCtx)((()=>[(0,r.createElementVNode)("div",d,[(0,r.createTextVNode)((0,r.toDisplayString)(e.$t("simple.EnvMonitor.5mpmqpcxke40"))+" ",1),(0,r.createVNode)(o,{count:(0,r.unref)(_).noPassNum},null,8,["count"]),(0,r.createTextVNode)((0,r.toDisplayString)(e.$t("simple.EnvMonitor.else1")),1)])])),_:1})):(0,r.createCommentVNode)("",!0),(0,r.createElementVNode)("div",f,[(0,r.createElementVNode)("div",v,[(0,r.createVNode)(s,{class:"mr",color:"#86909C"},{default:(0,r.withCtx)((()=>[(0,r.createTextVNode)((0,r.toDisplayString)(j((0,r.unref)(_).clusterRole)),1)])),_:1}),(0,r.createTextVNode)(" "+(0,r.toDisplayString)(e.$t("simple.EnvMonitor.5mpmqpcxkq80"))+" "+(0,r.toDisplayString)((0,r.unref)(_).privateIp)+"("+(0,r.toDisplayString)((0,r.unref)(_).publicIp)+") ",1)]),(0,r.createElementVNode)("div",g,[(0,r.createVNode)(a,{class:"mr",type:"text",long:"",onClick:t[0]||(t[0]=e=>W((0,r.unref)(_)))},{icon:(0,r.withCtx)((()=>[(0,r.createVNode)(l)])),default:(0,r.withCtx)((()=>[(0,r.createTextVNode)(" "+(0,r.toDisplayString)(e.$t("simple.EnvMonitor.5mpmqpcxkzc0")),1)])),_:1}),(0,r.unref)(_).isShow?((0,r.openBlock)(),(0,r.createBlock)($,{key:1,style:{cursor:"pointer"},onClick:t[2]||(t[2]=e=>(0,r.unref)(_).isShow=!1)})):((0,r.openBlock)(),(0,r.createBlock)(c,{key:0,style:{cursor:"pointer"},onClick:t[1]||(t[1]=e=>(0,r.unref)(_).isShow=!0)}))])]),(0,r.unref)(_).isShow?((0,r.openBlock)(),(0,r.createElementBlock)("div",k,[200===(0,r.unref)(_).result?((0,r.openBlock)(),(0,r.createElementBlock)("div",N,[(0,r.createElementVNode)("div",E,[(0,r.unref)(_).noPassNumHard>0?((0,r.openBlock)(),(0,r.createBlock)(T,{key:0,class:"mr",style:{color:"orange"},size:30})):((0,r.openBlock)(),(0,r.createBlock)(F,{key:1,style:{color:"green"},class:"mr",size:30})),(0,r.createElementVNode)("div",y,(0,r.toDisplayString)(e.$t("simple.EnvMonitor.5mpmqpcxlas0")),1)]),(0,r.createElementVNode)("div",w,[(0,r.unref)(_).hardwareEnv.envProperties.length?((0,r.openBlock)(),(0,r.createElementBlock)("div",h,[((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)((0,r.unref)(_).hardwareEnv.envProperties,((e,t)=>((0,r.openBlock)(),(0,r.createElementBlock)("div",{class:"flex-row mb",key:t},[(0,r.createElementVNode)("div",C,[(0,r.createElementVNode)("div",x,(0,r.toDisplayString)(e.name)+":",1),(0,r.createElementVNode)("div",null,(0,r.toDisplayString)(e.value),1)]),(0,r.createElementVNode)("div",B,[(0,r.createElementVNode)("div",V,[e.status===q.NORMAL?((0,r.openBlock)(),(0,r.createBlock)(F,{key:0,style:{color:"green"},size:20})):(0,r.createCommentVNode)("",!0),e.status===q.WARMING||e.status===q.ERROR?((0,r.openBlock)(),(0,r.createBlock)(T,{key:1,style:{color:"orange"},size:20})):(0,r.createCommentVNode)("",!0),e.status===q.INFO?((0,r.openBlock)(),(0,r.createBlock)(G,{key:2,style:{color:"gray"},size:20})):(0,r.createCommentVNode)("",!0)]),(0,r.createElementVNode)("div",{style:(0,r.normalizeStyle)("color: "+H("hard",e))},(0,r.toDisplayString)(e.statusMessage),5)])])))),128))])):(0,r.createCommentVNode)("",!0)]),(0,r.createElementVNode)("div",R,[(0,r.unref)(_).noPassNumSoft>0?((0,r.openBlock)(),(0,r.createBlock)(T,{key:0,class:"mr",style:{color:"orange"},size:30})):((0,r.openBlock)(),(0,r.createBlock)(F,{key:1,style:{color:"green"},class:"mr",size:30})),(0,r.createElementVNode)("div",M,(0,r.toDisplayString)(e.$t("simple.EnvMonitor.5mpmqpcxlk40")),1)]),(0,r.createElementVNode)("div",P,[(0,r.unref)(_).softwareEnv.envProperties.length?((0,r.openBlock)(),(0,r.createElementBlock)("div",S,[((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)((0,r.unref)(_).softwareEnv.envProperties,((e,t)=>((0,r.openBlock)(),(0,r.createElementBlock)("div",{class:"flex-row mb",key:t},[(0,r.createElementVNode)("div",I,[(0,r.createElementVNode)("div",b,(0,r.toDisplayString)(e.name)+":",1),(0,r.createElementVNode)("div",null,(0,r.toDisplayString)(e.value),1)]),(0,r.createElementVNode)("div",D,[(0,r.createElementVNode)("div",A,[e.status===q.ERROR?((0,r.openBlock)(),(0,r.createBlock)(K,{key:0,style:{color:"red"},size:20})):(0,r.createCommentVNode)("",!0),e.status===q.NORMAL?((0,r.openBlock)(),(0,r.createBlock)(F,{key:1,style:{color:"green"},size:20})):(0,r.createCommentVNode)("",!0),e.status===q.WARMING?((0,r.openBlock)(),(0,r.createBlock)(T,{key:2,style:{color:"orange"},size:20})):(0,r.createCommentVNode)("",!0),e.status===q.INFO?((0,r.openBlock)(),(0,r.createBlock)(G,{key:3,style:{color:"gray"},size:20})):(0,r.createCommentVNode)("",!0)]),(0,r.createElementVNode)("div",{style:(0,r.normalizeStyle)("max-width: 300px; color: "+H("soft",e))},(0,r.toDisplayString)(e.statusMessage),5)])])))),128))])):(0,r.createCommentVNode)("",!0),500===(0,r.unref)(_).result?((0,r.openBlock)(),(0,r.createElementBlock)("div",O,[(0,r.createVNode)(s,{color:"red"},{default:(0,r.withCtx)((()=>[(0,r.createTextVNode)((0,r.toDisplayString)(e.$t("simple.EnvMonitor.5mpmqpcxlxc0")),1)])),_:1})])):(0,r.createCommentVNode)("",!0)])])):-1!==(0,r.unref)(_).result&&200!==(0,r.unref)(_).result?((0,r.openBlock)(),(0,r.createElementBlock)("div",L,(0,r.toDisplayString)(e.$t("simple.EnvMonitor.5mpmqpcxm6o0"))+" "+(0,r.toDisplayString)((0,r.unref)(_).errMsg),1)):((0,r.openBlock)(),(0,r.createElementBlock)("div",z,(0,r.toDisplayString)(e.$t("simple.EnvMonitor.5mpmqpcxmfs0")),1))])):(0,r.createCommentVNode)("",!0)])])),_:1},8,["loading","tip"])])])])}}}),T=o(83744);const _=(0,T.Z)($,[["__scopeId","data-v-328335be"]]);var W=_}}]);
//# sourceMappingURL=688.c0caa94c.js.map