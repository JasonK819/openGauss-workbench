"use strict";(self["webpackChunkweb_ui"]=self["webpackChunkweb_ui"]||[]).push([[8900],{39518:function(e,t,n){n.d(t,{$4:function(){return I},Ac:function(){return i},BL:function(){return v},C4:function(){return D},DF:function(){return y},GD:function(){return P},IW:function(){return L},K4:function(){return T},Kf:function(){return A},LR:function(){return o},Lf:function(){return r},Ox:function(){return E},PK:function(){return c},R1:function(){return S},Sv:function(){return x},T2:function(){return m},T4:function(){return B},TL:function(){return k},TY:function(){return Z},Uw:function(){return O},We:function(){return W},YQ:function(){return b},Ye:function(){return g},ZA:function(){return q},_V:function(){return d},c0:function(){return s},gi:function(){return z},h:function(){return N},jQ:function(){return F},jV:function(){return M},nT:function(){return h},sT:function(){return w},tA:function(){return u},ur:function(){return C},w3:function(){return f},xj:function(){return p},y6:function(){return $},zs:function(){return _},zx:function(){return V}});var a=n(9669),l=n.n(a);const r=()=>l().get("encryption/getKey"),o=e=>l().post("opsCluster/download",e||{}),s=e=>l().get(`opsCluster/env/${e}`),i=e=>l().post("opsCluster/install",e),u=e=>l().post("opsCluster/import",e),c=e=>l().post("opsCluster/quickInstall",e),p=e=>l().get("opsCluster/check",{params:e}),f=e=>l().post("opsCluster/uninstall",e),m=e=>l().get("opsCluster/hasName",{params:e}),d=()=>l().get("opsCluster/listCluster"),g=e=>l().post("opsCluster/ssh",e),h=e=>l().get("opsCluster/monitor",{params:e}),v=e=>l().post("opsCluster/start",e),w=e=>l().post("opsCluster/stop",e),C=e=>l().post("opsCluster/restart",e),k=e=>l().get("opsCluster/listHost",{params:e}),N=e=>l().get(e?`opsCluster/listInstallPackage?path=${e}`:"opsCluster/listInstallPackage"),V=()=>l().get("host/listAll"),b=e=>l().get(`hostUser/listAllWithoutRoot/${e}`),I=()=>l().get("az/listAll"),y=e=>l().get("opsCluster/logPath",{params:e}),z=e=>l().get("opsCluster/ls",{params:e}),O=e=>l().get("opsCluster/slowSql",{params:e}),P=e=>l().get("opsCluster/auditLog",{params:e}),x=e=>l().get("opsCluster/download",{params:e}),$=e=>l().get("wdr/list",{params:e}),S=e=>l().post("wdr/generate",e),_=e=>l()["delete"]("wdr/del/"+e),E=e=>l().get("wdr/createSnapshot",{params:e}),T=e=>l().get("wdr/downloadWdr",{params:e}),D=e=>l().get("wdr/listSnapshot",{params:e}),L=e=>l().post("backup/backup",e),B=e=>l().get("backup/page",{params:e}),A=(e,t)=>l().post("backup/recover/"+e,t),M=e=>l()["delete"]("backup/del/"+e),W=e=>l().get("installPackageManager/page",{params:e}),Z=e=>l()["delete"]("installPackageManager/"+e),q=e=>l().post("installPackageManager/save",e),F=(e,t)=>l().put(`installPackageManager/update/${e}`,t)},83744:function(e,t){t.Z=(e,t)=>{const n=e.__vccOpts||e;for(const[a,l]of t)n[a]=l;return n}},88900:function(e,t,n){n.r(t),n.d(t,{default:function(){return k}});var a=n(70821),l=n(39518),r=n(40225),o=n(15784),s=n(98535),i=n(57330);const u={class:"panel-c"},c={class:"panel-header"},p={class:"mb ft-xlg"},f={class:"mb"},m={class:"panel-body"},d={class:"flex-col"},g=["onClick"],h={class:"ft-main"};var v=(0,a.defineComponent)({setup(e){const{t:t}=(0,i.QT)(),n=(0,r.BH)(),v=(0,a.reactive)({path:"",currentVersion:"",fileName:"",files:[]}),w=(0,a.reactive)({show:!1,title:t("components.OfflineInstall.5mpn1nwazgw0"),form:{path:""},rules:{path:[{required:!0,"validate-trigger":"blur",message:t("components.OfflineInstall.5mpn1nwazks0")}]}});(0,a.onMounted)((()=>{z.value&&z.value.openGaussVersion&&(z.value.openGaussVersion===s.e0.MINIMAL_LIST?v.currentVersion=t("components.OfflineInstall.5mpn1nwazok0"):z.value.openGaussVersion===s.e0.LITE?v.currentVersion=t("components.OfflineInstall.5mpn1nwazs80"):v.currentVersion=t("components.OfflineInstall.5mpn1nwazvg0")),z.value&&z.value.packagePath?(v.path=z.value.packagePath,C(v.path)):C()}));const C=e=>new Promise((t=>{(0,l.h)(e).then((e=>{200===Number(e.code)?(v.files=[],v.path=e.data.path,v.path.endsWith("/")||(v.path+="/"),v.files=e.data.files,z.value&&z.value.packageName?v.fileName=z.value.packageName:v.files.length&&(v.fileName=e.data.files[0].name,I()),t(!0)):t(!1)}))})),k=e=>{v.fileName=e.name,I()},N=(0,a.ref)(null),V=()=>{w.form.path="",(0,a.nextTick)((()=>{N.value?.clearValidate(),N.value?.resetFields()})),w.show=!0,w.title=t("components.OfflineInstall.5mpn1nwazgw0")},b=()=>{N.value?.validate().then((e=>{e||(0,l.h)(w.form.path).then((e=>{200===Number(e.code)?e.data.files.length?(v.files=[],v.files=e.data.files,v.path=e.data.path,v.path.endsWith("/")||(v.path+="/"),e.data.files.length&&(v.fileName=e.data.files[0].name,I()),w.show=!1):o.Z.warning("No files in the directory were detected"):o.Z.error(`Failed to obtain the installation package in the directory: ${e.msg}`)}))}))},I=()=>{v.fileName&&v.path&&n.setInstallContext({packagePath:v.path,packageName:v.fileName,installPackagePath:v.path+v.fileName})},y=()=>{w.show=!1},z=(0,a.computed)((()=>n.getInstallConfig));return(e,t)=>{const n=(0,a.resolveComponent)("a-link"),l=(0,a.resolveComponent)("svg-icon"),r=(0,a.resolveComponent)("a-input"),o=(0,a.resolveComponent)("a-form-item"),s=(0,a.resolveComponent)("a-form"),i=(0,a.resolveComponent)("a-modal");return(0,a.openBlock)(),(0,a.createElementBlock)("div",u,[(0,a.createElementVNode)("div",c,[(0,a.createElementVNode)("div",p,(0,a.toDisplayString)(e.$t("components.OfflineInstall.5mpn1nway8c0"))+" "+(0,a.toDisplayString)((0,a.unref)(v).currentVersion)+" "+(0,a.toDisplayString)(e.$t("components.OfflineInstall.5mpn1nwaywo0")),1),(0,a.createElementVNode)("div",f,(0,a.toDisplayString)(e.$t("components.OfflineInstall.5mpn1nwaz280"))+" "+(0,a.toDisplayString)((0,a.unref)(v).path&&(0,a.unref)(v).fileName?(0,a.unref)(v).path+(0,a.unref)(v).fileName:"no choose"),1),(0,a.createVNode)(n,{onClick:V},{default:(0,a.withCtx)((()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("components.OfflineInstall.5mpn1nwaz600")),1)])),_:1})]),(0,a.createElementVNode)("div",m,[(0,a.createElementVNode)("div",d,[((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)((0,a.unref)(v).files,((e,t)=>((0,a.openBlock)(),(0,a.createElementBlock)("div",{key:t},[(0,a.createElementVNode)("div",{class:(0,a.normalizeClass)("install-package-card mb "+((0,a.unref)(v).fileName===e.name?"center-item-active":"")),onClick:t=>k(e)},[(0,a.createVNode)(l,{"icon-class":"ops-offline-install",class:"icon-size-s mr"}),(0,a.createElementVNode)("div",h,(0,a.toDisplayString)(e.name),1)],10,g)])))),128))])]),(0,a.createVNode)(i,{"mask-closable":!1,visible:(0,a.unref)(w).show,title:(0,a.unref)(w).title,"modal-style":{width:"450px"},onOk:b,onCancel:y},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(s,{model:(0,a.unref)(w).form,ref:(e,t)=>{t["formRef"]=e,N.value=e},"auto-label-width":"",rules:(0,a.unref)(w).rules},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(o,{field:"path",label:e.$t("components.OfflineInstall.5mpn1nwaz980"),"validate-trigger":"blur",rules:[{required:!0,message:e.$t("components.OfflineInstall.5mpn1nwazks0")}]},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(r,{modelValue:(0,a.unref)(w).form.path,"onUpdate:modelValue":t[0]||(t[0]=e=>(0,a.unref)(w).form.path=e),placeholder:e.$t("components.OfflineInstall.5mpn1nwazd40")},null,8,["modelValue","placeholder"])])),_:1},8,["label","rules"])])),_:1},8,["model","rules"])])),_:1},8,["visible","title"])])}}}),w=n(83744);const C=(0,w.Z)(v,[["__scopeId","data-v-378fa843"]]);var k=C}}]);
//# sourceMappingURL=8900.6cf0e91b.js.map