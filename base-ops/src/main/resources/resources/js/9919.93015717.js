"use strict";(self["webpackChunkweb_ui"]=self["webpackChunkweb_ui"]||[]).push([[9919],{89965:function(e,t,o){o.d(t,{AH:function(){return f},Bd:function(){return p},C7:function(){return E},DG:function(){return L},Du:function(){return q},H7:function(){return J},Iz:function(){return U},J6:function(){return _},Jh:function(){return v},NQ:function(){return I},QS:function(){return b},Qt:function(){return k},R7:function(){return $},Rq:function(){return u},SB:function(){return g},SW:function(){return z},UL:function(){return m},Up:function(){return y},WK:function(){return C},Yn:function(){return R},gp:function(){return s},j9:function(){return F},nB:function(){return B},qR:function(){return x},qo:function(){return h},sZ:function(){return D},v$:function(){return c},vs:function(){return r},w0:function(){return O},wB:function(){return S},x9:function(){return Z},xl:function(){return V},yA:function(){return d},yf:function(){return N}});var n=o(15784),a=o(9669),i=o.n(a),l=o(90989);const r=(e,t,o,n)=>i().get(`/modeling/dataflow/dataSourceDb/getTablesBySchema/${e}/${t}/${o}`,n||{}),d=(e,t)=>i().get(`/modeling/dataflow/dataSourceDb/getFieldsByTable/${e}`,t||{}),s=e=>i().get("/modeling/dataflow/list",{params:e}),c=e=>i().post("/modeling/dataflow/add",e||{}),u=e=>i()["delete"](`/modeling/dataflow/delete/${e}`),m=e=>i().put("/modeling/dataflow/edit",e||{}),p=e=>i().get(`/modeling/dataflow/getById/${e}`),g=(e,t)=>i().get(`/modeling/dataflow/dataSourceDb/getSchemaByClusterNodeId/${e}/${t}`,e||{}),f=e=>i().post("/modeling/dataflow/getSql",e||{}),v=e=>i().post("/modeling/dataflow/runSql",e||{});let w=!0;const y=(e,t,o)=>new Promise((a=>{w&&(w=!1,i().put("/modeling/dataflow/edit",{id:e,operatorContent:JSON.stringify(t)}).then((e=>{a(!0),w=!0,200===Number(e.code)&&(o||n.Z.success({content:l.Z.global.t("modeling.dy_common.saveSuccess")}))})).catch((()=>{a(!1),o||n.Z.error({content:l.Z.global.t("modeling.dy_common.saveFailed")}),w=!0})))})),h=e=>i().get("/modeling/dataflow/dataSourceDb/list",e||{}),C=e=>i().post("/modeling/dataflow/getResultFieldsByOperator",e||{}),z=e=>i().post("/modeling/dataflow/visualization/params/add",e||{}),N=e=>i().put("/modeling/dataflow/visualization/params/edit",e||{}),$=e=>i()["delete"](`/modeling/dataflow/visualization/params/delete/${e}`),V=e=>i().post("/modeling/dataflow/visualization/params/generateChart",e||{}),B=(e,t)=>i().get(`/modeling/dataflow/visualization/params/getListByOperatorId/${e}`,t||{}),x=e=>i().post("/modeling/dataflow/visualization/snapshot/add",e||{}),b=(e,t)=>i().get(`/modeling/dataflow/visualization/snapshot/getListByDataFlowId/${e}`,t||{}),k=e=>i()["delete"](`/modeling/dataflow/visualization/snapshot/delete/${e}`),D=(e,t)=>i().get(`/modeling/dataflow/visualization/report/getListByDataFlowId/${e}`,{params:t||{}}),S=e=>i().post("/modeling/dataflow/visualization/report/add",e||{}),E=e=>i().put("/modeling/dataflow/visualization/report/update",e||{}),U=e=>i()["delete"](`/modeling/dataflow/visualization/report/delete/${e}`),q=e=>i().get(`/modeling/dataflow/visualization/report/share/getByReportId/${e}`),R=(e,t)=>i().get(`/modeling/dataflow/visualization/customDimension/getListByOperatorId/${e}`,{params:t||{}}),_=e=>i().post("/modeling/dataflow/visualization/customDimension/add",e||{}),I=e=>i().put("/modeling/dataflow/visualization/customDimension/edit",e||{}),J=e=>i()["delete"](`/modeling/dataflow/visualization/customDimension/delete/${e}`),Z=(e,t)=>i().get(`/modeling/visualization/report/share/getMapGeo/${e}`,t||{}),L=e=>i().post("/modeling/dataflow/visualization/params/uploadGeo",e||{}),O=(e,t)=>i().get(`/modeling/dataflow/visualization/params/getGeo/${e}`,{params:t||{}}),F=e=>i()["delete"](`/modeling/dataflow/visualization/params/deleteGeo/${e}`)},83744:function(e,t){t.Z=(e,t)=>{const o=e.__vccOpts||e;for(const[n,a]of t)o[n]=a;return o}},9919:function(e,t,o){o.r(t),o.d(t,{default:function(){return D}});o(57658);var n=o(70821),a=o(15784),i=o(42119),l=o(89965),r=o(57330);const d={class:"cu-report"},s={class:"draw",id:"content"},c={class:"grid-item-content"},u=["src"],m={class:"config"},p={class:"config-item base"},g={class:"ci-title"},f={class:"config-row"},v={class:"text"},w={class:"value"},y={class:"config-row"},h={class:"text"},C={class:"value"},z={class:"config-item snapshot-list"},N={class:"ci-title"},$={class:"snapshot-list-content"},V={class:"snapshot-item"},B=["src","onClick"];var x=(0,n.defineComponent)({props:{snapshotList:{type:Array,required:!0}},emits:["success"],setup(e,{expose:t,emit:o}){const x=e,{t:b}=(0,r.QT)(),k=((0,i.yj)(),(0,n.computed)((()=>x.snapshotList.filter((e=>-1===I.value.findIndex((t=>Number(t.i)===Number(e.id)))))))),D=(0,n.ref)(!1),S=(e,t)=>{D.value=!0,"create"===e?(I.value=[],U.name="",U.type="",U.id=""):"update"===e&&(I.value=t&&t.paramsJson?JSON.parse(t.paramsJson):[],U.name=t.name,U.type=t.type,U.id=t.id)},E=()=>{D.value=!1},U=(0,n.reactive)({name:"",type:"",id:""}),q=120,R=20,_=10,I=(0,n.ref)([]),J=(0,n.ref)(),Z=e=>{I.value.push({x:I.value.length*R%(q||12),y:I.value.length+(q||12),w:R,h:_,i:e.id,imgBase64:e.imgBase64,chartDataJson:e.chartDataJson?e.chartDataJson:{}}),J.value.layoutUpdate()},L=e=>{const t=I.value.map((e=>e.i)).indexOf(e);I.value.splice(t,1),J.value.layoutUpdate()},O=()=>{if(!U.name)return void a.Z.error({content:b("modeling.components.CUReport.5m7iq3dyzvw0")});if(!U.type)return void a.Z.error({content:b("modeling.components.CUReport.5m7iq3dz0140")});let e={name:U.name,dataFlowId:window.$wujie?.props.data.id,paramsJson:JSON.stringify(I.value),type:U.type};const t=e=>{200===Number(e.code)&&(a.Z.success({content:b("modeling.components.CUReport.5m7iq3dz09k0")}),E(),o("success"))};U.id?(e.id=U.id,(0,l.C7)(e).then((e=>t(e)))):(0,l.wB)(e).then((e=>t(e)))};return t({open:S}),(e,t)=>{const o=(0,n.resolveComponent)("a-doption"),a=(0,n.resolveComponent)("a-dropdown"),i=(0,n.resolveComponent)("grid-item"),l=(0,n.resolveComponent)("grid-layout"),r=(0,n.resolveComponent)("a-input"),x=(0,n.resolveComponent)("a-option"),b=(0,n.resolveComponent)("a-select"),S=(0,n.resolveComponent)("a-tooltip"),R=(0,n.resolveComponent)("a-modal");return(0,n.openBlock)(),(0,n.createBlock)(R,{class:"cu-report-container",visible:D.value,title:e.$t("modeling.components.CUReport.5m7iq3dyy200"),"ok-text":e.$t("modeling.components.CUReport.5m7iq3dyzf80"),onCancel:E,onOk:O,"body-style":"padding: 0; width: 100%;","modal-style":{minWidth:"1480px"}},{default:(0,n.withCtx)((()=>[(0,n.createElementVNode)("div",d,[(0,n.createElementVNode)("div",s,[(0,n.createVNode)(l,{ref:(e,t)=>{t["gridlayoutRef"]=e,J.value=e},layout:I.value,"onUpdate:layout":t[0]||(t[0]=e=>I.value=e),"col-num":q,"row-height":10,"is-draggable":!0,"is-resizable":!0,"vertical-compact":!0,"use-css-transforms":!0},{default:(0,n.withCtx)((()=>[((0,n.openBlock)(!0),(0,n.createElementBlock)(n.Fragment,null,(0,n.renderList)(I.value,(t=>((0,n.openBlock)(),(0,n.createBlock)(i,{key:t.i,x:t.x,y:t.y,w:t.w,h:t.h,i:t.i,style:{border:"1px solid blue"}},{default:(0,n.withCtx)((()=>[(0,n.createVNode)(a,{trigger:"contextMenu",alignPoint:"",style:{display:"block"}},{content:(0,n.withCtx)((()=>[(0,n.createVNode)(o,{onClick:e=>L(t.i)},{default:(0,n.withCtx)((()=>[(0,n.createTextVNode)((0,n.toDisplayString)(e.$t("modeling.components.CUReport.5m7iq3dyzls0")),1)])),_:2},1032,["onClick"])])),default:(0,n.withCtx)((()=>[(0,n.createElementVNode)("div",c,[(0,n.createElementVNode)("img",{src:t.imgBase64},null,8,u)])])),_:2},1024)])),_:2},1032,["x","y","w","h","i"])))),128))])),_:1},8,["layout"])]),(0,n.createElementVNode)("div",m,[(0,n.createElementVNode)("div",p,[(0,n.createElementVNode)("div",g,(0,n.toDisplayString)(e.$t("modeling.components.CUReport.5m7iq3dyzps0")),1),(0,n.createElementVNode)("div",f,[(0,n.createElementVNode)("div",v,(0,n.toDisplayString)(e.$t("modeling.components.CUReport.5m7iq3dyzsg0")),1),(0,n.createElementVNode)("div",w,[(0,n.createVNode)(r,{"max-length":140,"show-word-limit":"",modelValue:(0,n.unref)(U).name,"onUpdate:modelValue":t[1]||(t[1]=e=>(0,n.unref)(U).name=e),placeholder:e.$t("modeling.components.CUReport.5m7iq3dyzvw0")},null,8,["modelValue","placeholder"])])]),(0,n.createElementVNode)("div",y,[(0,n.createElementVNode)("div",h,(0,n.toDisplayString)(e.$t("modeling.components.CUReport.5m7iq3dyzyo0")),1),(0,n.createElementVNode)("div",C,[(0,n.createVNode)(b,{modelValue:(0,n.unref)(U).type,"onUpdate:modelValue":t[2]||(t[2]=e=>(0,n.unref)(U).type=e),placeholder:e.$t("modeling.components.CUReport.5m7iq3dz0140")},{default:(0,n.withCtx)((()=>[(0,n.createVNode)(x,{value:1},{default:(0,n.withCtx)((()=>[(0,n.createTextVNode)((0,n.toDisplayString)(e.$t("modeling.components.CUReport.5m7iq3dz0400")),1)])),_:1})])),_:1},8,["modelValue","placeholder"])])])]),(0,n.createElementVNode)("div",z,[(0,n.createElementVNode)("div",N,(0,n.toDisplayString)(e.$t("modeling.components.CUReport.5m7iq3dz0780")),1),(0,n.createElementVNode)("div",$,[((0,n.openBlock)(!0),(0,n.createElementBlock)(n.Fragment,null,(0,n.renderList)((0,n.unref)(k),((e,t)=>((0,n.openBlock)(),(0,n.createBlock)(S,{key:`s${t}`,content:e.name},{default:(0,n.withCtx)((()=>[(0,n.createElementVNode)("div",V,[(0,n.createElementVNode)("img",{src:e.imgBase64,draggable:"true",unselectable:"on",onClick:t=>Z(e)},null,8,B)])])),_:2},1032,["content"])))),128))])])])])])),_:1},8,["visible","title","ok-text"])}}}),b=o(83744);const k=(0,b.Z)(x,[["__scopeId","data-v-7aa9987c"]]);var D=k}}]);
//# sourceMappingURL=9919.93015717.js.map