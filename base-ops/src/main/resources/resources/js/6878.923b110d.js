"use strict";(self["webpackChunkweb_ui"]=self["webpackChunkweb_ui"]||[]).push([[6878,9451],{59451:function(e,t,o){o.r(t);var n=o(47327);class a{constructor(){(0,n.Z)(this,"_keyStr","ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=")}encode(e){let t,o,n,a,l,i,r,d="",s=0;e=this._utf8_encode(e);while(s<e.length)t=e.charCodeAt(s++),o=e.charCodeAt(s++),n=e.charCodeAt(s++),a=t>>2,l=(3&t)<<4|o>>4,i=(15&o)<<2|n>>6,r=63&n,isNaN(o)?i=r=64:isNaN(n)&&(r=64),d=d+this._keyStr.charAt(a)+this._keyStr.charAt(l)+this._keyStr.charAt(i)+this._keyStr.charAt(r);return d}decode(e){let t,o,n,a,l,i,r,d="",s=0;e=e.replace(/[^A-Za-z0-9]/g,"");while(s<e.length)a=this._keyStr.indexOf(e.charAt(s++)),l=this._keyStr.indexOf(e.charAt(s++)),i=this._keyStr.indexOf(e.charAt(s++)),r=this._keyStr.indexOf(e.charAt(s++)),t=a<<2|l>>4,o=(15&l)<<4|i>>2,n=(3&i)<<6|r,d+=String.fromCharCode(t),64!=i&&(d+=String.fromCharCode(o)),64!=r&&(d+=String.fromCharCode(n));return d=this._utf8_decode(d),d}_utf8_encode(e){e=e.replace(/\r\n/g,"\n");let t="";for(let o=0;o<e.length;o++){const n=e.charCodeAt(o);n<128?t+=String.fromCharCode(n):n>127&&n<2048?(t+=String.fromCharCode(n>>6|192),t+=String.fromCharCode(63&n|128)):(t+=String.fromCharCode(n>>12|224),t+=String.fromCharCode(n>>6&63|128),t+=String.fromCharCode(63&n|128))}return t}_utf8_decode(e){let t="",o=0,n=0,a=0,l=0;while(o<e.length)n=e.charCodeAt(o),n<128?(t+=String.fromCharCode(n),o++):n>191&&n<224?(a=e.charCodeAt(o+1),t+=String.fromCharCode((31&n)<<6|63&a),o+=2):(a=e.charCodeAt(o+1),l=e.charCodeAt(o+2),t+=String.fromCharCode((15&n)<<12|(63&a)<<6|63&l),o+=3);return t}}t["default"]=a},9919:function(e,t,o){o.r(t),o.d(t,{default:function(){return $}});o(57658);var n=o(70821),a=o(15784),l=o(42119),i=o(89965),r=o(57330);const d={class:"cu-report"},s={class:"draw",id:"content"},c={class:"grid-item-content"},m=["src"],u={class:"config"},p={class:"config-item base"},v={class:"ci-title"},h={class:"config-row"},f={class:"text"},g={class:"value"},C={class:"config-row"},y={class:"text"},x={class:"value"},w={class:"config-item snapshot-list"},N={class:"ci-title"},k={class:"snapshot-list-content"},V={class:"snapshot-item"},b=["src","onClick"];var S=(0,n.defineComponent)({props:{snapshotList:{type:Array,required:!0}},emits:["success"],setup(e,{expose:t,emit:o}){const S=e,{t:_}=(0,r.QT)(),E=((0,l.yj)(),(0,n.computed)((()=>S.snapshotList.filter((e=>-1===q.value.findIndex((t=>Number(t.i)===Number(e.id)))))))),$=(0,n.ref)(!1),B=(e,t)=>{$.value=!0,"create"===e?(q.value=[],U.name="",U.type="",U.id=""):"update"===e&&(q.value=t&&t.paramsJson?JSON.parse(t.paramsJson):[],U.name=t.name,U.type=t.type,U.id=t.id)},z=()=>{$.value=!1},U=(0,n.reactive)({name:"",type:"",id:""}),A=120,R=20,D=10,q=(0,n.ref)([]),O=(0,n.ref)(),T=e=>{q.value.push({x:q.value.length*R%(A||12),y:q.value.length+(A||12),w:R,h:D,i:e.id,imgBase64:e.imgBase64,chartDataJson:e.chartDataJson?e.chartDataJson:{}}),O.value.layoutUpdate()},Z=e=>{const t=q.value.map((e=>e.i)).indexOf(e);q.value.splice(t,1),O.value.layoutUpdate()},j=()=>{if(!U.name)return void a.Z.error({content:_("modeling.components.CUReport.5m7iq3dyzvw0")});if(!U.type)return void a.Z.error({content:_("modeling.components.CUReport.5m7iq3dz0140")});let e={name:U.name,dataFlowId:window.$wujie?.props.data.id,paramsJson:JSON.stringify(q.value),type:U.type};const t=e=>{200===Number(e.code)&&(a.Z.success({content:_("modeling.components.CUReport.5m7iq3dz09k0")}),z(),o("success"))};U.id?(e.id=U.id,(0,i.C7)(e).then((e=>t(e)))):(0,i.wB)(e).then((e=>t(e)))};return t({open:B}),(e,t)=>{const o=(0,n.resolveComponent)("a-doption"),a=(0,n.resolveComponent)("a-dropdown"),l=(0,n.resolveComponent)("grid-item"),i=(0,n.resolveComponent)("grid-layout"),r=(0,n.resolveComponent)("a-input"),S=(0,n.resolveComponent)("a-option"),_=(0,n.resolveComponent)("a-select"),B=(0,n.resolveComponent)("a-tooltip"),R=(0,n.resolveComponent)("a-modal");return(0,n.openBlock)(),(0,n.createBlock)(R,{class:"cu-report-container",visible:$.value,title:e.$t("modeling.components.CUReport.5m7iq3dyy200"),"ok-text":e.$t("modeling.components.CUReport.5m7iq3dyzf80"),onCancel:z,onOk:j,"body-style":"padding: 0; width: 100%;","modal-style":{minWidth:"1480px"}},{default:(0,n.withCtx)((()=>[(0,n.createElementVNode)("div",d,[(0,n.createElementVNode)("div",s,[(0,n.createVNode)(i,{ref:(e,t)=>{t["gridlayoutRef"]=e,O.value=e},layout:q.value,"onUpdate:layout":t[0]||(t[0]=e=>q.value=e),"col-num":A,"row-height":10,"is-draggable":!0,"is-resizable":!0,"vertical-compact":!0,"use-css-transforms":!0},{default:(0,n.withCtx)((()=>[((0,n.openBlock)(!0),(0,n.createElementBlock)(n.Fragment,null,(0,n.renderList)(q.value,(t=>((0,n.openBlock)(),(0,n.createBlock)(l,{key:t.i,x:t.x,y:t.y,w:t.w,h:t.h,i:t.i,style:{border:"1px solid blue"}},{default:(0,n.withCtx)((()=>[(0,n.createVNode)(a,{trigger:"contextMenu",alignPoint:"",style:{display:"block"}},{content:(0,n.withCtx)((()=>[(0,n.createVNode)(o,{onClick:e=>Z(t.i)},{default:(0,n.withCtx)((()=>[(0,n.createTextVNode)((0,n.toDisplayString)(e.$t("modeling.components.CUReport.5m7iq3dyzls0")),1)])),_:2},1032,["onClick"])])),default:(0,n.withCtx)((()=>[(0,n.createElementVNode)("div",c,[(0,n.createElementVNode)("img",{src:t.imgBase64},null,8,m)])])),_:2},1024)])),_:2},1032,["x","y","w","h","i"])))),128))])),_:1},8,["layout"])]),(0,n.createElementVNode)("div",u,[(0,n.createElementVNode)("div",p,[(0,n.createElementVNode)("div",v,(0,n.toDisplayString)(e.$t("modeling.components.CUReport.5m7iq3dyzps0")),1),(0,n.createElementVNode)("div",h,[(0,n.createElementVNode)("div",f,(0,n.toDisplayString)(e.$t("modeling.components.CUReport.5m7iq3dyzsg0")),1),(0,n.createElementVNode)("div",g,[(0,n.createVNode)(r,{"max-length":140,"show-word-limit":"",modelValue:(0,n.unref)(U).name,"onUpdate:modelValue":t[1]||(t[1]=e=>(0,n.unref)(U).name=e),placeholder:e.$t("modeling.components.CUReport.5m7iq3dyzvw0")},null,8,["modelValue","placeholder"])])]),(0,n.createElementVNode)("div",C,[(0,n.createElementVNode)("div",y,(0,n.toDisplayString)(e.$t("modeling.components.CUReport.5m7iq3dyzyo0")),1),(0,n.createElementVNode)("div",x,[(0,n.createVNode)(_,{modelValue:(0,n.unref)(U).type,"onUpdate:modelValue":t[2]||(t[2]=e=>(0,n.unref)(U).type=e),placeholder:e.$t("modeling.components.CUReport.5m7iq3dz0140")},{default:(0,n.withCtx)((()=>[(0,n.createVNode)(S,{value:1},{default:(0,n.withCtx)((()=>[(0,n.createTextVNode)((0,n.toDisplayString)(e.$t("modeling.components.CUReport.5m7iq3dz0400")),1)])),_:1})])),_:1},8,["modelValue","placeholder"])])])]),(0,n.createElementVNode)("div",w,[(0,n.createElementVNode)("div",N,(0,n.toDisplayString)(e.$t("modeling.components.CUReport.5m7iq3dz0780")),1),(0,n.createElementVNode)("div",k,[((0,n.openBlock)(!0),(0,n.createElementBlock)(n.Fragment,null,(0,n.renderList)((0,n.unref)(E),((e,t)=>((0,n.openBlock)(),(0,n.createBlock)(B,{key:`s${t}`,content:e.name},{default:(0,n.withCtx)((()=>[(0,n.createElementVNode)("div",V,[(0,n.createElementVNode)("img",{src:e.imgBase64,draggable:"true",unselectable:"on",onClick:t=>T(e)},null,8,b)])])),_:2},1032,["content"])))),128))])])])])])),_:1},8,["visible","title","ok-text"])}}}),_=o(83744);const E=(0,_.Z)(S,[["__scopeId","data-v-7aa9987c"]]);var $=E},73305:function(e,t,o){o.r(t),o.d(t,{default:function(){return c}});var n=o(70821),a=o(44835),l=o(89965);const i={class:"chart-container"};var r=(0,n.defineComponent)({setup(e,{expose:t}){const o=(0,n.ref)(!1),r=(0,n.ref)(),d=e=>{o.value=!0,(0,n.nextTick)((()=>{m(e)}))},s=()=>{o.value=!1};let c;const m=e=>{c=a.S1(r.value),c.showLoading(),e.series&&Array.isArray(e.series)&&e.series.length>0&&e.series[0]&&"map"===e.series[0].type&&e.series[0].map?(0,l.x9)(e.series[0].map).then((t=>{a.je(t.mapData.name,t.mapData.data),c.hideLoading(),c&&c.setOption(e,!0)})):(c.hideLoading(),c&&c.setOption(e,!0))},u=()=>{c&&c.clear()},p=()=>{u()};return t({open:d}),(e,t)=>{const a=(0,n.resolveComponent)("a-modal");return(0,n.openBlock)(),(0,n.createBlock)(a,{class:"cu-snapshot-container",visible:o.value,title:e.$t("modeling.components.CUSnapshot.5m7iplopyjo0"),footer:!1,onCancel:s,onBeforeClose:p,"body-style":"padding: 0; width: 100%;","modal-style":{minWidth:"1480px"}},{default:(0,n.withCtx)((()=>[(0,n.createElementVNode)("div",i,[(0,n.createElementVNode)("div",{class:"chart-dom",ref:(e,t)=>{t["chartDomRef"]=e,r.value=e}},null,512)])])),_:1},8,["visible","title"])}}}),d=o(83744);const s=(0,d.Z)(r,[["__scopeId","data-v-5924f666"]]);var c=s},10490:function(e,t,o){o.r(t),o.d(t,{default:function(){return c}});var n=o(70821),a=o(15784),l=o(59451),i=o(57330),r=(0,n.defineComponent)({setup(e,{expose:t}){const{t:o}=(0,i.QT)(),r=new l["default"],d=(0,n.ref)(!1),s=(0,n.ref)(""),c=e=>{let t=window.location.href.split("modeling/dataflow")[0];t.includes("#/")&&(t=window.location.href.split("#/")[0]),s.value=`${t}modeling/visualization/report/share/${r.encode(e.id+"|d1a2ay1k0|")}`,d.value=!0},m=()=>{d.value=!1},u=()=>{const e=s.value,t=document.createElement("input");t.value=e,document.body.appendChild(t),t.select(),document.execCommand("copy"),document.body.removeChild(t),a.Z.success({content:o("modeling.components.Share.5m7ipfzhxd40")})},p=()=>{window.open(s.value,"_blank")};return t({open:c}),(e,t)=>{const o=(0,n.resolveComponent)("a-modal");return(0,n.openBlock)(),(0,n.createBlock)(o,{class:"share-container",visible:d.value,title:e.$t("modeling.components.Share.5m7ipfzhwh40"),"ok-text":e.$t("modeling.components.Share.5m7ipfzhx540"),"cancel-text":e.$t("modeling.components.Share.5m7ipfzhx9g0"),onCancel:m,onOk:u,width:"700px"},{default:(0,n.withCtx)((()=>[(0,n.createElementVNode)("div",{class:"share-content",onClick:p},(0,n.toDisplayString)(s.value),1)])),_:1},8,["visible","title","ok-text","cancel-text"])}}}),d=o(83744);const s=(0,d.Z)(r,[["__scopeId","data-v-6604c63e"]]);var c=s},26878:function(e,t,o){o.r(t),o.d(t,{default:function(){return V}});var n=o(70821),a=o(9919),l=o(73305),i=o(89965),r=o(42119),d=o(15784),s=o(10490),c=o(57330);const m={style:{padding:"20px","box-sizing":"border-box"}},u={class:"visual-display-list"},p=["onClick"],v={class:"cover"},h=["src"],f={class:"name"},g={class:"pane-2"},C={class:"flex-row mb"},y={style:{"margin-left":"auto"}},x={class:"visual-display-list report-list"};var w=(0,n.defineComponent)({setup(e,{expose:t}){const{t:o}=(0,c.QT)(),w=((0,r.yj)(),(0,n.ref)(!1)),N=(0,n.ref)([]),k=(0,n.ref)("1"),V=e=>{w.value=!0,e||(N.value=[]),_(),D()},b=()=>{w.value=!1},S=(0,n.reactive)({list:[],loading:!1}),_=()=>{S.loading=!0,(0,i.QS)(Number(window.$wujie?.props.data.id)).then((e=>{S.loading=!1,200===Number(e.code)&&(S.list=e.data)}))},E=(0,n.ref)(),$=e=>{E.value?.open(JSON.parse(e.chartDataJson))},B=e=>{(0,i.Qt)(e.id).then((e=>{200===Number(e.code)&&(d.Z.success({content:o("modeling.visual-list.index.5m7iox8okyc0")}),_())}))},z=(0,n.computed)((()=>[{title:o("modeling.visual-list.index.5m7iox8ol0w0"),dataIndex:"name"},{title:o("modeling.visual-list.index.5m7iox8ol3k0"),dataIndex:"typeName"},{title:o("modeling.visual-list.index.5m7iox8ol680"),dataIndex:"createTime"},{title:o("modeling.visual-list.index.5m7iox8ol8o0"),dataIndex:"updateTime"},{title:o("modeling.visual-list.index.5m7iox8olb00"),slotName:"operation",width:180}])),U=(0,n.reactive)({name:""}),A=(0,n.reactive)({list:[],loading:!1,selectedRowKeys:[],page:{pageNum:1,current:1,pageSize:10,total:10,size:10}}),R=e=>{A.page.pageNum=e,A.page.current=e,D()},D=()=>{A.loading=!0;let e={...A.page};U.name&&(e.name=U.name),(0,i.sZ)(Number(window.$wujie?.props.data.id),e).then((e=>{A.loading=!1,200===Number(e.code)&&(e.data.forEach((e=>e.typeName=1===e.type?o("modeling.visual-list.index.5m7iox8oldc0"):"")),A.list=e.data,A.page.total=e.data&&e.data.total?e.data.total:10)}))},q=(0,n.ref)(),O=(e,t)=>{q.value?.open(e,t)},T=(0,n.ref)(),Z=e=>{T.value?.open(e)};return t({open:V}),(e,t)=>{const o=(0,n.resolveComponent)("a-doption"),i=(0,n.resolveComponent)("a-dropdown"),r=(0,n.resolveComponent)("a-tab-pane"),d=(0,n.resolveComponent)("a-input-search"),c=(0,n.resolveComponent)("icon-plus"),N=(0,n.resolveComponent)("a-button"),V=(0,n.resolveComponent)("icon-edit"),_=(0,n.resolveComponent)("icon-share-alt"),j=(0,n.resolveComponent)("a-table"),I=(0,n.resolveComponent)("a-tabs"),J=(0,n.resolveComponent)("a-modal");return(0,n.openBlock)(),(0,n.createElementBlock)(n.Fragment,null,[(0,n.createVNode)(J,{class:"visual-list-container",visible:w.value,title:e.$t("modeling.visual-list.index.5m7iox8oj6k0"),footer:!1,onCancel:b,"body-style":"padding: 0; width: 100%;","modal-style":{minWidth:"1480px"}},{default:(0,n.withCtx)((()=>[(0,n.createElementVNode)("div",m,[(0,n.createVNode)(I,{"default-active-key":"1",modelValue:k.value,"onUpdate:modelValue":t[2]||(t[2]=e=>k.value=e)},{default:(0,n.withCtx)((()=>[(0,n.createVNode)(r,{key:"1",title:e.$t("modeling.visual-list.index.5m7iox8ok400")},{default:(0,n.withCtx)((()=>[(0,n.createElementVNode)("div",u,[((0,n.openBlock)(!0),(0,n.createElementBlock)(n.Fragment,null,(0,n.renderList)((0,n.unref)(S).list,((t,a)=>((0,n.openBlock)(),(0,n.createBlock)(i,{trigger:"contextMenu",alignPoint:"",style:{display:"block"},key:`vditem${a}`},{content:(0,n.withCtx)((()=>[(0,n.createVNode)(o,{onClick:e=>B(t)},{default:(0,n.withCtx)((()=>[(0,n.createTextVNode)((0,n.toDisplayString)(e.$t("modeling.visual-list.index.5m7iox8oka00")),1)])),_:2},1032,["onClick"])])),default:(0,n.withCtx)((()=>[(0,n.createElementVNode)("div",{class:"vd-item",onClick:e=>$(t)},[(0,n.createElementVNode)("div",v,[(0,n.createElementVNode)("img",{src:t.imgBase64},null,8,h)]),(0,n.createElementVNode)("div",f,(0,n.toDisplayString)(t.name),1)],8,p)])),_:2},1024)))),128))])])),_:1},8,["title"]),(0,n.createVNode)(r,{key:"2",title:e.$t("modeling.visual-list.index.5m7iox8okdw0")},{default:(0,n.withCtx)((()=>[(0,n.createElementVNode)("div",g,[(0,n.createElementVNode)("div",C,[(0,n.createVNode)(d,{"max-length":140,modelValue:(0,n.unref)(U).name,"onUpdate:modelValue":t[0]||(t[0]=e=>(0,n.unref)(U).name=e),style:{width:"250px"},placeholder:e.$t("modeling.visual-list.index.5m7iox8okgs0"),"allow-clear":"","search-button":"",onSearch:D,onClear:D},null,8,["modelValue","placeholder"]),(0,n.createElementVNode)("div",y,[(0,n.createVNode)(N,{type:"primary",onClick:t[1]||(t[1]=e=>O("create"))},{icon:(0,n.withCtx)((()=>[(0,n.createVNode)(c)])),default:(0,n.withCtx)((()=>[(0,n.createTextVNode)(" "+(0,n.toDisplayString)(e.$t("modeling.visual-list.index.5m7iox8okmg0")),1)])),_:1})])]),(0,n.createElementVNode)("div",x,[(0,n.createVNode)(j,{class:"d-a-table-row",data:(0,n.unref)(A).list,columns:(0,n.unref)(z),bordered:!1,pagination:(0,n.unref)(A).page,loading:(0,n.unref)(A).loading,rowKey:"id",onPageChange:R},{operation:(0,n.withCtx)((({record:t})=>[(0,n.createVNode)(N,{size:"mini",type:"text",onClick:e=>O("update",t)},{icon:(0,n.withCtx)((()=>[(0,n.createVNode)(V)])),default:(0,n.withCtx)((()=>[(0,n.createTextVNode)((0,n.toDisplayString)(e.$t("modeling.visual-list.index.5m7iox8okpk0")),1)])),_:2},1032,["onClick"]),(0,n.createVNode)(N,{size:"mini",type:"text",onClick:e=>Z(t)},{icon:(0,n.withCtx)((()=>[(0,n.createVNode)(_)])),default:(0,n.withCtx)((()=>[(0,n.createTextVNode)((0,n.toDisplayString)(e.$t("modeling.visual-list.index.5m7iox8oksk0")),1)])),_:2},1032,["onClick"])])),_:1},8,["data","columns","pagination","loading"])])])])),_:1},8,["title"])])),_:1},8,["modelValue"])])])),_:1},8,["visible","title"]),(0,n.createVNode)(a["default"],{"snapshot-list":(0,n.unref)(S).list,ref:(e,t)=>{t["cuReportRef"]=e,q.value=e},onSuccess:D},null,8,["snapshot-list"]),(0,n.createVNode)(l["default"],{ref:(e,t)=>{t["cuSnapshotRef"]=e,E.value=e}},null,512),(0,n.createVNode)(s["default"],{ref:(e,t)=>{t["shareRef"]=e,T.value=e}},null,512)],64)}}}),N=o(83744);const k=(0,N.Z)(w,[["__scopeId","data-v-5aaf31fb"]]);var V=k},47327:function(e,t,o){function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function a(e,t){if("object"!==n(e)||null===e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var a=o.call(e,t||"default");if("object"!==n(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function l(e){var t=a(e,"string");return"symbol"===n(t)?t:String(t)}function i(e,t,o){return t=l(t),t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}o.d(t,{Z:function(){return i}})}}]);
//# sourceMappingURL=6878.923b110d.js.map