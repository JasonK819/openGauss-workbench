"use strict";(self["webpackChunkweb_ui"]=self["webpackChunkweb_ui"]||[]).push([[2389,7354],{39518:function(e,a,t){t.d(a,{$4:function(){return y},Ac:function(){return u},BL:function(){return h},C4:function(){return z},DF:function(){return M},GD:function(){return q},IW:function(){return T},K4:function(){return $},Kf:function(){return B},LR:function(){return o},Lf:function(){return r},Ox:function(){return L},PK:function(){return i},R1:function(){return _},Sv:function(){return A},T2:function(){return p},T4:function(){return E},TL:function(){return b},TY:function(){return R},Uw:function(){return D},We:function(){return U},YQ:function(){return x},Ye:function(){return f},ZA:function(){return Z},_V:function(){return m},c0:function(){return c},gi:function(){return N},h:function(){return V},jQ:function(){return F},jV:function(){return S},nT:function(){return k},sT:function(){return v},tA:function(){return s},ur:function(){return C},w3:function(){return g},xj:function(){return d},y6:function(){return P},zs:function(){return I},zx:function(){return w}});var n=t(9669),l=t.n(n);const r=()=>l().get("encryption/getKey"),o=e=>l().post("opsCluster/download",e||{}),c=e=>l().get(`opsCluster/env/${e}`),u=e=>l().post("opsCluster/install",e),s=e=>l().post("opsCluster/import",e),i=e=>l().post("opsCluster/quickInstall",e),d=e=>l().get("opsCluster/check",{params:e}),g=e=>l().post("opsCluster/uninstall",e),p=e=>l().get("opsCluster/hasName",{params:e}),m=()=>l().get("opsCluster/listCluster"),f=e=>l().post("opsCluster/ssh",e),k=e=>l().get("opsCluster/monitor",{params:e}),h=e=>l().post("opsCluster/start",e),v=e=>l().post("opsCluster/stop",e),C=e=>l().post("opsCluster/restart",e),b=e=>l().get("opsCluster/listHost",{params:e}),V=e=>l().get(e?`opsCluster/listInstallPackage?path=${e}`:"opsCluster/listInstallPackage"),w=()=>l().get("host/listAll"),x=e=>l().get(`hostUser/listAllWithoutRoot/${e}`),y=()=>l().get("az/listAll"),M=e=>l().get("opsCluster/logPath",{params:e}),N=e=>l().get("opsCluster/ls",{params:e}),D=e=>l().get("opsCluster/slowSql",{params:e}),q=e=>l().get("opsCluster/auditLog",{params:e}),A=e=>l().get("opsCluster/download",{params:e}),P=e=>l().get("wdr/list",{params:e}),_=e=>l().post("wdr/generate",e),I=e=>l()["delete"]("wdr/del/"+e),L=e=>l().get("wdr/createSnapshot",{params:e}),$=e=>l().get("wdr/downloadWdr",{params:e}),z=e=>l().get("wdr/listSnapshot",{params:e}),T=e=>l().post("backup/backup",e),E=e=>l().get("backup/page",{params:e}),B=(e,a)=>l().post("backup/recover/"+e,a),S=e=>l()["delete"]("backup/del/"+e),U=e=>l().get("installPackageManager/page",{params:e}),R=e=>l()["delete"]("installPackageManager/"+e),Z=e=>l().post("installPackageManager/save",e),F=(e,a)=>l().put(`installPackageManager/update/${e}`,a)},83744:function(e,a){a.Z=(e,a)=>{const t=e.__vccOpts||e;for(const[n,l]of a)t[n]=l;return t}},79092:function(e,a,t){t.r(a),t.d(a,{default:function(){return s}});var n=t(70821),l=t(39518),r=t(15784),o=t(57330),c=(0,n.defineComponent)({emits:["finish"],setup(e,{expose:a,emit:t}){const{t:c}=(0,o.QT)(),u=(0,n.reactive)({show:!1,title:"",formData:{packageId:"",os:"centos",cpuArch:"x86_64",packageVersion:"MINIMAL_LIST",packageVersionNum:"3.0.0",packageUrl:""},rules:{},osList:[],cpuArchList:[],packageVersionList:[]}),s=(0,n.ref)(!1),i=(0,n.ref)(null),d=()=>{i.value?.validate().then((e=>{e||(u.formData.packageId?(0,l.jQ)(u.formData.packageId,u.formData).then((()=>{r.Z.success({content:"Modified success"}),t("finish"),g()})).finally((()=>{s.value=!1})):(0,l.ZA)(u.formData).then((()=>{r.Z.success({content:"Create success"}),t("finish"),g()})).finally((()=>{s.value=!1})))}))},g=()=>{u.show=!1,(0,n.nextTick)((()=>{i.value?.clearValidate(),i.value?.resetFields()}))},p=(e,a)=>{u.show=!0,u.title=c("create"===e?"packageManage.AddPackageDlg.5myq6nnebrc0":"packageManage.AddPackageDlg.5myq6nnebwo0"),u.osList=[{label:"centos",value:"centos"},{label:"openEuler",value:"openEuler"}],u.cpuArchList=[{label:"x86_64",value:"x86_64"},{label:"aarch64",value:"aarch64"}],u.packageVersionList=[{label:c("packageManage.AddPackageDlg.5myq6nnec400"),value:"ENTERPRISE"},{label:c("packageManage.AddPackageDlg.5myq6nnec8c0"),value:"MINIMAL_LIST"},{label:c("packageManage.AddPackageDlg.5myq6nnecc40"),value:"LITE"}],u.rules={packageVersionNum:[{required:!0,"validate-trigger":"blur",message:c("packageManage.AddPackageDlg.5myq6nnebew0")}],packageUrl:[{required:!0,"validate-trigger":"blur",message:c("packageManage.AddPackageDlg.5myq6nnebn40")}]},a&&Object.assign(u.formData,a)};return a({open:p}),(e,a)=>{const t=(0,n.resolveComponent)("a-option"),l=(0,n.resolveComponent)("a-select"),r=(0,n.resolveComponent)("a-form-item"),o=(0,n.resolveComponent)("a-input"),c=(0,n.resolveComponent)("a-form"),p=(0,n.resolveComponent)("a-modal");return(0,n.openBlock)(),(0,n.createBlock)(p,{"mask-closable":!1,"esc-to-close":!1,"ok-loading":s.value,visible:(0,n.unref)(u).show,title:(0,n.unref)(u).title,"modal-style":{width:"550px"},onOk:d,onCancel:g},{default:(0,n.withCtx)((()=>[(0,n.createVNode)(c,{model:(0,n.unref)(u).formData,rules:(0,n.unref)(u).rules,ref:(e,a)=>{a["formRef"]=e,i.value=e},"auto-label-width":""},{default:(0,n.withCtx)((()=>[(0,n.createVNode)(r,{field:"os",label:e.$t("packageManage.AddPackageDlg.5myq6nnea2w0"),"validate-trigger":"change"},{default:(0,n.withCtx)((()=>[(0,n.createVNode)(l,{modelValue:(0,n.unref)(u).formData.os,"onUpdate:modelValue":a[0]||(a[0]=e=>(0,n.unref)(u).formData.os=e),placeholder:e.$t("packageManage.AddPackageDlg.5myq6nneap40")},{default:(0,n.withCtx)((()=>[((0,n.openBlock)(!0),(0,n.createElementBlock)(n.Fragment,null,(0,n.renderList)((0,n.unref)(u).osList,((e,a)=>((0,n.openBlock)(),(0,n.createBlock)(t,{key:a,value:e.value,label:e.label},null,8,["value","label"])))),128))])),_:1},8,["modelValue","placeholder"])])),_:1},8,["label"]),(0,n.createVNode)(r,{label:e.$t("packageManage.AddPackageDlg.else1"),"validate-trigger":"change"},{default:(0,n.withCtx)((()=>[(0,n.createVNode)(l,{modelValue:(0,n.unref)(u).formData.cpuArch,"onUpdate:modelValue":a[1]||(a[1]=e=>(0,n.unref)(u).formData.cpuArch=e),placeholder:e.$t("packageManage.AddPackageDlg.5myq6nneaw40")},{default:(0,n.withCtx)((()=>[((0,n.openBlock)(!0),(0,n.createElementBlock)(n.Fragment,null,(0,n.renderList)((0,n.unref)(u).cpuArchList,((e,a)=>((0,n.openBlock)(),(0,n.createBlock)(t,{key:a,value:e.value,label:e.label},null,8,["value","label"])))),128))])),_:1},8,["modelValue","placeholder"])])),_:1},8,["label"]),(0,n.createVNode)(r,{label:e.$t("packageManage.AddPackageDlg.5myq6nneb180"),"validate-trigger":"change"},{default:(0,n.withCtx)((()=>[(0,n.createVNode)(l,{modelValue:(0,n.unref)(u).formData.packageVersion,"onUpdate:modelValue":a[2]||(a[2]=e=>(0,n.unref)(u).formData.packageVersion=e),placeholder:e.$t("packageManage.AddPackageDlg.5myq6nneb5w0")},{default:(0,n.withCtx)((()=>[((0,n.openBlock)(!0),(0,n.createElementBlock)(n.Fragment,null,(0,n.renderList)((0,n.unref)(u).packageVersionList,((e,a)=>((0,n.openBlock)(),(0,n.createBlock)(t,{key:a,value:e.value,label:e.label},null,8,["value","label"])))),128))])),_:1},8,["modelValue","placeholder"])])),_:1},8,["label"]),(0,n.createVNode)(r,{field:"packageVersionNum",label:e.$t("packageManage.AddPackageDlg.5myq6nnebag0"),"validate-trigger":"blur"},{default:(0,n.withCtx)((()=>[(0,n.createVNode)(o,{modelValue:(0,n.unref)(u).formData.packageVersionNum,"onUpdate:modelValue":a[3]||(a[3]=e=>(0,n.unref)(u).formData.packageVersionNum=e),placeholder:e.$t("packageManage.AddPackageDlg.5myq6nnebew0")},null,8,["modelValue","placeholder"])])),_:1},8,["label"]),(0,n.createVNode)(r,{field:"packageUrl",label:e.$t("packageManage.AddPackageDlg.5myq6nnebis0"),"validate-trigger":"blur"},{default:(0,n.withCtx)((()=>[(0,n.createVNode)(o,{modelValue:(0,n.unref)(u).formData.packageUrl,"onUpdate:modelValue":a[4]||(a[4]=e=>(0,n.unref)(u).formData.packageUrl=e),placeholder:e.$t("packageManage.AddPackageDlg.5myq6nnebn40")},null,8,["modelValue","placeholder"])])),_:1},8,["label"])])),_:1},8,["model","rules"])])),_:1},8,["ok-loading","visible","title"])}}});const u=c;var s=u},92389:function(e,a,t){t.r(a),t.d(a,{default:function(){return m}});var n=t(70821),l=t(15784),r=t(39518),o=t(79092),c=t(57330);const u={class:"package-list"},s={class:"flex-between mb"},i={class:"flex-row-start"};var d=(0,n.defineComponent)({setup(e){const{t:a}=(0,c.QT)(),t=(0,n.reactive)({search:"",pageNum:1,pageSize:10}),d=(0,n.computed)((()=>[{title:a("packageManage.index.5myq5c8znkk0"),dataIndex:"os",width:180},{title:a("packageManage.index.else1"),dataIndex:"cpuArch",width:180},{title:a("packageManage.index.5myq5c8zns00"),dataIndex:"packageVersion",slotName:"version",width:180},{title:a("packageManage.index.5myq5c8zp680"),dataIndex:"packageVersionNum",width:180},{title:a("packageManage.index.5myq5c8zpu80"),dataIndex:"packageUrl"},{title:a("packageManage.index.5myq5c8zq380"),slotName:"operation",width:180}])),g=(0,n.reactive)({data:[],page:{total:0,pageSize:10},loading:!1});(0,n.onMounted)((()=>{p()}));const p=()=>new Promise((e=>{g.loading=!0,(0,r.We)(t).then((a=>{200===Number(a.code)?(e(!0),g.data=a.rows,g.page.total=a.total):e(!1)})).finally((()=>{g.loading=!1}))})),m=e=>{t.pageNum=e,p()},f=()=>{p()},k=(0,n.ref)(null),h=(e,a)=>{k.value?.open(e,a)},v=e=>{(0,r.TY)(e.packageId).then((e=>{200===Number(e.code)&&(l.Z.success({content:"delete success"}),p())}))},C=e=>a("ENTERPRISE"===e?"packageManage.index.5myq5c8zu5w0":"MINIMAL_LIST"===e?"packageManage.index.5myq5c8zuxc0":"packageManage.index.5myq5c8zw680");return(e,a)=>{const l=(0,n.resolveComponent)("icon-plus"),r=(0,n.resolveComponent)("a-button"),c=(0,n.resolveComponent)("a-input-search"),b=(0,n.resolveComponent)("a-link"),V=(0,n.resolveComponent)("a-popconfirm"),w=(0,n.resolveComponent)("a-table");return(0,n.openBlock)(),(0,n.createElementBlock)("div",u,[(0,n.createElementVNode)("div",s,[(0,n.createElementVNode)("div",null,[(0,n.createVNode)(r,{type:"primary",class:"mr",onClick:a[0]||(a[0]=e=>h("create"))},{icon:(0,n.withCtx)((()=>[(0,n.createVNode)(l)])),default:(0,n.withCtx)((()=>[(0,n.createTextVNode)(" "+(0,n.toDisplayString)(e.$t("packageManage.index.5myq5c8yz7c0")),1)])),_:1})]),(0,n.createElementVNode)("div",null,[(0,n.createVNode)(c,{modelValue:(0,n.unref)(t).search,"onUpdate:modelValue":a[1]||(a[1]=e=>(0,n.unref)(t).search=e),loading:(0,n.unref)(g).loading,allowClear:"",onSearch:f,onPressEnter:f,onClear:f,placeholder:e.$t("packageManage.index.5myq5c8z8540"),"search-button":""},null,8,["modelValue","loading","placeholder"])])]),(0,n.createVNode)(w,{class:"d-a-table-row",data:(0,n.unref)(g).data,columns:(0,n.unref)(d),pagination:(0,n.unref)(g).page,onPageChange:m,loading:(0,n.unref)(g).loading},{version:(0,n.withCtx)((({record:e})=>[(0,n.createTextVNode)((0,n.toDisplayString)(C(e.packageVersion)),1)])),operation:(0,n.withCtx)((({record:a})=>[(0,n.createElementVNode)("div",i,[(0,n.createVNode)(b,{class:"mr",onClick:e=>h("update",a)},{default:(0,n.withCtx)((()=>[(0,n.createTextVNode)((0,n.toDisplayString)(e.$t("packageManage.index.5myq5c8zmbk0")),1)])),_:2},1032,["onClick"]),(0,n.createVNode)(V,{content:e.$t("packageManage.index.5myq5c8zms40"),type:"warning","ok-text":e.$t("packageManage.index.5myq5c8zn100"),"cancel-text":e.$t("packageManage.index.5myq5c8zn7k0"),onOk:e=>v(a)},{default:(0,n.withCtx)((()=>[(0,n.createVNode)(b,{status:"danger"},{default:(0,n.withCtx)((()=>[(0,n.createTextVNode)((0,n.toDisplayString)(e.$t("packageManage.index.5myq5c8znew0")),1)])),_:1})])),_:2},1032,["content","ok-text","cancel-text","onOk"])])])),_:1},8,["data","columns","pagination","loading"]),(0,n.createVNode)(o["default"],{ref:(e,a)=>{a["addPackageRef"]=e,k.value=e},onFinish:p},null,512)])}}}),g=t(83744);const p=(0,g.Z)(d,[["__scopeId","data-v-d764d768"]]);var m=p}}]);
//# sourceMappingURL=2389.98f7ed36.js.map