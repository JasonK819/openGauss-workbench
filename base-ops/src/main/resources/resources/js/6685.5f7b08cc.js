"use strict";(self["webpackChunkweb_ui"]=self["webpackChunkweb_ui"]||[]).push([[6685],{29981:function(e,t,l){l.r(t),l.d(t,{default:function(){return O}});l(57658);var a=l(70821),o=l(39518),r=l(40225),n=l(98535),i=l(15784),s=l(57330);const c={class:"env-monitor-c"},d={class:"flex-col"},m={class:"flex-col-start"},p={class:"flex-row"},g={class:"env-item-c flex-between full-w mb"},u={class:"flex-row"},h={class:"flex-row"},f={key:0},w={class:"flex-row mb"},v={class:"ft-xlg"},k={class:"hardware-env"},y={key:0,class:"flex-col"},N={style:{width:"250px"},class:"flex-row"},V={class:"mr"},C={style:{"min-width":"500px"},class:"flex-row-start"},I={class:"mr"},E={class:"flex-row mb"},b={class:"ft-xlg"},B={class:"hardware-env"},x={key:0,class:"flex-col"},D={style:{width:"250px"},class:"flex-row"},S={class:"mr"},P={style:{"min-width":"500px"},class:"flex-row-start"},L={class:"mr"},R={key:1},q={key:1},$={key:2};var U;(function(e){e["NORMAL"]="NORMAL",e["WARMING"]="WARMING",e["ERROR"]="ERROR",e["INFO"]="INFO"})(U||(U={}));var _=(0,a.defineComponent)({setup(e,{expose:t}){const{t:l}=(0,s.QT)(),_=(0,r.BH)(),M=(0,a.inject)("loading"),T=(0,a.reactive)({nodeData:[]}),O=(0,a.ref)(null);(0,a.onMounted)((async()=>{M.toLoading(),T.nodeData=[],A(),T.nodeData.forEach((e=>{e.loading=!0,(0,o.c0)(e.hostId).then((t=>{200===Number(t.code)&&(e.result=200,e.hardwareEnv.envProperties=t.data.hardwareEnv.envProperties,e.softwareEnv.envProperties=t.data.softwareEnv.envProperties,F(e))})).catch((t=>{e.result=500,e.errMsg=t})).finally((()=>{e.loading=!1}))})),O.value=setInterval((()=>{const e=T.nodeData.filter((e=>200!==e.result&&500!==e.result));0===e.length&&(clearInterval(O.value),M.cancelLoading())}),100)})),(0,a.onBeforeUnmount)((()=>{O.value&&clearInterval(O.value)}));const z=e=>{M.toLoading(),e.loading=!0,(0,o.c0)(e.hostId).then((t=>{200===Number(t.code)?(e.result=200,e.hardwareEnv.envProperties=t.data.hardwareEnv.envProperties,e.softwareEnv.envProperties=t.data.softwareEnv.envProperties,F(e)):(e.result=500,e.errMsg=t.msg)})).catch((t=>{e.result=500,e.errMsg=t})).finally((()=>{e.loading=!1,M.cancelLoading()}))},A=()=>{T.nodeData=[],_.getLiteConfig.nodeConfigList.forEach((e=>{const t=T.nodeData.find((t=>t.privateIp===e.privateIp));if(!t){const t=W();t.hostId=e.hostId,t.privateIp=e.privateIp,t.publicIp=e.publicIp,t.clusterRole=e.clusterRole,T.nodeData.push(t)}}))},W=()=>({result:-1,errMsg:"",noPassNum:0,noPassNumHard:0,noPassNumSoft:0,isShow:!0,loading:!1,hostId:"",clusterRole:"",privateIp:"",publicIp:"",hardwareEnv:{envProperties:[]},softwareEnv:{envProperties:[]}}),F=e=>{e.hardwareEnv.envProperties.forEach((t=>{t.status===U.ERROR&&(e.noPassNum=e.noPassNum+1,e.noPassNumHard=e.noPassNumHard+1)})),e.softwareEnv.envProperties.forEach((t=>{t.status===U.ERROR&&(e.noPassNum=e.noPassNum+1,e.noPassNumHard=e.noPassNumHard+1)}))},H=e=>{switch(e.status){case U.ERROR:return"red";case U.INFO:return"gray";case U.NORMAL:return"green";default:return"orange"}},j=e=>{switch(e){case n._.MASTER:return l("lightweight.EnvMonitor.5mpmgwswkpc0");case n._.SLAVE:return l("lightweight.EnvMonitor.5mpmgwswkso0");default:return l("lightweight.EnvMonitor.5mpmgwswkwg0")}},G=()=>{const e=T.nodeData.filter((e=>200!==e.result));let t=!0;return e.length>0&&(t=!1,i.Z.warning("If the host fails to be detected, configure the host and re-detect the host for installation")),t};return t({beforeConfirm:G}),(e,t)=>{const l=(0,a.resolveComponent)("a-badge"),o=(0,a.resolveComponent)("a-alert"),r=(0,a.resolveComponent)("a-tag"),n=(0,a.resolveComponent)("icon-refresh"),i=(0,a.resolveComponent)("a-button"),s=(0,a.resolveComponent)("icon-down"),_=(0,a.resolveComponent)("icon-up"),M=(0,a.resolveComponent)("icon-exclamation-circle-fill"),O=(0,a.resolveComponent)("icon-check-circle-fill"),A=(0,a.resolveComponent)("icon-info-circle-fill"),W=(0,a.resolveComponent)("a-spin"),F=(0,a.resolveComponent)("a-divider");return(0,a.openBlock)(),(0,a.createElementBlock)("div",c,[(0,a.createElementVNode)("div",d,[((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)((0,a.unref)(T).nodeData,((t,c)=>((0,a.openBlock)(),(0,a.createElementBlock)("div",{class:"mb",style:{width:"50%"},key:c},[(0,a.createVNode)(W,{class:"full-w",loading:t.loading,tip:e.$t("lightweight.EnvMonitor.5mpmgwswi880")},{default:(0,a.withCtx)((()=>[(0,a.createElementVNode)("div",m,[-1!==t.result&&t.noPassNum>0?((0,a.openBlock)(),(0,a.createBlock)(o,{key:0,class:"mb",style:{width:"fit-content"},type:"error"},{default:(0,a.withCtx)((()=>[(0,a.createElementVNode)("div",p,[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("lightweight.EnvMonitor.5mpmgwswj8g0"))+" ",1),(0,a.createVNode)(l,{count:t.noPassNum},null,8,["count"]),(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("lightweight.EnvMonitor.else1")),1)])])),_:2},1024)):(0,a.createCommentVNode)("",!0),(0,a.createElementVNode)("div",g,[(0,a.createElementVNode)("div",u,[(0,a.createVNode)(r,{class:"mr",color:"#86909C"},{default:(0,a.withCtx)((()=>[(0,a.createTextVNode)((0,a.toDisplayString)(j(t.clusterRole)),1)])),_:2},1024),(0,a.createTextVNode)(" "+(0,a.toDisplayString)(e.$t("lightweight.EnvMonitor.5mpmgwswjlc0"))+": "+(0,a.toDisplayString)(t.privateIp)+"("+(0,a.toDisplayString)(t.publicIp)+") ",1)]),(0,a.createElementVNode)("div",h,[(0,a.createVNode)(i,{class:"mr",type:"text",long:"",onClick:e=>z(t)},{icon:(0,a.withCtx)((()=>[(0,a.createVNode)(n)])),default:(0,a.withCtx)((()=>[(0,a.createTextVNode)(" "+(0,a.toDisplayString)(e.$t("lightweight.EnvMonitor.5mpmgwswjuk0")),1)])),_:2},1032,["onClick"]),t.isShow?((0,a.openBlock)(),(0,a.createBlock)(_,{key:1,style:{cursor:"pointer"},onClick:e=>t.isShow=!1},null,8,["onClick"])):((0,a.openBlock)(),(0,a.createBlock)(s,{key:0,style:{cursor:"pointer"},onClick:e=>t.isShow=!0},null,8,["onClick"]))])]),(0,a.withDirectives)((0,a.createElementVNode)("div",null,[200===t.result?((0,a.openBlock)(),(0,a.createElementBlock)("div",f,[(0,a.createElementVNode)("div",w,[t.noPassNumHard>0?((0,a.openBlock)(),(0,a.createBlock)(M,{key:0,class:"mr",style:{color:"orange"},size:30})):((0,a.openBlock)(),(0,a.createBlock)(O,{key:1,style:{color:"green"},class:"mr",size:30})),(0,a.createElementVNode)("div",v,(0,a.toDisplayString)(e.$t("lightweight.EnvMonitor.5mpmgwswk640")),1)]),(0,a.createElementVNode)("div",k,[t.hardwareEnv.envProperties.length?((0,a.openBlock)(),(0,a.createElementBlock)("div",y,[((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)(t.hardwareEnv.envProperties,((e,t)=>((0,a.openBlock)(),(0,a.createElementBlock)("div",{class:"flex-row mb",key:t},[(0,a.createElementVNode)("div",N,[(0,a.createElementVNode)("div",V,(0,a.toDisplayString)(e.name)+":",1),(0,a.createElementVNode)("div",null,(0,a.toDisplayString)(e.value),1)]),(0,a.createElementVNode)("div",C,[(0,a.createElementVNode)("div",I,[e.status===U.NORMAL?((0,a.openBlock)(),(0,a.createBlock)(O,{key:0,style:{color:"green"},size:20})):(0,a.createCommentVNode)("",!0),e.status===U.WARMING||e.status===U.ERROR?((0,a.openBlock)(),(0,a.createBlock)(M,{key:1,style:{color:"orange"},size:20})):(0,a.createCommentVNode)("",!0),e.status===U.INFO?((0,a.openBlock)(),(0,a.createBlock)(A,{key:2,style:{color:"gray"},size:20})):(0,a.createCommentVNode)("",!0)]),(0,a.createElementVNode)("div",{style:(0,a.normalizeStyle)("color: "+H(e))},(0,a.toDisplayString)(e.statusMessage),5)])])))),128))])):(0,a.createCommentVNode)("",!0)]),(0,a.createElementVNode)("div",E,[t.noPassNumSoft>0?((0,a.openBlock)(),(0,a.createBlock)(M,{key:0,class:"mr",style:{color:"orange"},size:30})):((0,a.openBlock)(),(0,a.createBlock)(O,{key:1,style:{color:"green"},class:"mr",size:30})),(0,a.createElementVNode)("div",b,(0,a.toDisplayString)(e.$t("lightweight.EnvMonitor.5mpmgwswkb40")),1)]),(0,a.createElementVNode)("div",B,[t.softwareEnv.envProperties.length?((0,a.openBlock)(),(0,a.createElementBlock)("div",x,[((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)(t.softwareEnv.envProperties,((e,t)=>((0,a.openBlock)(),(0,a.createElementBlock)("div",{class:"flex-row mb",key:t},[(0,a.createElementVNode)("div",D,[(0,a.createElementVNode)("div",S,(0,a.toDisplayString)(e.name)+":",1),(0,a.createElementVNode)("div",null,(0,a.toDisplayString)(e.value),1)]),(0,a.createElementVNode)("div",P,[(0,a.createElementVNode)("div",L,[e.status===U.NORMAL?((0,a.openBlock)(),(0,a.createBlock)(O,{key:0,style:{color:"green"},size:20})):(0,a.createCommentVNode)("",!0),e.status===U.WARMING||e.status===U.ERROR?((0,a.openBlock)(),(0,a.createBlock)(M,{key:1,style:{color:"orange"},size:20})):(0,a.createCommentVNode)("",!0),e.status===U.INFO?((0,a.openBlock)(),(0,a.createBlock)(A,{key:2,style:{color:"gray"},size:20})):(0,a.createCommentVNode)("",!0)]),(0,a.createElementVNode)("div",{style:(0,a.normalizeStyle)("max-width: 300px; color: "+H(e))},(0,a.toDisplayString)(e.statusMessage),5)])])))),128))])):(0,a.createCommentVNode)("",!0),500===t.result?((0,a.openBlock)(),(0,a.createElementBlock)("div",R,[(0,a.createVNode)(r,{color:"red"},{default:(0,a.withCtx)((()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("lightweight.EnvMonitor.5mpmgwswkeo0")),1)])),_:1})])):(0,a.createCommentVNode)("",!0)])])):-1!==t.result&&200!==t.result?((0,a.openBlock)(),(0,a.createElementBlock)("div",q,(0,a.toDisplayString)(e.$t("lightweight.EnvMonitor.5mpmgwswki80"))+" "+(0,a.toDisplayString)(t.errMsg),1)):((0,a.openBlock)(),(0,a.createElementBlock)("div",$,(0,a.toDisplayString)(e.$t("lightweight.EnvMonitor.5mpmgwswkls0")),1))],512),[[a.vShow,t.isShow]])])])),_:2},1032,["loading","tip"]),(0,a.createVNode)(F)])))),128))])])}}}),M=l(83744);const T=(0,M.Z)(_,[["__scopeId","data-v-b1c6227e"]]);var O=T},63995:function(e,t,l){l.r(t),l.d(t,{default:function(){return f}});l(57658);var a=l(70821),o=l(98535),r=l(40225),n=l(39518),i=l(15784),s=l(57330);const c={class:"install-config-c"},d={class:"flex-col"},m={class:"flex-col-start"},p={class:"node-top full-w mb"},g={class:"flex-row"};var u=(0,a.defineComponent)({setup(e,{expose:t}){const{t:l}=(0,s.QT)(),u=(0,r.BH)(),h=(0,a.reactive)({nodeData:[],rules:{}}),f=(0,a.ref)(!1),w=(0,a.ref)([]),v=(0,a.ref)([]);(0,a.onMounted)((async()=>{if(k(),Object.keys(u.getLiteConfig).length&&u.getLiteConfig.nodeConfigList.length)await V(),u.getLiteConfig.nodeConfigList.forEach(((e,t)=>{h.nodeData.push(e),I(t)})),h.nodeData[0].port=u.getLiteConfig.port,h.nodeData[0].databasePassword=u.getLiteConfig.databasePassword;else{h.nodeData=[];const e=y();if(e.clusterRole=o._.MASTER,h.nodeData.push(e),x.value===o.K0.CLUSTER){const e=y();e.clusterRole=o._.SLAVE,h.nodeData.push(e)}V()}}));const k=()=>{h.rules={hostId:[{required:!0,"validate-trigger":"change",message:l("lightweight.InstallConfig.5mpmkfqybw00")}],installUserId:[{required:!0,"validate-trigger":"change",message:l("lightweight.InstallConfig.5mpmkfqy9yo0")}],clusterId:[{required:!0,"validate-trigger":"blur",message:l("lightweight.InstallConfig.5mpmkfqy8r00")},{validator:(e,t)=>new Promise((a=>{const o={name:e};(0,n.T2)(o).then((e=>{200===Number(e.code)?"Y"===e.data.has?(t(l("lightweight.InstallConfig.5mpmkfqyc0w0")),a(!1)):a(!0):(t(l("lightweight.InstallConfig.5mpmkfqyc5w0")),a(!1))}))}))}],port:[{required:!0,"validate-trigger":"blur",message:l("lightweight.InstallConfig.5mpmkfqyay80")}],rootPassword:[{required:!0,"validate-trigger":"blur",message:l("lightweight.InstallConfig.5mpmkfqy9h80")}],installPath:[{required:!0,"validate-trigger":"blur",message:l("lightweight.InstallConfig.5mpmkfqyaas0")}],dataPath:[{required:!0,"validate-trigger":"blur",message:l("lightweight.InstallConfig.5mpmkfqyan00")}],databaseUsername:[{required:!0,"validate-trigger":"blur",message:l("lightweight.InstallConfig.5mpmkfqyb9w0")}],databasePassword:[{required:!0,"validate-trigger":"blur",message:l("lightweight.InstallConfig.5mpmkfqybo00")}]}},y=()=>({clusterId:"",hostId:"",rootPassword:"",privateIp:"",publicIp:"",installUserId:"",installPath:"/opt/software/openGauss/install",dataPath:"/opt/software/openGauss/data",port:Number(5432),databaseUsername:"",databasePassword:""}),N=(0,a.ref)({}),V=()=>{f.value=!0,(0,n.zx)().then((e=>{200===Number(e.code)?(w.value=[],w.value=e.data,e.data.forEach((e=>{N.value[e.hostId]=e})),h.nodeData.length&&!h.nodeData[0].hostId&&(h.nodeData[0].hostId=w.value[0].hostId,h.nodeData[0].privateIp=w.value[0].privateIp,h.nodeData[0].publicIp=w.value[0].publicIp),I(0)):i.Z.error(l("lightweight.InstallConfig.5mpmkfqycac0"))})).finally((()=>{f.value=!1}))},C=(0,a.ref)({}),I=e=>{const t=h.nodeData[e].hostId;t&&(N.value[t]&&(h.nodeData[e].privateIp=N.value[t].privateIp,h.nodeData[e].publicIp=N.value[t].publicIp),C.value[t]&&!h.nodeData[e].installUserId?h.nodeData[e].installUserId=C.value[t][0].hostUserId:(0,n.YQ)(t).then((l=>{if(200===Number(l.code))if(l.data.length){C.value[t]=l.data;const a=h.nodeData[e].installUserId;if(a){const o=l.data.find((e=>e.hostUserId===a));o||(h.nodeData[e].installUserId=C.value[t][0].hostUserId)}else h.nodeData[e].installUserId=C.value[t][0].hostUserId}else h.nodeData[e].installUserId="";else i.Z.error("Description Failed to obtain user data from the host")})))},E=e=>{e&&v.value.push(e)},b=async()=>{let e=!0;for(let t=0;t<v.value.length;t++)if(v.value[t]){const l=await v.value[t].validate();l&&(e=!1)}if(e){const e=JSON.parse(JSON.stringify(h.nodeData));if(e.length){e.forEach((t=>{t.port=e[0].port})),u.setInstallContext({clusterId:e[0].clusterId});const t={clusterName:"",port:e[0].port,databaseUsername:e[0].databaseUsername,databasePassword:e[0].databasePassword,nodeConfigList:e};u.setLiteConfig(t)}return!0}return!1};t({beforeConfirm:b});const B=(0,a.computed)((()=>u.getInstallConfig.installType)),x=(0,a.computed)((()=>u.getInstallConfig.deployType));return(e,t)=>{const l=(0,a.resolveComponent)("a-tag"),o=(0,a.resolveComponent)("a-input"),r=(0,a.resolveComponent)("a-form-item"),n=(0,a.resolveComponent)("a-option"),i=(0,a.resolveComponent)("a-select"),s=(0,a.resolveComponent)("a-input-password"),u=(0,a.resolveComponent)("a-input-number"),v=(0,a.resolveComponent)("a-form");return(0,a.openBlock)(),(0,a.createElementBlock)("div",c,[(0,a.createElementVNode)("div",d,[((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)((0,a.unref)(h).nodeData,((t,c)=>((0,a.openBlock)(),(0,a.createElementBlock)("div",{key:c},[(0,a.createElementVNode)("div",m,[(0,a.createElementVNode)("div",p,[(0,a.createElementVNode)("div",g,[(0,a.createVNode)(l,{class:"mr-s",color:"#86909C"},{default:(0,a.withCtx)((()=>[(0,a.createTextVNode)((0,a.toDisplayString)(0===c?e.$t("lightweight.InstallConfig.5mpmkfqy71w0"):e.$t("lightweight.InstallConfig.5mpmkfqy8400")),1)])),_:2},1024),(0,a.createTextVNode)(" "+(0,a.toDisplayString)(e.$t("lightweight.InstallConfig.5mpmkfqy8es0")),1)])]),(0,a.createVNode)(v,{id:`formRef${c}`,model:t,rules:(0,a.unref)(h).rules,style:{width:"800px"},ref:e=>E(e)},{default:(0,a.withCtx)((()=>[0===c?((0,a.openBlock)(),(0,a.createBlock)(r,{key:0,field:"clusterId",label:e.$t("lightweight.InstallConfig.5mpmkfqy8nc0"),"validate-trigger":"blur"},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(o,{modelValue:t.clusterId,"onUpdate:modelValue":e=>t.clusterId=e,placeholder:e.$t("lightweight.InstallConfig.5mpmkfqy8r00")},null,8,["modelValue","onUpdate:modelValue","placeholder"])])),_:2},1032,["label"])):(0,a.createCommentVNode)("",!0),(0,a.createVNode)(r,{field:"hostId",label:e.$t("lightweight.InstallConfig.5mpmkfqy8vk0")},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(i,{loading:f.value,modelValue:t.hostId,"onUpdate:modelValue":e=>t.hostId=e,onChange:e=>I(c),placeholder:e.$t("lightweight.InstallConfig.5mpmkfqy91w0")},{default:(0,a.withCtx)((()=>[((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)(w.value,(e=>((0,a.openBlock)(),(0,a.createBlock)(n,{key:e.hostId,value:e.hostId},{default:(0,a.withCtx)((()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.publicIp+"("+(e.hostname?e.hostname:"--")+")"),1)])),_:2},1032,["value"])))),128))])),_:2},1032,["loading","modelValue","onUpdate:modelValue","onChange","placeholder"])])),_:2},1032,["label"]),(0,a.createVNode)(r,{field:"rootPassword",label:e.$t("lightweight.InstallConfig.else1"),"validate-trigger":"blur"},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(s,{modelValue:t.rootPassword,"onUpdate:modelValue":e=>t.rootPassword=e,placeholder:e.$t("lightweight.InstallConfig.5mpmkfqy9h80"),"allow-clear":""},null,8,["modelValue","onUpdate:modelValue","placeholder"])])),_:2},1032,["label"]),(0,a.createVNode)(r,{field:"installUserId",label:e.$t("lightweight.InstallConfig.5mpmkfqy9rw0")},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(i,{modelValue:t.installUserId,"onUpdate:modelValue":e=>t.installUserId=e,placeholder:e.$t("lightweight.InstallConfig.5mpmkfqy9yo0")},{default:(0,a.withCtx)((()=>[((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)(C.value[t.hostId],(e=>((0,a.openBlock)(),(0,a.createBlock)(n,{key:e.hostUserId,value:e.hostUserId},{default:(0,a.withCtx)((()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.username),1)])),_:2},1032,["value"])))),128))])),_:2},1032,["modelValue","onUpdate:modelValue","placeholder"])])),_:2},1032,["label"]),(0,a.createVNode)(r,{field:"installPath",label:e.$t("lightweight.InstallConfig.5mpmkfqya4o0"),"validate-trigger":"blur"},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(o,{modelValue:t.installPath,"onUpdate:modelValue":e=>t.installPath=e,placeholder:e.$t("lightweight.InstallConfig.5mpmkfqyaas0")},null,8,["modelValue","onUpdate:modelValue","placeholder"])])),_:2},1032,["label"]),(0,a.createVNode)(r,{field:"dataPath",label:e.$t("lightweight.InstallConfig.5mpmkfqyah00"),"validate-trigger":"blur"},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(o,{modelValue:t.dataPath,"onUpdate:modelValue":e=>t.dataPath=e,placeholder:e.$t("lightweight.InstallConfig.5mpmkfqyan00")},null,8,["modelValue","onUpdate:modelValue","placeholder"])])),_:2},1032,["label"]),0===c?((0,a.openBlock)(),(0,a.createBlock)(r,{key:1,field:"port",label:e.$t("lightweight.InstallConfig.5mpmkfqyasw0"),"validate-trigger":"blur"},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(u,{modelValue:t.port,"onUpdate:modelValue":e=>t.port=e,placeholder:e.$t("lightweight.InstallConfig.5mpmkfqyay80")},null,8,["modelValue","onUpdate:modelValue","placeholder"])])),_:2},1032,["label"])):(0,a.createCommentVNode)("",!0),"import"===(0,a.unref)(B)&&0===c?((0,a.openBlock)(),(0,a.createBlock)(r,{key:2,field:"databaseUsername",label:e.$t("lightweight.InstallConfig.5mpmkfqyb4c0"),"validate-trigger":"blur"},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(s,{modelValue:t.databaseUsername,"onUpdate:modelValue":e=>t.databaseUsername=e,placeholder:e.$t("lightweight.InstallConfig.5mpmkfqyb9w0"),"allow-clear":""},null,8,["modelValue","onUpdate:modelValue","placeholder"])])),_:2},1032,["label"])):(0,a.createCommentVNode)("",!0),0===c?((0,a.openBlock)(),(0,a.createBlock)(r,{key:3,field:"databasePassword",label:e.$t("lightweight.InstallConfig.5mpmkfqybf80"),"validate-trigger":"blur"},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(s,{modelValue:t.databasePassword,"onUpdate:modelValue":e=>t.databasePassword=e,placeholder:e.$t("lightweight.InstallConfig.5mpmkfqybo00"),"allow-clear":""},null,8,["modelValue","onUpdate:modelValue","placeholder"])])),_:2},1032,["label"])):(0,a.createCommentVNode)("",!0)])),_:2},1032,["id","model","rules"])])])))),128))])])}}});const h=u;var f=h},92977:function(e,t,l){l.r(t),l.d(t,{default:function(){return E}});l(57658);var a=l(70821),o=l(40225),r=l(98535),n=l(57330);const i={class:"install-prompt-c"},s={class:"flex-col"},c={class:"full-w"},d={class:"item-node-top flex-between full-w"},m={class:"flex-row"},p={class:"flex-row"},g={class:"item-node-center full-w flex-col-start"},u={class:"flex-row"},h={class:"lable-w"},f={class:"flex-row"},w={class:"lable-w"},v={class:"flex-row"},k={class:"lable-w"},y={class:"flex-row"},N={class:"lable-w"};var V=(0,a.defineComponent)({setup(e){const{t:t}=(0,n.QT)(),l=(0,o.BH)(),V=(0,a.reactive)({nodeData:[]}),C=(0,a.inject)("loading");(0,a.onMounted)((()=>{C.setNextBtnShow(!0),C.setBackBtnShow(!0),V.nodeData=[],l.getLiteConfig.nodeConfigList.forEach((e=>{const t=I();Object.assign(t,{clusterRole:e.clusterRole,publicIp:e.publicIp,privateIp:e.privateIp,installPath:e.installPath,dataPath:e.dataPath,port:e.port}),V.nodeData.push(t)}))}));const I=()=>({isShow:!0,clusterRole:"",publicIp:"",privateIp:"",installPath:"",dataPath:"",port:""}),E=e=>{switch(e){case r._.MASTER:return t("lightweight.InstallPrompt.5mpmly4bxtg0");case r._.SLAVE:return t("lightweight.InstallPrompt.5mpmly4by1k0");default:return t("lightweight.InstallPrompt.5mpmly4by980")}};return(e,t)=>{const l=(0,a.resolveComponent)("a-tag"),o=(0,a.resolveComponent)("icon-down"),r=(0,a.resolveComponent)("icon-up"),n=(0,a.resolveComponent)("a-divider");return(0,a.openBlock)(),(0,a.createElementBlock)("div",i,[(0,a.createElementVNode)("div",s,[((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)((0,a.unref)(V).nodeData,((t,i)=>((0,a.openBlock)(),(0,a.createElementBlock)("div",{class:"mb",style:{width:"50%"},key:i},[(0,a.createElementVNode)("div",c,[(0,a.createElementVNode)("div",d,[(0,a.createElementVNode)("div",m,[(0,a.createVNode)(l,{class:"mr",color:"#86909C"},{default:(0,a.withCtx)((()=>[(0,a.createTextVNode)((0,a.toDisplayString)(E(t.clusterRole)),1)])),_:2},1024),(0,a.createTextVNode)(" "+(0,a.toDisplayString)(e.$t("lightweight.InstallPrompt.5mpmly4bw340"))+": "+(0,a.toDisplayString)(t.privateIp)+"("+(0,a.toDisplayString)(t.publicIp)+") ",1)]),(0,a.createElementVNode)("div",p,[t.isShow?((0,a.openBlock)(),(0,a.createBlock)(r,{key:1,style:{cursor:"pointer"},onClick:e=>t.isShow=!1},null,8,["onClick"])):((0,a.openBlock)(),(0,a.createBlock)(o,{key:0,style:{cursor:"pointer"},onClick:e=>t.isShow=!0},null,8,["onClick"]))])]),(0,a.withDirectives)((0,a.createElementVNode)("div",g,[(0,a.createElementVNode)("div",u,[(0,a.createElementVNode)("div",h,(0,a.toDisplayString)(e.$t("lightweight.InstallPrompt.5mpmly4bwww0")),1),(0,a.createElementVNode)("div",null,(0,a.toDisplayString)(t.publicIp),1)]),(0,a.createVNode)(n),(0,a.createElementVNode)("div",f,[(0,a.createElementVNode)("div",w,(0,a.toDisplayString)(e.$t("lightweight.InstallPrompt.5mpmly4bx7g0")),1),(0,a.createElementVNode)("div",null,(0,a.toDisplayString)(t.installPath),1)]),(0,a.createVNode)(n),(0,a.createElementVNode)("div",v,[(0,a.createElementVNode)("div",k,(0,a.toDisplayString)(e.$t("lightweight.InstallPrompt.5mpmly4bxfg0")),1),(0,a.createElementVNode)("div",null,(0,a.toDisplayString)(t.dataPath),1)]),(0,a.createVNode)(n),(0,a.createElementVNode)("div",y,[(0,a.createElementVNode)("div",N,(0,a.toDisplayString)(e.$t("lightweight.InstallPrompt.5mpmly4bxlo0")),1),(0,a.createElementVNode)("div",null,(0,a.toDisplayString)(t.port),1)])],512),[[a.vShow,t.isShow]])])])))),128))])])}}}),C=l(83744);const I=(0,C.Z)(V,[["__scopeId","data-v-4d2e5a0d"]]);var E=I},86685:function(e,t,l){l.r(t),l.d(t,{default:function(){return f}});var a=l(70821),o=l(92971),r=l(29981),n=l(63995),i=l(95775),s=l(92977),c=l(17702),d=l(40225);const m={class:"lite-install-c"};var p;(function(e){e[e["DEPLOY"]=1]="DEPLOY",e[e["INSTALL"]=2]="INSTALL",e[e["ENV"]=3]="ENV",e[e["PROMPT"]=4]="PROMPT",e[e["EXE"]=5]="EXE"})(p||(p={}));var g=(0,a.defineComponent)({props:{currStep:Number},setup(e,{expose:t}){const l=e,g=(0,d.BH)(),u=(0,a.ref)(null),h=(0,a.ref)(null),f=async()=>{if(l.currStep===p.INSTALL){const e=await(u.value?.beforeConfirm());return e||!1}if(l.currStep===p.ENV){const e=await(h.value?.beforeConfirm());return e||!1}return!0},w=(0,a.computed)((()=>g.getInstallConfig.installType));return t({beforeConfirm:f}),(t,l)=>{const d=(0,a.resolveComponent)("a-step"),g=(0,a.resolveComponent)("a-steps"),f=(0,a.resolveComponent)("a-divider");return(0,a.openBlock)(),(0,a.createElementBlock)("div",m,[(0,a.createVNode)(g,{current:e.currStep},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(d,null,{default:(0,a.withCtx)((()=>[(0,a.createTextVNode)((0,a.toDisplayString)(t.$t("lightweight.LightWeightInstall.5mpmmqzpre40")),1)])),_:1}),(0,a.createVNode)(d,null,{default:(0,a.withCtx)((()=>[(0,a.createTextVNode)((0,a.toDisplayString)("install"===(0,a.unref)(w)?t.$t("lightweight.LightWeightInstall.5mpmmqzprz80"):t.$t("lightweight.LightWeightInstall.5mpmmqzps6w0"))+(0,a.toDisplayString)(t.$t("lightweight.LightWeightInstall.else1")),1)])),_:1}),(0,a.createVNode)(d,null,{default:(0,a.withCtx)((()=>[(0,a.createTextVNode)((0,a.toDisplayString)(t.$t("lightweight.LightWeightInstall.5mpmmqzpsao0")),1)])),_:1}),(0,a.createVNode)(d,null,{default:(0,a.withCtx)((()=>[(0,a.createTextVNode)((0,a.toDisplayString)("install"===(0,a.unref)(w)?t.$t("lightweight.LightWeightInstall.5mpmmqzprz80"):t.$t("lightweight.LightWeightInstall.5mpmmqzps6w0"))+(0,a.toDisplayString)(t.$t("lightweight.LightWeightInstall.else2")),1)])),_:1}),(0,a.createVNode)(d,null,{default:(0,a.withCtx)((()=>[(0,a.createTextVNode)((0,a.toDisplayString)(t.$t("lightweight.LightWeightInstall.else3"))+(0,a.toDisplayString)("install"===(0,a.unref)(w)?t.$t("lightweight.LightWeightInstall.5mpmmqzprz80"):t.$t("lightweight.LightWeightInstall.5mpmmqzps6w0")),1)])),_:1})])),_:1},8,["current"]),(0,a.createVNode)(f),e.currStep===p.DEPLOY?((0,a.openBlock)(),(0,a.createBlock)(o["default"],{key:0})):(0,a.createCommentVNode)("",!0),e.currStep===p.INSTALL?((0,a.openBlock)(),(0,a.createBlock)(n["default"],{key:1,ref:(e,t)=>{t["installConfigRef"]=e,u.value=e}},null,512)):(0,a.createCommentVNode)("",!0),e.currStep===p.ENV?((0,a.openBlock)(),(0,a.createBlock)(r["default"],{key:2,ref:(e,t)=>{t["envRef"]=e,h.value=e}},null,512)):(0,a.createCommentVNode)("",!0),e.currStep===p.PROMPT?((0,a.openBlock)(),(0,a.createBlock)(s["default"],{key:3})):(0,a.createCommentVNode)("",!0),"install"===(0,a.unref)(w)&&e.currStep===p.EXE?((0,a.openBlock)(),(0,a.createBlock)(i["default"],{key:4})):(0,a.createCommentVNode)("",!0),"import"===(0,a.unref)(w)&&e.currStep===p.EXE?((0,a.openBlock)(),(0,a.createBlock)(c["default"],{key:5})):(0,a.createCommentVNode)("",!0)])}}}),u=l(83744);const h=(0,u.Z)(g,[["__scopeId","data-v-32952242"]]);var f=h}}]);
//# sourceMappingURL=6685.5f7b08cc.js.map