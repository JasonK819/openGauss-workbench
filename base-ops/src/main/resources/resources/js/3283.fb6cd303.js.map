{"version":3,"file":"js/3283.fb6cd303.js","mappings":"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","sources":["webpack://web-ui/./src/api/ops/index.ts","webpack://web-ui/./node_modules/vue-loader/dist/exportHelper.js","webpack://web-ui/./src/views/monitor/snapshot/index.vue?85d6","webpack://web-ui/./src/views/monitor/snapshot/index.vue"],"sourcesContent":["import axios from 'axios'\nimport { KeyValue } from '@/types/global'\nimport { downloadPackage, SSHBody } from '@/types/ops/install'\n// import { hostData, hostUserData } from '@/types/resource/host'\n\n// get Key\nexport const getEntryKey = () => {\n  return axios.get('encryption/getKey')\n}\n\nexport const download = (data: downloadPackage) => {\n  return axios.post(`opsCluster/download`, data ? data : {})\n}\n\nexport const getEnvMonitorData = (hostId: string) => {\n  return axios.get(`opsCluster/env/${hostId}`)\n}\n\nexport const installOpenGauss = (data: KeyValue) => {\n  return axios.post('opsCluster/install', data)\n}\n\nexport const importOpenGauss = (data: KeyValue) => {\n  return axios.post('opsCluster/import', data)\n}\n\nexport const quickInstall = (data: KeyValue) => {\n  return axios.post('opsCluster/quickInstall', data)\n}\n\n// one check\nexport const clusterCheck = (data: KeyValue) => {\n  return axios.get('opsCluster/check', {\n    params: data\n  })\n}\n\nexport const uninstallOpenGauss = (data: KeyValue) => {\n  return axios.post('opsCluster/uninstall', data)\n}\n\nexport const hasName = (data: KeyValue) => {\n  return axios.get('opsCluster/hasName', {\n    params: data\n  })\n}\n\nexport const clusterList = () => {\n  return axios.get('opsCluster/listCluster')\n}\n\nexport const getSummary = () => {\n  return axios.get('opsCluster/summary')\n}\n\nexport const openSSH = (data: SSHBody) => {\n  return axios.post('opsCluster/ssh', data)\n}\n\nexport const clusterMonitor = (data: KeyValue) => {\n  return axios.get('opsCluster/monitor', {\n    params: data\n  })\n}\n\nexport const start = (data: KeyValue) => {\n  return axios.post('opsCluster/start', data)\n}\n\nexport const stop = (data: KeyValue) => {\n  return axios.post('opsCluster/stop', data)\n}\n\nexport const restart = (data: KeyValue) => {\n  return axios.post('opsCluster/restart', data)\n}\n\nexport const getHostByClusterId = (data: KeyValue) => {\n  return axios.get('opsCluster/listHost', {\n    params: data\n  })\n}\n\n// host interface\nexport const listInstallPackage = (path?: string) => {\n  return axios.get(path ? `opsCluster/listInstallPackage?path=${path}` : 'opsCluster/listInstallPackage')\n}\n\n// page\nexport const hostPage = (query: any) => {\n  return axios.get('host/page', {\n    params: query\n  })\n}\n\nexport const hostListAll = () => {\n  return axios.get('host/listAll')\n}\n\nexport const addHost = (data: KeyValue) => {\n  return axios.post('host', data)\n}\n\nexport const editHost = (hostId: string, data: KeyValue) => {\n  return axios.put(`host/${hostId}`, data)\n}\n\nexport const hostPing = (data: KeyValue) => {\n  return axios.post('host/ping', data)\n}\n\nexport const hostPingById = (hostId: string) => {\n  return axios.get(`host/ping/${hostId}`)\n}\n\nexport const delHost = (hostId: string) => {\n  return axios.delete(`host/${hostId}`)\n}\n\nexport const hostUserPage = (hostId: string) => {\n  return axios.get(`hostUser/page/${hostId}`)\n}\n\nexport const hostUserListAll = (hostId: string) => {\n  return axios.get(`hostUser/listAll/${hostId}`)\n}\n\nexport const hostUserListWithoutRoot = (hostId: string) => {\n  return axios.get(`hostUser/listAllWithoutRoot/${hostId}`)\n}\n\nexport const addHostUser = (data: KeyValue) => {\n  return axios.post('hostUser', data)\n}\n\nexport const editHostUser = (hostUserId: string, data: KeyValue) => {\n  return axios.put(`hostUser/${hostUserId}`, data)\n}\n\nexport const delHostUser = (hostUserId: string) => {\n  return axios.delete(`hostUser/${hostUserId}`)\n}\n\nexport const azListAll = () => {\n  return axios.get('az/listAll')\n}\n\nexport const addAz = (data: KeyValue) => {\n  return axios.post('az', data)\n}\n\nexport const editAz = (azId: string, data: KeyValue) => {\n  return axios.put(`az/${azId}`, data)\n}\n\n// page\nexport const azPage = (query: any) => {\n  return axios.get('az/page', {\n    params: query\n  })\n}\n\nexport const delAz = (azId: string) => {\n  return axios.delete(`az/${azId}`)\n}\n\nexport const logPath = (data: KeyValue) => {\n  return axios.get('opsCluster/logPath', {\n    params: data\n  })\n}\n\nexport const getLs = (data: KeyValue) => {\n  return axios.get('opsCluster/ls', {\n    params: data\n  })\n}\n\nexport const slowSql = (data: KeyValue) => {\n  return axios.get('opsCluster/slowSql', {\n    params: data\n  })\n}\n\nexport const auditLog = (data: KeyValue) => {\n  return axios.get('opsCluster/auditLog', {\n    params: data\n  })\n}\n\nexport const downloadFile = (data: KeyValue) => {\n  return axios.get('opsCluster/download', {\n    params: data\n  })\n}\n\n// WDR\nexport const wdrList = (data: KeyValue) => {\n  return axios.get('wdr/list', {\n    params: data\n  })\n}\nexport const wdrGenerate = (data: KeyValue) => {\n  return axios.post('wdr/generate', data)\n}\n\nexport const wdrDelete = (id: string) => {\n  return axios.delete('wdr/del/' + id)\n}\n\nexport const createSnapshot = (data: KeyValue) => {\n  return axios.get('wdr/createSnapshot', {\n    params: data\n  })\n}\n\nexport const downloadWdrFile = (data: KeyValue) => {\n  return axios.get('wdr/downloadWdr', {\n    params: data\n  })\n}\n\nexport const listSnapshot = (data: KeyValue) => {\n  return axios.get('wdr/listSnapshot', {\n    params: data\n  })\n}\n\n// backup\nexport const clusterBackup = (data: KeyValue) => {\n  return axios.post('backup/backup', data)\n}\n// backup page\nexport const backupPage = (data: KeyValue) => {\n  return axios.get('backup/page', {\n    params: data\n  })\n}\n// backup recover\nexport const clusterRecover = (id: string, data: KeyValue) => {\n  return axios.post('backup/recover/' + id, data)\n}\n// backup delete\nexport const backupDel = (id: string) => {\n  return axios.delete('backup/del/' + id)\n}\n\n// package manage \nexport const packageListAll = (data: KeyValue) => {\n  return axios.get('installPackageManager/list', {\n    params: data\n  })\n}\n\nexport const packagePage = (data: KeyValue) => {\n  return axios.get('installPackageManager/page', {\n    params: data\n  })\n}\n\nexport const packageDetailById = (id: string) => {\n  return axios.get('installPackageManager/detail/' + id)\n}\n\nexport const packageDel = (id: string) => {\n  return axios.delete('installPackageManager/' + id)\n}\n\nexport const addPackage = (data: KeyValue) => {\n  return axios.post('installPackageManager/save', data)\n}\n\nexport const editPackage = (azId: string, data: KeyValue) => {\n  return axios.put(`installPackageManager/update/${azId}`, data)\n}","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n// runtime helper for setting properties on components\n// in a tree-shakable way\nexports.default = (sfc, props) => {\n    const target = sfc.__vccOpts || sfc;\n    for (const [key, val] of props) {\n        target[key] = val;\n    }\n    return target;\n};\n","import { defineComponent as _defineComponent } from 'vue'\nimport { unref as _unref, resolveComponent as _resolveComponent, createVNode as _createVNode, toDisplayString as _toDisplayString, createTextVNode as _createTextVNode, withCtx as _withCtx, createElementVNode as _createElementVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, createBlock as _createBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-328973f2\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { class: \"snapshot-c\" }\nconst _hoisted_2 = { class: \"flex-between mb\" }\nconst _hoisted_3 = { class: \"flex-row\" }\nconst _hoisted_4 = { class: \"flex-row mr\" }\nconst _hoisted_5 = { class: \"top-label mr-s\" }\nconst _hoisted_6 = { class: \"flex-row mr\" }\nconst _hoisted_7 = { class: \"top-label mr-s\" }\n\nimport { KeyValue } from '@/types/global'\nimport { onMounted, reactive, computed } from 'vue'\nimport { Message, TableColumnData } from '@arco-design/web-vue'\nimport { clusterList, createSnapshot, getHostByClusterId, listSnapshot } from '@/api/ops'\nimport { useI18n } from 'vue-i18n'\n\nexport default /*#__PURE__*/_defineComponent({\n  setup(__props, { expose }) {\n\nconst { t } = useI18n()\nconst data = reactive<KeyValue>({\n  show: false,\n  title: '',\n  createLoading: false,\n  clusterId: '',\n  hostId: '',\n  clusterListLoading: false,\n  clusterList: [],\n  hostListLoading: false,\n  hostList: []\n})\n\nconst columns = computed(() => [\n  { title: t('snapshot.index.5mplywcvrq80'), dataIndex: 'snapshot_id' },\n  { title: t('snapshot.index.5mplywcvru80'), dataIndex: 'end_ts' }\n])\n\nconst list: {\n  data: Array<KeyValue>,\n  page: { page: number, pageSize: number },\n  loading: boolean\n} = reactive({\n  data: [],\n  page: { page: 1, pageSize: 10 },\n  loading: false\n})\n\nonMounted(() => {\n  getClusterList()\n})\n\nconst close = () => {\n  data.show = false\n}\n\nconst getClusterList = () => new Promise(resolve => {\n  data.clusterListLoading = true\n  clusterList().then((res: KeyValue) => {\n    if (Number(res.code) === 200) {\n      resolve(true)\n      res.data.forEach((item: KeyValue) => {\n        data.clusterList.push({\n          label: item.clusterId,\n          value: item.clusterId\n        })\n      })\n      data.clusterId = data.clusterList[0].value\n      getHostList()\n    } else resolve(false)\n  }).finally(() => {\n    data.clusterListLoading = false\n  })\n})\n\nconst getHostList = () => {\n  if (data.clusterId) {\n    const param = {\n      clusterId: data.clusterId\n    }\n    data.hostListLoading = true\n    getHostByClusterId(param).then((res: KeyValue) => {\n      if (Number(res.code) === 200) {\n        data.hostList = []\n        res.data.forEach((item: KeyValue) => {\n          data.hostList.push({\n            label: `${item.privateIp}(${item.hostname})`,\n            value: item.hostId\n          })\n        })\n        data.hostId = data.hostList[0].value\n        query()\n      } else {\n        Message.error('Failed to obtain host information')\n      }\n    }).finally(() => {\n      data.hostListLoading = false\n    })\n  }\n}\n\nconst handleCreate = () => {\n  data.createLoading = true\n  const param = {\n    clusterId: data.clusterId,\n    hostId: data.hostId\n  }\n  createSnapshot(param).then((res: KeyValue) => {\n    if (Number(res.code) === 200) {\n      setTimeout(() => {\n        query()\n      }, 1000)\n    } else {\n      Message.error('Failed to Generate a Snapshot')\n    }\n  }).catch(() => {\n    Message.error('Failed to Generate a Snapshot')\n  }).finally(() => {\n    data.createLoading = false\n  })\n}\n\nconst query = () => {\n  list.loading = true\n  const param = {\n    clusterId: data.clusterId,\n    hostId: data.hostId\n  }\n  listSnapshot(param).then((res: KeyValue) => {\n    if (Number(res.code) === 200) {\n      list.data = res.data\n    } else {\n      Message.error('Failed to obtain the snapshot query list')\n    }\n  }).catch(() => {\n    Message.error('Failed to obtain the snapshot query list')\n  }).finally(() => {\n    list.loading = false\n  })\n}\n\nconst open = () => new Promise(resolve => { // eslint-disable-line\n  data.show = true\n  data.title = t('snapshot.index.snapshotManage')\n})\nexpose({\n  open\n})\n\n\nreturn (_ctx: any,_cache: any) => {\n  const _component_icon_plus = _resolveComponent(\"icon-plus\")!\n  const _component_a_button = _resolveComponent(\"a-button\")!\n  const _component_a_option = _resolveComponent(\"a-option\")!\n  const _component_a_select = _resolveComponent(\"a-select\")!\n  const _component_a_table = _resolveComponent(\"a-table\")!\n  const _component_a_spin = _resolveComponent(\"a-spin\")!\n  const _component_a_modal = _resolveComponent(\"a-modal\")!\n\n  return (_openBlock(), _createBlock(_component_a_modal, {\n    \"mask-closable\": false,\n    \"esc-to-close\": false,\n    visible: _unref(data).show,\n    title: _unref(data).title,\n    onCancel: close,\n    \"modal-style\": { width: '900px', height: '600px' },\n    footer: false\n  }, {\n    default: _withCtx(() => [\n      _createElementVNode(\"div\", _hoisted_1, [\n        _createVNode(_component_a_spin, {\n          class: \"full-w\",\n          loading: _unref(data).createLoading,\n          tip: _ctx.$t('snapshot.index.5mplywcvqh80')\n        }, {\n          default: _withCtx(() => [\n            _createElementVNode(\"div\", _hoisted_2, [\n              _createVNode(_component_a_button, {\n                type: \"primary\",\n                onClick: handleCreate\n              }, {\n                icon: _withCtx(() => [\n                  _createVNode(_component_icon_plus)\n                ]),\n                default: _withCtx(() => [\n                  _createTextVNode(\" \" + _toDisplayString(_ctx.$t('snapshot.index.5mplywcvr080')), 1)\n                ]),\n                _: 1\n              }),\n              _createElementVNode(\"div\", _hoisted_3, [\n                _createElementVNode(\"div\", _hoisted_4, [\n                  _createElementVNode(\"div\", _hoisted_5, _toDisplayString(_ctx.$t('snapshot.index.5mplywcvr7c0')), 1),\n                  _createVNode(_component_a_select, {\n                    class: \"select-w\",\n                    loading: _unref(data).clusterListLoading,\n                    modelValue: _unref(data).clusterId,\n                    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event: any) => (_unref(data).clusterId = $event)),\n                    placeholder: _ctx.$t('snapshot.index.5mplywcvrb80'),\n                    onChange: getHostList\n                  }, {\n                    default: _withCtx(() => [\n                      (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_unref(data).clusterList, (item, index) => {\n                        return (_openBlock(), _createBlock(_component_a_option, {\n                          key: index,\n                          label: item.label,\n                          value: item.value\n                        }, null, 8, [\"label\", \"value\"]))\n                      }), 128))\n                    ]),\n                    _: 1\n                  }, 8, [\"loading\", \"modelValue\", \"placeholder\"])\n                ]),\n                _createElementVNode(\"div\", _hoisted_6, [\n                  _createElementVNode(\"div\", _hoisted_7, _toDisplayString(_ctx.$t('snapshot.index.5mplywcvres0')), 1),\n                  _createVNode(_component_a_select, {\n                    class: \"select-w\",\n                    loading: _unref(data).hostListLoading,\n                    modelValue: _unref(data).hostId,\n                    \"onUpdate:modelValue\": _cache[1] || (_cache[1] = ($event: any) => (_unref(data).hostId = $event)),\n                    placeholder: _ctx.$t('snapshot.index.5mplywcvrio0')\n                  }, {\n                    default: _withCtx(() => [\n                      (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_unref(data).hostList, (item, index) => {\n                        return (_openBlock(), _createBlock(_component_a_option, {\n                          key: index,\n                          label: item.label,\n                          value: item.value\n                        }, null, 8, [\"label\", \"value\"]))\n                      }), 128))\n                    ]),\n                    _: 1\n                  }, 8, [\"loading\", \"modelValue\", \"placeholder\"])\n                ]),\n                _createVNode(_component_a_button, {\n                  type: \"primary\",\n                  onClick: query\n                }, {\n                  default: _withCtx(() => [\n                    _createTextVNode(_toDisplayString(_ctx.$t('snapshot.index.5mplywcvrmg0')), 1)\n                  ]),\n                  _: 1\n                })\n              ])\n            ]),\n            _createVNode(_component_a_table, {\n              class: \"d-a-table-row full-h\",\n              data: _unref(list).data,\n              columns: _unref(columns),\n              pagination: _unref(list).page,\n              loading: _unref(list).loading\n            }, null, 8, [\"data\", \"columns\", \"pagination\", \"loading\"])\n          ]),\n          _: 1\n        }, 8, [\"loading\", \"tip\"])\n      ])\n    ]),\n    _: 1\n  }, 8, [\"visible\", \"title\"]))\n}\n}\n\n})","import script from \"./index.vue?vue&type=script&lang=ts&setup=true\"\nexport * from \"./index.vue?vue&type=script&lang=ts&setup=true\"\n\nimport \"./index.vue?vue&type=style&index=0&id=328973f2&lang=less&scoped=true\"\n\nimport exportComponent from \"/Users/xielibo/ideawork/huawei/base-ops/web-ui/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-328973f2\"]])\n\nexport default __exports__"],"names":["getEntryKey","axios","download","data","getEnvMonitorData","hostId","installOpenGauss","importOpenGauss","quickInstall","clusterCheck","params","uninstallOpenGauss","hasName","clusterList","openSSH","clusterMonitor","start","stop","restart","getHostByClusterId","listInstallPackage","path","hostListAll","hostUserListWithoutRoot","azListAll","logPath","getLs","slowSql","auditLog","downloadFile","wdrList","wdrGenerate","wdrDelete","id","createSnapshot","downloadWdrFile","listSnapshot","clusterBackup","backupPage","clusterRecover","backupDel","packagePage","packageDel","addPackage","editPackage","azId","exports","sfc","props","target","__vccOpts","key","val","_hoisted_1","class","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","_hoisted_6","_hoisted_7","_defineComponent","setup","__props","expose","t","useI18n","reactive","show","title","createLoading","clusterId","clusterListLoading","hostListLoading","hostList","columns","computed","dataIndex","list","page","pageSize","loading","onMounted","getClusterList","close","Promise","resolve","then","res","Number","code","forEach","item","push","label","value","getHostList","finally","param","privateIp","hostname","query","Message","handleCreate","setTimeout","catch","open","_ctx","_cache","_component_icon_plus","_resolveComponent","_component_a_button","_component_a_option","_component_a_select","_component_a_table","_component_a_spin","_component_a_modal","_openBlock","_createBlock","visible","_unref","onCancel","width","height","footer","default","_withCtx","_createElementVNode","_createVNode","tip","$t","type","onClick","icon","_createTextVNode","_toDisplayString","_","modelValue","$event","placeholder","onChange","_createElementBlock","_Fragment","_renderList","index","pagination","__exports__"],"sourceRoot":""}