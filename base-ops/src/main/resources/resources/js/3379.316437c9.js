"use strict";(self["webpackChunkweb_ui"]=self["webpackChunkweb_ui"]||[]).push([[3379],{3379:function(e,t,o){o.r(t),o.d(t,{default:function(){return k}});var n=o(70821),a=o(73017),l=o(63736),i=o(42119),c=o(35589),r=o(15784),d=o(89965),m=o(57330);const s={class:"scatter-config-container"},u={class:"mb-s"},p={class:"ch-title"},f={class:"mb"},g={class:"mb-s"},V={class:"ch-title"},C={class:"mb"},x={class:"mb-s flex-row"},N={class:"ch-title"},h={class:"flex-row",style:{width:"100%"}};var w=(0,n.defineComponent)({props:{stringOption:{type:Array,required:!0},numberOption:{type:Array,required:!0},datetimeOption:{type:Array,required:!0}},setup(e,{expose:t}){const{t:o}=(0,m.QT)(),w=((0,i.yj)(),(0,n.reactive)({mapJson:{list:[],loading:!1}})),v=(0,n.reactive)({indicator:{field:"",type:"",unit:""},location:{field:"",type:"",commonValue:"",diyValue:1,area:0},center:[void 0,void 0],zoom:0}),y=e=>{S(),e?(v.center=e.center?e.center:[void 0,void 0],v.zoom=e.zoom?e.zoom:0,v.indicator=e.indicator?e.indicator:{field:"",type:"",unit:""},v.location=e.location?e.location:{field:"",type:"",commonValue:"",diyValue:1,area:0}):(v.center=[void 0,void 0],v.zoom=0,v.indicator={field:"",type:"",unit:""},v.location={field:"",type:"",commonValue:"",diyValue:"LLA",area:0})},k=()=>{let e=!0,t="";return v.indicator&&v.indicator.field||(e=!1,t+=(t?"；\n ":"")+o("modeling.components.ScatterConfig.5mjcl4pctqg0")),v.indicator&&v.indicator.type||(e=!1,t+=(t?"；\n ":"")+o("modeling.components.ScatterConfig.5mjcl4pcu280")),v.location&&v.location.field||(e=!1,t+=(t?"；\n ":"")+o("modeling.components.ScatterConfig.5mjcl4pcu7c0")),v.center&&v.center[0]&&v.center[1]||(e=!1,t+=(t?"；\n ":"")+o("modeling.components.ScatterConfig.5mjcl4pcuec0")),v.center&&v.location.commonValue||(e=!1,t+=(t?"；\n ":"")+o("modeling.components.ScatterConfig.5mjcl4pcuk00")),e||c.Z.error({title:o("modeling.components.BarConfig.5m7insim3vc0"),content:t,closable:!0}),e},S=()=>{w.mapJson.loading=!0,(0,d.w0)(Number(window.$wujie?.props.data.id)).then((e=>{w.mapJson.loading=!1,200===Number(e.code)&&(w.mapJson.list=e.geoFiles)}))},b=e=>{(0,d.j9)(e.id).then((e=>{200===Number(e.code)&&(r.Z.success({content:o("modeling.components.ScatterConfig.5m7iicznask0")}),S())}))},_=(0,n.reactive)({visible:!1,data:{file:void 0,name:""},loading:!1,rules:{name:[{required:!0,message:o("modeling.components.ScatterConfig.5m7iicznaok0")}],file:[{required:!0,message:o("modeling.components.ScatterConfig.5m7iicznaug0")}]}}),z=(0,n.ref)(),$=()=>{_.data.name="",_.data.file=void 0,_.visible=!0},B=()=>{_.visible=!1},D=(0,n.ref)(),E=e=>{e.length>0&&(e[0].file.type.includes("json")?_.data.file=e:(r.Z.error({content:o("modeling.components.ScatterConfig.5m7iicznawk0")}),_.data.file=[]))},T=()=>{D.value?.validate((e=>{if(!e){_.loading=!0;let e=new FormData;e.append("id",String(window.$wujie?.props.data.id)),e.append("name",_.data.name),e.append("file",_.data.file[0].file),(0,d.DG)(e).then((e=>{_.loading=!1,200===Number(e.code)&&(r.Z.success({content:o("modeling.components.ScatterConfig.5m7iicznayc0")}),B(),S())})).catch((()=>{_.loading=!1}))}}))};return t({config:v,validate:k,init:y}),(t,o)=>{const i=(0,n.resolveComponent)("icon-tag"),c=(0,n.resolveComponent)("a-option"),r=(0,n.resolveComponent)("a-select"),d=(0,n.resolveComponent)("a-col"),m=(0,n.resolveComponent)("a-input"),y=(0,n.resolveComponent)("a-row"),k=(0,n.resolveComponent)("a-input-number"),S=(0,n.resolveComponent)("a-button"),j=(0,n.resolveComponent)("a-popconfirm"),U=(0,n.resolveComponent)("a-form-item"),L=(0,n.resolveComponent)("a-upload"),O=(0,n.resolveComponent)("a-form"),q=(0,n.resolveComponent)("a-modal");return(0,n.openBlock)(),(0,n.createElementBlock)("div",s,[(0,n.createElementVNode)("div",u,[(0,n.createElementVNode)("div",p,(0,n.toDisplayString)(t.$t("modeling.components.ScatterConfig.5m7iiczn8k80")),1)]),(0,n.createElementVNode)("div",f,[(0,n.createVNode)(y,{align:"center",class:"mb-s"},{default:(0,n.withCtx)((()=>[(0,n.createVNode)(d,{class:"mr-xs",span:9},{default:(0,n.withCtx)((()=>[(0,n.createVNode)(r,{modelValue:(0,n.unref)(v).indicator.field,"onUpdate:modelValue":o[0]||(o[0]=e=>(0,n.unref)(v).indicator.field=e),placeholder:t.$t("modeling.components.LineConfig.5mpu292dkhc0")},{default:(0,n.withCtx)((()=>[((0,n.openBlock)(!0),(0,n.createElementBlock)(n.Fragment,null,(0,n.renderList)(e.numberOption,((e,t)=>((0,n.openBlock)(),(0,n.createBlock)(l["default"],{text:e.label,key:t,content:e.label},{default:(0,n.withCtx)((()=>[(0,n.createVNode)(c,{value:e.value},{default:(0,n.withCtx)((()=>[e.isCustom?((0,n.openBlock)(),(0,n.createBlock)(i,{key:0,class:"mr-s"})):(0,n.createCommentVNode)("",!0),(0,n.createTextVNode)((0,n.toDisplayString)(e.label),1)])),_:2},1032,["value"])])),_:2},1032,["text","content"])))),128))])),_:1},8,["modelValue","placeholder"])])),_:1}),(0,n.createVNode)(d,{class:"mr-xs",span:6},{default:(0,n.withCtx)((()=>[(0,n.createVNode)(r,{modelValue:(0,n.unref)(v).indicator.type,"onUpdate:modelValue":o[1]||(o[1]=e=>(0,n.unref)(v).indicator.type=e),placeholder:t.$t("modeling.components.LineConfig.5mpu292dky40")},{default:(0,n.withCtx)((()=>[((0,n.openBlock)(!0),(0,n.createElementBlock)(n.Fragment,null,(0,n.renderList)((0,n.unref)(a.indicatorType),((e,t)=>((0,n.openBlock)(),(0,n.createBlock)(c,{key:`a${t}`,value:e.value},{default:(0,n.withCtx)((()=>[(0,n.createTextVNode)((0,n.toDisplayString)(e.label),1)])),_:2},1032,["value"])))),128))])),_:1},8,["modelValue","placeholder"])])),_:1}),(0,n.createVNode)(d,{class:"mr-xs",span:8},{default:(0,n.withCtx)((()=>[(0,n.createVNode)(m,{"max-length":140,model:"config.indicator.unit"},{prepend:(0,n.withCtx)((()=>[(0,n.createTextVNode)((0,n.toDisplayString)(t.$t("modeling.components.ScatterConfig.5m7iiczn92w0")),1)])),_:1})])),_:1})])),_:1})]),(0,n.createElementVNode)("div",g,[(0,n.createElementVNode)("div",V,(0,n.toDisplayString)(t.$t("modeling.components.ScatterConfig.5m7iiczn97w0")),1)]),(0,n.createElementVNode)("div",C,[(0,n.createVNode)(y,{align:"center",class:"mb-s"},{default:(0,n.withCtx)((()=>[(0,n.createVNode)(d,{span:5},{default:(0,n.withCtx)((()=>[(0,n.createTextVNode)((0,n.toDisplayString)(t.$t("modeling.components.ScatterConfig.5m7iiczn9b80")),1)])),_:1}),(0,n.createVNode)(d,{class:"mr-xs",span:18},{default:(0,n.withCtx)((()=>[(0,n.createVNode)(r,{modelValue:(0,n.unref)(v).location.field,"onUpdate:modelValue":o[2]||(o[2]=e=>(0,n.unref)(v).location.field=e),placeholder:t.$t("modeling.components.ScatterConfig.5m7iiczn9b80")},{default:(0,n.withCtx)((()=>[((0,n.openBlock)(!0),(0,n.createElementBlock)(n.Fragment,null,(0,n.renderList)(e.stringOption,((e,t)=>((0,n.openBlock)(),(0,n.createBlock)(l["default"],{text:e.label,key:t,content:e.label},{default:(0,n.withCtx)((()=>[(0,n.createVNode)(c,{value:e.value},{default:(0,n.withCtx)((()=>[e.isCustom?((0,n.openBlock)(),(0,n.createBlock)(i,{key:0,class:"mr-s"})):(0,n.createCommentVNode)("",!0),(0,n.createTextVNode)((0,n.toDisplayString)(e.label),1)])),_:2},1032,["value"])])),_:2},1032,["text","content"])))),128))])),_:1},8,["modelValue","placeholder"])])),_:1})])),_:1}),(0,n.createVNode)(y,{align:"center",class:"mb-s"},{default:(0,n.withCtx)((()=>[(0,n.createVNode)(d,{span:5},{default:(0,n.withCtx)((()=>[(0,n.createTextVNode)((0,n.toDisplayString)(t.$t("modeling.components.ScatterConfig.5m7iiczn9dw0")),1)])),_:1}),(0,n.createVNode)(d,{span:8,class:"mr-xs"},{default:(0,n.withCtx)((()=>[(0,n.createVNode)(k,{modelValue:(0,n.unref)(v).center[0],"onUpdate:modelValue":o[3]||(o[3]=e=>(0,n.unref)(v).center[0]=e),placeholder:t.$t("modeling.components.ScatterConfig.5m7iiczn9gk0")},null,8,["modelValue","placeholder"])])),_:1}),(0,n.createVNode)(d,{span:8},{default:(0,n.withCtx)((()=>[(0,n.createVNode)(k,{modelValue:(0,n.unref)(v).center[1],"onUpdate:modelValue":o[4]||(o[4]=e=>(0,n.unref)(v).center[1]=e),placeholder:t.$t("modeling.components.ScatterConfig.5m7iiczn9j80")},null,8,["modelValue","placeholder"])])),_:1})])),_:1}),(0,n.createVNode)(y,{align:"center",class:"mb-s"},{default:(0,n.withCtx)((()=>[(0,n.createVNode)(d,{span:5},{default:(0,n.withCtx)((()=>[(0,n.createTextVNode)((0,n.toDisplayString)(t.$t("modeling.components.ScatterConfig.5m7iiczn9m40")),1)])),_:1}),(0,n.createVNode)(d,{span:8,class:"mr-xs"},{default:(0,n.withCtx)((()=>[(0,n.createVNode)(k,{modelValue:(0,n.unref)(v).zoom,"onUpdate:modelValue":o[5]||(o[5]=e=>(0,n.unref)(v).zoom=e)},null,8,["modelValue"])])),_:1})])),_:1}),(0,n.createVNode)(y,{align:"center"},{default:(0,n.withCtx)((()=>[(0,n.createVNode)(d,{span:5},{default:(0,n.withCtx)((()=>[(0,n.createTextVNode)((0,n.toDisplayString)(t.$t("modeling.components.ScatterConfig.5m7iiczn9ow0")),1)])),_:1}),(0,n.createVNode)(d,{span:8},{default:(0,n.withCtx)((()=>[(0,n.createVNode)(k,{modelValue:(0,n.unref)(v).location.area,"onUpdate:modelValue":o[6]||(o[6]=e=>(0,n.unref)(v).location.area=e)},null,8,["modelValue"])])),_:1}),(0,n.createVNode)(d,{span:2,style:{"padding-left":"10px"}},{default:(0,n.withCtx)((()=>[(0,n.createTextVNode)((0,n.toDisplayString)(t.$t("modeling.components.ScatterConfig.5m7iiczn9rk0")),1)])),_:1})])),_:1})]),(0,n.createElementVNode)("div",null,[(0,n.createElementVNode)("div",x,[(0,n.createElementVNode)("div",N,(0,n.toDisplayString)(t.$t("modeling.components.ScatterConfig.5m7iiczn9u40")),1),(0,n.createVNode)(S,{style:{"margin-left":"auto"},type:"primary",size:"mini",onClick:$},{default:(0,n.withCtx)((()=>[(0,n.createTextVNode)((0,n.toDisplayString)(t.$t("modeling.components.ScatterConfig.5m7iiczn9wk0")),1)])),_:1})]),(0,n.createVNode)(y,{align:"center",class:"mb-s"},{default:(0,n.withCtx)((()=>[(0,n.createVNode)(d,{span:5},{default:(0,n.withCtx)((()=>[(0,n.createTextVNode)((0,n.toDisplayString)(t.$t("modeling.components.ScatterConfig.5m7iiczn9zg0")),1)])),_:1}),(0,n.createVNode)(d,{span:17},{default:(0,n.withCtx)((()=>[(0,n.createVNode)(r,{modelValue:(0,n.unref)(v).location.commonValue,"onUpdate:modelValue":o[8]||(o[8]=e=>(0,n.unref)(v).location.commonValue=e),loading:(0,n.unref)(w).mapJson.loading,placeholder:t.$t("modeling.components.ScatterConfig.5mjcl4pctfw0")},{default:(0,n.withCtx)((()=>[((0,n.openBlock)(!0),(0,n.createElementBlock)(n.Fragment,null,(0,n.renderList)((0,n.unref)(w).mapJson.list,((e,a)=>((0,n.openBlock)(),(0,n.createBlock)(c,{key:`option${a}`,value:e.id,label:e.name,class:"scatter-config-container-a-option-dy"},{default:(0,n.withCtx)((()=>[(0,n.createElementVNode)("div",h,[(0,n.createElementVNode)("div",null,(0,n.toDisplayString)(e.registerName),1),(0,n.createVNode)(j,{content:t.$t("modeling.components.ScatterConfig.5m7iiczna1w0"),type:"warning","ok-text":t.$t("modeling.components.ScatterConfig.5m7iiczna4o0"),"cancel-text":t.$t("modeling.components.ScatterConfig.5m7iiczna740"),onOk:t=>b(e)},{default:(0,n.withCtx)((()=>[(0,n.createVNode)(S,{type:"primary",onClick:o[7]||(o[7]=(0,n.withModifiers)((()=>{}),["stop"])),size:"mini",style:{"margin-left":"auto"}},{default:(0,n.withCtx)((()=>[(0,n.createTextVNode)((0,n.toDisplayString)(t.$t("modeling.components.ScatterConfig.5m7iiczna9k0")),1)])),_:1})])),_:2},1032,["content","ok-text","cancel-text","onOk"])])])),_:2},1032,["value","label"])))),128))])),_:1},8,["modelValue","loading","placeholder"])])),_:1})])),_:1}),(0,n.createVNode)(y,{align:"center",class:"mb-s"},{default:(0,n.withCtx)((()=>[(0,n.createVNode)(d,{span:5},{default:(0,n.withCtx)((()=>[(0,n.createTextVNode)((0,n.toDisplayString)(t.$t("modeling.components.ScatterConfig.5m7iicznac00")),1)])),_:1}),(0,n.createVNode)(d,{span:17},{default:(0,n.withCtx)((()=>[(0,n.createVNode)(r,{modelValue:(0,n.unref)(v).location.diyValue,"onUpdate:modelValue":o[9]||(o[9]=e=>(0,n.unref)(v).location.diyValue=e)},{default:(0,n.withCtx)((()=>[(0,n.createVNode)(c,{value:"LLA"},{default:(0,n.withCtx)((()=>[(0,n.createTextVNode)((0,n.toDisplayString)(t.$t("modeling.components.ScatterConfig.5m7iicznaec0")),1)])),_:1})])),_:1},8,["modelValue"])])),_:1})])),_:1})]),(0,n.createVNode)(q,{title:t.$t("modeling.components.ScatterConfig.5m7iicznags0"),"ok-text":t.$t("modeling.components.ScatterConfig.5m7iicznak00"),"ok-loading":(0,n.unref)(_).loading,visible:(0,n.unref)(_).visible,onCancel:B,onOk:T},{default:(0,n.withCtx)((()=>[(0,n.createVNode)(O,{model:(0,n.unref)(_).data,rules:(0,n.unref)(_).rules,ref:(e,t)=>{t["formRef"]=e,D.value=e},"label-col-props":{span:4,offset:0}},{default:(0,n.withCtx)((()=>[(0,n.createVNode)(U,{label:t.$t("modeling.components.ScatterConfig.5m7iicznam80"),field:"name"},{default:(0,n.withCtx)((()=>[(0,n.createVNode)(m,{"max-length":140,"show-word-limit":"",modelValue:(0,n.unref)(_).data.name,"onUpdate:modelValue":o[10]||(o[10]=e=>(0,n.unref)(_).data.name=e),placeholder:t.$t("modeling.components.ScatterConfig.5m7iicznaok0")},null,8,["modelValue","placeholder"])])),_:1},8,["label"]),(0,n.createVNode)(U,{label:t.$t("modeling.components.ScatterConfig.5m7iicznaqs0"),field:"file",class:"scatter-config-container-d-upload"},{default:(0,n.withCtx)((()=>[(0,n.createVNode)(L,{"file-list":(0,n.unref)(_).data.file,"onUpdate:file-list":o[11]||(o[11]=e=>(0,n.unref)(_).data.file=e),draggable:"",action:"/","auto-upload":!1,ref:(e,t)=>{t["uploadRef"]=e,z.value=e},accept:".json",multiple:!1,"show-retry-button":!1,limit:1,onChange:E},null,8,["file-list"])])),_:1},8,["label"])])),_:1},8,["model","rules"])])),_:1},8,["title","ok-text","ok-loading","visible"])])}}}),v=o(83744);const y=(0,v.Z)(w,[["__scopeId","data-v-46e36ae0"]]);var k=y}}]);
//# sourceMappingURL=3379.316437c9.js.map