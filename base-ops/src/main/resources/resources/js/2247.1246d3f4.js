"use strict";(self["webpackChunkweb_ui"]=self["webpackChunkweb_ui"]||[]).push([[2247],{39518:function(e,t,r){r.d(t,{$4:function(){return N},Ac:function(){return s},BL:function(){return h},C4:function(){return S},DF:function(){return $},GD:function(){return _},IW:function(){return D},K4:function(){return E},Kf:function(){return A},LR:function(){return n},Lf:function(){return o},Ox:function(){return y},PK:function(){return p},R1:function(){return I},Sv:function(){return T},T2:function(){return f},T4:function(){return L},TL:function(){return V},TY:function(){return O},Uw:function(){return U},We:function(){return G},YQ:function(){return P},Ye:function(){return g},ZA:function(){return F},_V:function(){return c},c0:function(){return u},gi:function(){return x},h:function(){return v},jQ:function(){return K},jV:function(){return B},nT:function(){return C},sT:function(){return b},tA:function(){return i},ur:function(){return k},w3:function(){return m},xj:function(){return d},y6:function(){return j},zs:function(){return q},zx:function(){return w}});var l=r(9669),a=r.n(l);const o=()=>a().get("encryption/getKey"),n=e=>a().post("opsCluster/download",e||{}),u=e=>a().get(`opsCluster/env/${e}`),s=e=>a().post("opsCluster/install",e),i=e=>a().post("opsCluster/import",e),p=e=>a().post("opsCluster/quickInstall",e),d=e=>a().get("opsCluster/check",{params:e}),m=e=>a().post("opsCluster/uninstall",e),f=e=>a().get("opsCluster/hasName",{params:e}),c=()=>a().get("opsCluster/listCluster"),g=e=>a().post("opsCluster/ssh",e),C=e=>a().get("opsCluster/monitor",{params:e}),h=e=>a().post("opsCluster/start",e),b=e=>a().post("opsCluster/stop",e),k=e=>a().post("opsCluster/restart",e),V=e=>a().get("opsCluster/listHost",{params:e}),v=e=>a().get(e?`opsCluster/listInstallPackage?path=${e}`:"opsCluster/listInstallPackage"),w=()=>a().get("host/listAll"),P=e=>a().get(`hostUser/listAllWithoutRoot/${e}`),N=()=>a().get("az/listAll"),$=e=>a().get("opsCluster/logPath",{params:e}),x=e=>a().get("opsCluster/ls",{params:e}),U=e=>a().get("opsCluster/slowSql",{params:e}),_=e=>a().get("opsCluster/auditLog",{params:e}),T=e=>a().get("opsCluster/download",{params:e}),j=e=>a().get("wdr/list",{params:e}),I=e=>a().post("wdr/generate",e),q=e=>a()["delete"]("wdr/del/"+e),y=e=>a().get("wdr/createSnapshot",{params:e}),E=e=>a().get("wdr/downloadWdr",{params:e}),S=e=>a().get("wdr/listSnapshot",{params:e}),D=e=>a().post("backup/backup",e),L=e=>a().get("backup/page",{params:e}),A=(e,t)=>a().post("backup/recover/"+e,t),B=e=>a()["delete"]("backup/del/"+e),G=e=>a().get("installPackageManager/page",{params:e}),O=e=>a()["delete"]("installPackageManager/"+e),F=e=>a().post("installPackageManager/save",e),K=(e,t)=>a().put(`installPackageManager/update/${e}`,t)},83744:function(e,t){t.Z=(e,t)=>{const r=e.__vccOpts||e;for(const[l,a]of t)r[l]=a;return r}},22247:function(e,t,r){r.r(t),r.d(t,{default:function(){return g}});var l=r(70821),a=r(40225),o=r(98535),n=r(39518),u=r(57330);const s={class:"cluster-config-c"},i={class:"flex-col"},p={class:"flex-col-start"},d={class:"node-top ft-b full-w mb"};var m=(0,l.defineComponent)({setup(e,{expose:t}){const{t:r}=(0,u.QT)(),m=(0,a.BH)(),f=(0,l.reactive)({form:{clusterId:"",clusterName:"",installPath:"/opt/openGauss/install/app",logPath:"/opt/openGauss/log/omm",tmpPath:"/opt/openGauss/tmp",omToolsPath:"/opt/openGauss/install/om",corePath:"/opt/openGauss/corefile",port:"5432",enableDCF:!1,databaseUsername:"",databasePassword:""},rules:{}});(0,l.onMounted)((()=>{c(),Object.keys(m.getEnterpriseConfig).length&&Object.assign(f.form,m.getEnterpriseConfig)}));const c=()=>{f.rules={clusterId:[{required:!0,"validate-trigger":"blur",message:r("enterprise.ClusterConfig.5mpm3ku3hik0")},{validator:(e,t)=>new Promise((l=>{const a={name:e};(0,n.T2)(a).then((e=>{200===Number(e.code)?"Y"===e.data.has?(t(r("enterprise.ClusterConfig.5mpm3ku3jo00")),l(!1)):l(!0):(t(r("enterprise.ClusterConfig.5mpm3ku3jqo0")),l(!1))}))}))}],clusterName:[{required:!0,"validate-trigger":"blur",message:r("enterprise.ClusterConfig.5mpm3ku3hr00")}],installPath:[{required:!0,"validate-trigger":"blur",message:r("enterprise.ClusterConfig.5mpm3ku3i340")}],logPath:[{required:!0,"validate-trigger":"blur",message:r("enterprise.ClusterConfig.5mpm3ku3iag0")}],tmpPath:[{required:!0,"validate-trigger":"blur",message:r("enterprise.ClusterConfig.5mpm3ku3ihg0")}],omToolsPath:[{required:!0,"validate-trigger":"blur",message:r("enterprise.ClusterConfig.5mpm3ku3iok0")}],corePath:[{required:!0,"validate-trigger":"blur",message:r("enterprise.ClusterConfig.5mpm3ku3ivk0")}],databaseUsername:[{required:!0,"validate-trigger":"blur",message:r("enterprise.ClusterConfig.5mpm3ku3j9s0")}],databasePassword:[{required:!0,"validate-trigger":"blur",message:r("enterprise.ClusterConfig.5mpm3ku3ji00")}]}},g=(0,l.ref)(),C=async()=>{const e=await(g.value?.validate());if(e)return!1;{const e=JSON.parse(JSON.stringify(f.form));return m.setInstallContext({clusterId:e.clusterId,clusterName:e.clusterName,deployType:o.K0.CLUSTER}),e.nodeConfigList=[],m.setEnterpriseConfig(e),!0}};t({beforeConfirm:C});const h=(0,l.computed)((()=>m.getInstallConfig.installType));return(e,t)=>{const r=(0,l.resolveComponent)("a-input"),a=(0,l.resolveComponent)("a-form-item"),o=(0,l.resolveComponent)("a-input-password"),n=(0,l.resolveComponent)("a-checkbox"),u=(0,l.resolveComponent)("a-form");return(0,l.openBlock)(),(0,l.createElementBlock)("div",s,[(0,l.createElementVNode)("div",i,[(0,l.createElementVNode)("div",p,[(0,l.createElementVNode)("div",d,(0,l.toDisplayString)(e.$t("enterprise.ClusterConfig.5mpm3ku3go40")),1),(0,l.createVNode)(u,{model:(0,l.unref)(f).form,rules:(0,l.unref)(f).rules,"auto-label-width":"",style:{width:"850px"},ref:(e,t)=>{t["formRef"]=e,g.value=e}},{default:(0,l.withCtx)((()=>[(0,l.createVNode)(a,{field:"clusterId",label:e.$t("enterprise.ClusterConfig.5mpm3ku3hcg0"),"validate-trigger":"blur"},{default:(0,l.withCtx)((()=>[(0,l.createVNode)(r,{modelValue:(0,l.unref)(f).form.clusterId,"onUpdate:modelValue":t[0]||(t[0]=e=>(0,l.unref)(f).form.clusterId=e),placeholder:e.$t("enterprise.ClusterConfig.5mpm3ku3hik0")},null,8,["modelValue","placeholder"])])),_:1},8,["label"]),(0,l.createVNode)(a,{field:"clusterName",label:e.$t("enterprise.ClusterConfig.5mpm3ku3hn40"),"validate-trigger":"blur"},{default:(0,l.withCtx)((()=>[(0,l.createVNode)(r,{modelValue:(0,l.unref)(f).form.clusterName,"onUpdate:modelValue":t[1]||(t[1]=e=>(0,l.unref)(f).form.clusterName=e),placeholder:e.$t("enterprise.ClusterConfig.5mpm3ku3hr00")},null,8,["modelValue","placeholder"])])),_:1},8,["label"]),(0,l.createVNode)(a,{field:"installPath",label:e.$t("enterprise.ClusterConfig.5mpm3ku3hv40"),"validate-trigger":"blur"},{default:(0,l.withCtx)((()=>[(0,l.createVNode)(r,{modelValue:(0,l.unref)(f).form.installPath,"onUpdate:modelValue":t[2]||(t[2]=e=>(0,l.unref)(f).form.installPath=e),placeholder:e.$t("enterprise.ClusterConfig.5mpm3ku3i340")},null,8,["modelValue","placeholder"])])),_:1},8,["label"]),(0,l.createVNode)(a,{field:"logPath",label:e.$t("enterprise.ClusterConfig.5mpm3ku3i6s0"),"validate-trigger":"blur"},{default:(0,l.withCtx)((()=>[(0,l.createVNode)(r,{modelValue:(0,l.unref)(f).form.logPath,"onUpdate:modelValue":t[3]||(t[3]=e=>(0,l.unref)(f).form.logPath=e),placeholder:e.$t("enterprise.ClusterConfig.5mpm3ku3iag0")},null,8,["modelValue","placeholder"])])),_:1},8,["label"]),(0,l.createVNode)(a,{field:"tmpPath",label:e.$t("enterprise.ClusterConfig.5mpm3ku3ie40"),"validate-trigger":"blur"},{default:(0,l.withCtx)((()=>[(0,l.createVNode)(r,{modelValue:(0,l.unref)(f).form.tmpPath,"onUpdate:modelValue":t[4]||(t[4]=e=>(0,l.unref)(f).form.tmpPath=e),placeholder:e.$t("enterprise.ClusterConfig.5mpm3ku3ihg0")},null,8,["modelValue","placeholder"])])),_:1},8,["label"]),(0,l.createVNode)(a,{field:"omToolsPath",label:e.$t("enterprise.ClusterConfig.5mpm3ku3il80"),"validate-trigger":"blur"},{default:(0,l.withCtx)((()=>[(0,l.createVNode)(r,{modelValue:(0,l.unref)(f).form.omToolsPath,"onUpdate:modelValue":t[5]||(t[5]=e=>(0,l.unref)(f).form.omToolsPath=e),placeholder:e.$t("enterprise.ClusterConfig.5mpm3ku3iok0")},null,8,["modelValue","placeholder"])])),_:1},8,["label"]),(0,l.createVNode)(a,{field:"corePath",label:e.$t("enterprise.ClusterConfig.5mpm3ku3is00"),"validate-trigger":"blur"},{default:(0,l.withCtx)((()=>[(0,l.createVNode)(r,{modelValue:(0,l.unref)(f).form.corePath,"onUpdate:modelValue":t[6]||(t[6]=e=>(0,l.unref)(f).form.corePath=e),placeholder:e.$t("enterprise.ClusterConfig.5mpm3ku3ivk0")},null,8,["modelValue","placeholder"])])),_:1},8,["label"]),(0,l.createVNode)(a,{field:"port",label:e.$t("enterprise.ClusterConfig.5mpm3ku3iz80"),"validate-trigger":"blur"},{default:(0,l.withCtx)((()=>[(0,l.createVNode)(r,{modelValue:(0,l.unref)(f).form.port,"onUpdate:modelValue":t[7]||(t[7]=e=>(0,l.unref)(f).form.port=e),disabled:"",placeholder:e.$t("enterprise.ClusterConfig.5mpm3ku3j300")},null,8,["modelValue","placeholder"])])),_:1},8,["label"]),"import"===(0,l.unref)(h)?((0,l.openBlock)(),(0,l.createBlock)(a,{key:0,field:"databaseUsername",label:e.$t("enterprise.ClusterConfig.5mpm3ku3j6k0"),"validate-trigger":"blur"},{default:(0,l.withCtx)((()=>[(0,l.createVNode)(o,{modelValue:(0,l.unref)(f).form.databaseUsername,"onUpdate:modelValue":t[8]||(t[8]=e=>(0,l.unref)(f).form.databaseUsername=e),placeholder:e.$t("enterprise.ClusterConfig.5mpm3ku3j9s0"),"allow-clear":""},null,8,["modelValue","placeholder"])])),_:1},8,["label"])):(0,l.createCommentVNode)("",!0),(0,l.createVNode)(a,{field:"databasePassword",label:e.$t("enterprise.ClusterConfig.5mpm3ku3jdg0"),"validate-trigger":"blur"},{default:(0,l.withCtx)((()=>[(0,l.createVNode)(o,{modelValue:(0,l.unref)(f).form.databasePassword,"onUpdate:modelValue":t[9]||(t[9]=e=>(0,l.unref)(f).form.databasePassword=e),placeholder:e.$t("enterprise.ClusterConfig.5mpm3ku3ji00"),"allow-clear":""},null,8,["modelValue","placeholder"])])),_:1},8,["label"]),(0,l.createVNode)(a,{field:"enableDCF",label:e.$t("enterprise.ClusterConfig.5mpm3ku3jkw0")},{default:(0,l.withCtx)((()=>[(0,l.createVNode)(n,{modelValue:(0,l.unref)(f).form.enableDCF,"onUpdate:modelValue":t[10]||(t[10]=e=>(0,l.unref)(f).form.enableDCF=e)},null,8,["modelValue"])])),_:1},8,["label"])])),_:1},8,["model","rules"])])])])}}}),f=r(83744);const c=(0,f.Z)(m,[["__scopeId","data-v-fdd26ac4"]]);var g=c}}]);
//# sourceMappingURL=2247.1246d3f4.js.map