"use strict";(self["webpackChunkweb_ui"]=self["webpackChunkweb_ui"]||[]).push([[3283],{39518:function(e,t,n){n.d(t,{$4:function(){return I},Ac:function(){return u},BL:function(){return v},C4:function(){return F},DF:function(){return y},GD:function(){return _},IW:function(){return Z},K4:function(){return P},Kf:function(){return A},LR:function(){return s},Lf:function(){return a},Ox:function(){return T},PK:function(){return c},R1:function(){return E},Sv:function(){return $},T2:function(){return f},T4:function(){return q},TL:function(){return L},TY:function(){return z},Uw:function(){return N},We:function(){return M},YQ:function(){return x},Ye:function(){return g},ZA:function(){return K},_V:function(){return h},c0:function(){return l},gi:function(){return V},h:function(){return b},jQ:function(){return U},jV:function(){return D},nT:function(){return m},sT:function(){return w},tA:function(){return i},ur:function(){return C},w3:function(){return p},xj:function(){return d},y6:function(){return B},zs:function(){return S},zx:function(){return k}});var o=n(9669),r=n.n(o);const a=()=>r().get("encryption/getKey"),s=e=>r().post("opsCluster/download",e||{}),l=e=>r().get(`opsCluster/env/${e}`),u=e=>r().post("opsCluster/install",e),i=e=>r().post("opsCluster/import",e),c=e=>r().post("opsCluster/quickInstall",e),d=e=>r().get("opsCluster/check",{params:e}),p=e=>r().post("opsCluster/uninstall",e),f=e=>r().get("opsCluster/hasName",{params:e}),h=()=>r().get("opsCluster/listCluster"),g=e=>r().post("opsCluster/ssh",e),m=e=>r().get("opsCluster/monitor",{params:e}),v=e=>r().post("opsCluster/start",e),w=e=>r().post("opsCluster/stop",e),C=e=>r().post("opsCluster/restart",e),L=e=>r().get("opsCluster/listHost",{params:e}),b=e=>r().get(e?`opsCluster/listInstallPackage?path=${e}`:"opsCluster/listInstallPackage"),k=()=>r().get("host/listAll"),x=e=>r().get(`hostUser/listAllWithoutRoot/${e}`),I=()=>r().get("az/listAll"),y=e=>r().get("opsCluster/logPath",{params:e}),V=e=>r().get("opsCluster/ls",{params:e}),N=e=>r().get("opsCluster/slowSql",{params:e}),_=e=>r().get("opsCluster/auditLog",{params:e}),$=e=>r().get("opsCluster/download",{params:e}),B=e=>r().get("wdr/list",{params:e}),E=e=>r().post("wdr/generate",e),S=e=>r()["delete"]("wdr/del/"+e),T=e=>r().get("wdr/createSnapshot",{params:e}),P=e=>r().get("wdr/downloadWdr",{params:e}),F=e=>r().get("wdr/listSnapshot",{params:e}),Z=e=>r().post("backup/backup",e),q=e=>r().get("backup/page",{params:e}),A=(e,t)=>r().post("backup/recover/"+e,t),D=e=>r()["delete"]("backup/del/"+e),M=e=>r().get("installPackageManager/page",{params:e}),z=e=>r()["delete"]("installPackageManager/"+e),K=e=>r().post("installPackageManager/save",e),U=(e,t)=>r().put(`installPackageManager/update/${e}`,t)},83744:function(e,t){t.Z=(e,t)=>{const n=e.__vccOpts||e;for(const[o,r]of t)n[o]=r;return n}},73283:function(e,t,n){n.r(t),n.d(t,{default:function(){return v}});n(57658);var o=n(70821),r=n(15784),a=n(39518),s=n(57330);const l={class:"snapshot-c"},u={class:"flex-between mb"},i={class:"flex-row"},c={class:"flex-row mr"},d={class:"top-label mr-s"},p={class:"flex-row mr"},f={class:"top-label mr-s"};var h=(0,o.defineComponent)({setup(e,{expose:t}){const{t:n}=(0,s.QT)(),h=(0,o.reactive)({show:!1,title:"",createLoading:!1,clusterId:"",hostId:"",clusterListLoading:!1,clusterList:[],hostListLoading:!1,hostList:[]}),g=(0,o.computed)((()=>[{title:n("snapshot.index.5mplywcvrq80"),dataIndex:"snapshot_id"},{title:n("snapshot.index.5mplywcvru80"),dataIndex:"end_ts"}])),m=(0,o.reactive)({data:[],page:{page:1,pageSize:10},loading:!1});(0,o.onMounted)((()=>{w()}));const v=()=>{h.show=!1},w=()=>new Promise((e=>{h.clusterListLoading=!0,(0,a._V)().then((t=>{200===Number(t.code)?(e(!0),t.data.forEach((e=>{h.clusterList.push({label:e.clusterId,value:e.clusterId})})),h.clusterId=h.clusterList[0].value,C()):e(!1)})).finally((()=>{h.clusterListLoading=!1}))})),C=()=>{if(h.clusterId){const e={clusterId:h.clusterId};h.hostListLoading=!0,(0,a.TL)(e).then((e=>{200===Number(e.code)?(h.hostList=[],e.data.forEach((e=>{h.hostList.push({label:`${e.privateIp}(${e.hostname})`,value:e.hostId})})),h.hostId=h.hostList[0].value,b()):r.Z.error("Failed to obtain host information")})).finally((()=>{h.hostListLoading=!1}))}},L=()=>{h.createLoading=!0;const e={clusterId:h.clusterId,hostId:h.hostId};(0,a.Ox)(e).then((e=>{200===Number(e.code)?setTimeout((()=>{b()}),1e3):r.Z.error("Failed to Generate a Snapshot")})).catch((()=>{r.Z.error("Failed to Generate a Snapshot")})).finally((()=>{h.createLoading=!1}))},b=()=>{m.loading=!0;const e={clusterId:h.clusterId,hostId:h.hostId};(0,a.C4)(e).then((e=>{200===Number(e.code)?m.data=e.data:r.Z.error("Failed to obtain the snapshot query list")})).catch((()=>{r.Z.error("Failed to obtain the snapshot query list")})).finally((()=>{m.loading=!1}))},k=()=>new Promise((e=>{h.show=!0,h.title=n("snapshot.index.snapshotManage")}));return t({open:k}),(e,t)=>{const n=(0,o.resolveComponent)("icon-plus"),r=(0,o.resolveComponent)("a-button"),a=(0,o.resolveComponent)("a-option"),s=(0,o.resolveComponent)("a-select"),w=(0,o.resolveComponent)("a-table"),k=(0,o.resolveComponent)("a-spin"),x=(0,o.resolveComponent)("a-modal");return(0,o.openBlock)(),(0,o.createBlock)(x,{"mask-closable":!1,"esc-to-close":!1,visible:(0,o.unref)(h).show,title:(0,o.unref)(h).title,onCancel:v,"modal-style":{width:"900px",height:"600px"},footer:!1},{default:(0,o.withCtx)((()=>[(0,o.createElementVNode)("div",l,[(0,o.createVNode)(k,{class:"full-w",loading:(0,o.unref)(h).createLoading,tip:e.$t("snapshot.index.5mplywcvqh80")},{default:(0,o.withCtx)((()=>[(0,o.createElementVNode)("div",u,[(0,o.createVNode)(r,{type:"primary",onClick:L},{icon:(0,o.withCtx)((()=>[(0,o.createVNode)(n)])),default:(0,o.withCtx)((()=>[(0,o.createTextVNode)(" "+(0,o.toDisplayString)(e.$t("snapshot.index.5mplywcvr080")),1)])),_:1}),(0,o.createElementVNode)("div",i,[(0,o.createElementVNode)("div",c,[(0,o.createElementVNode)("div",d,(0,o.toDisplayString)(e.$t("snapshot.index.5mplywcvr7c0")),1),(0,o.createVNode)(s,{class:"select-w",loading:(0,o.unref)(h).clusterListLoading,modelValue:(0,o.unref)(h).clusterId,"onUpdate:modelValue":t[0]||(t[0]=e=>(0,o.unref)(h).clusterId=e),placeholder:e.$t("snapshot.index.5mplywcvrb80"),onChange:C},{default:(0,o.withCtx)((()=>[((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)((0,o.unref)(h).clusterList,((e,t)=>((0,o.openBlock)(),(0,o.createBlock)(a,{key:t,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["loading","modelValue","placeholder"])]),(0,o.createElementVNode)("div",p,[(0,o.createElementVNode)("div",f,(0,o.toDisplayString)(e.$t("snapshot.index.5mplywcvres0")),1),(0,o.createVNode)(s,{class:"select-w",loading:(0,o.unref)(h).hostListLoading,modelValue:(0,o.unref)(h).hostId,"onUpdate:modelValue":t[1]||(t[1]=e=>(0,o.unref)(h).hostId=e),placeholder:e.$t("snapshot.index.5mplywcvrio0")},{default:(0,o.withCtx)((()=>[((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)((0,o.unref)(h).hostList,((e,t)=>((0,o.openBlock)(),(0,o.createBlock)(a,{key:t,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["loading","modelValue","placeholder"])]),(0,o.createVNode)(r,{type:"primary",onClick:b},{default:(0,o.withCtx)((()=>[(0,o.createTextVNode)((0,o.toDisplayString)(e.$t("snapshot.index.5mplywcvrmg0")),1)])),_:1})])]),(0,o.createVNode)(w,{class:"d-a-table-row full-h",data:(0,o.unref)(m).data,columns:(0,o.unref)(g),pagination:(0,o.unref)(m).page,loading:(0,o.unref)(m).loading},null,8,["data","columns","pagination","loading"])])),_:1},8,["loading","tip"])])])),_:1},8,["visible","title"])}}}),g=n(83744);const m=(0,g.Z)(h,[["__scopeId","data-v-328973f2"]]);var v=m}}]);
//# sourceMappingURL=3283.fb6cd303.js.map